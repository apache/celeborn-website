{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"download/","text":"Versions The latest version is 0.6.0. 0.6.1 (2025-09-10) release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc 0.5.4 (2025-03-13) release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc 0.4.3 (2024-12-10) release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc 0.3.2-incubating (2024-01-08) release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc All stable releases All celeborn releases are available via https://archive.apache.org/dist/celeborn/ including checksums and signatures. At the time of writing, this includes the following versions: Apache Celeborn 0.6.1 (2025-09-10) ( Source , Binaries ) Apache Celeborn 0.6.0 (2025-07-05) ( Source , Binaries ) Apache Celeborn 0.5.4 (2025-03-13) ( Source , Binaries ) Apache Celeborn 0.5.3 (2025-01-06) ( Source , Binaries ) Apache Celeborn 0.5.2 (2024-11-26) ( Source , Binaries ) Apache Celeborn 0.5.1 (2024-07-29) ( Source , Binaries ) Apache Celeborn 0.4.3 (2024-12-10) ( Source , Binaries ) Apache Celeborn 0.4.2 (2024-07-26) ( Source , Binaries ) Apache Celeborn 0.5.0 (2024-06-24) ( Source , Binaries ) Apache Celeborn 0.4.1 (2024-05-22) ( Source , Binaries ) Apache Celeborn 0.4.0-incubating (2024-02-06) ( Source , Binaries ) Apache Celeborn 0.3.2-incubating (2024-01-08) ( Source , Binaries ) Apache Celeborn 0.3.1-incubating (2023-10-13) ( Source , Binaries ) Apache Celeborn 0.3.0-incubating (2023-07-27) ( Source , Binaries ) Apache Celeborn 0.2.1-incubating (2023-03-29) ( Source , Binaries ) Apache Celeborn 0.2.0-incubating (2023-03-01) ( Source , Binaries ) Old releases Before entering Apache Incubator, it was named as Remote Shuffle Service. GitHub releases Verify the integrity KEYS Instructions","title":"Download"},{"location":"download/#versions","text":"The latest version is 0.6.0.","title":"Versions"},{"location":"download/#061-2025-09-10","text":"release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc","title":"0.6.1 (2025-09-10)"},{"location":"download/#054-2025-03-13","text":"release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc","title":"0.5.4 (2025-03-13)"},{"location":"download/#043-2024-12-10","text":"release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc","title":"0.4.3 (2024-12-10)"},{"location":"download/#032-incubating-2024-01-08","text":"release note Download from ASF Checksum Signature Source Code src sha512 asc Binary bin sha512 asc","title":"0.3.2-incubating (2024-01-08)"},{"location":"download/#all-stable-releases","text":"All celeborn releases are available via https://archive.apache.org/dist/celeborn/ including checksums and signatures. At the time of writing, this includes the following versions: Apache Celeborn 0.6.1 (2025-09-10) ( Source , Binaries ) Apache Celeborn 0.6.0 (2025-07-05) ( Source , Binaries ) Apache Celeborn 0.5.4 (2025-03-13) ( Source , Binaries ) Apache Celeborn 0.5.3 (2025-01-06) ( Source , Binaries ) Apache Celeborn 0.5.2 (2024-11-26) ( Source , Binaries ) Apache Celeborn 0.5.1 (2024-07-29) ( Source , Binaries ) Apache Celeborn 0.4.3 (2024-12-10) ( Source , Binaries ) Apache Celeborn 0.4.2 (2024-07-26) ( Source , Binaries ) Apache Celeborn 0.5.0 (2024-06-24) ( Source , Binaries ) Apache Celeborn 0.4.1 (2024-05-22) ( Source , Binaries ) Apache Celeborn 0.4.0-incubating (2024-02-06) ( Source , Binaries ) Apache Celeborn 0.3.2-incubating (2024-01-08) ( Source , Binaries ) Apache Celeborn 0.3.1-incubating (2023-10-13) ( Source , Binaries ) Apache Celeborn 0.3.0-incubating (2023-07-27) ( Source , Binaries ) Apache Celeborn 0.2.1-incubating (2023-03-29) ( Source , Binaries ) Apache Celeborn 0.2.0-incubating (2023-03-01) ( Source , Binaries )","title":"All stable releases"},{"location":"download/#old-releases","text":"Before entering Apache Incubator, it was named as Remote Shuffle Service. GitHub releases","title":"Old releases"},{"location":"download/#verify-the-integrity","text":"KEYS Instructions","title":"Verify the integrity"},{"location":"security/","text":"Apache Celeborn\u2122 Security If you have apprehensions regarding Celeborn's security or you discover vulnerability or potential threat, don\u2019t hesitate to get in touch with the Apache Security Team by dropping a mail at security@apache.org. In the mail, specify the project name Celeborn with the description of the issue or potential threat. You are also urged to recommend the way to reproduce and replicate the issue. The security team and the Celeborn community will get back to you after assessing and analysing the findings. PLEASE PAY ATTENTION to report the security issue on the security email before disclosing it on public domain. For more details, please refer to https://www.apache.org/security/","title":"Security"},{"location":"security/#apache-celeborntm-security","text":"If you have apprehensions regarding Celeborn's security or you discover vulnerability or potential threat, don\u2019t hesitate to get in touch with the Apache Security Team by dropping a mail at security@apache.org. In the mail, specify the project name Celeborn with the description of the issue or potential threat. You are also urged to recommend the way to reproduce and replicate the issue. The security team and the Celeborn community will get back to you after assessing and analysing the findings. PLEASE PAY ATTENTION to report the security issue on the security email before disclosing it on public domain. For more details, please refer to https://www.apache.org/security/","title":"Apache Celeborn\u2122 Security"},{"location":"storage-usage-quota/","text":"Storage Usage Quota Guide This documentation describes how RSS limits user's storage resource usage by setting quota. Quota limitation RSS has a configurable user storage quota system. This allows RSS admin to manage each user's max resource usage to keep RSS cluster more stable. This feature can avoid RSS cluster resources being occupied by the minority with huge applications. RSS cluster's worker will collect each user's resource consumption and report the information to master in register and heartbeat message. When LifecycleManager register shuffle to RSS master, will check current user's resource usage, if used resource exceed the quota setting, shuffle will be fallback to ESS. Storage resource Currently, RSS support two storage levels: 1. Local disk. 2. HDFS. And there are two levels of resources: 1. written bytes. 2. written file numbers. So, now we support four setting about quota: diskBytesWritten diskFileCount hdfsBytesWritten hdfsFileCount If not set, default quota value is -1 , means there is no limit for this user. Configuration The quota system is configured via a configuration yaml file that RSS expects to be present at $RSS_HOME/conf/quota.yaml . A custom file location can be specified via the rss.quota.configuration.path configuration property. The quota yaml configuration file should be organized as a list, each part setting one user's quota. In the quota section, set each quota's threshold value. Notice: quota value should be numeric value that can be cast to Long type. For example: - tenantId: AAA name: Tom quota: diskBytesWritten: 10000 diskFileCount: 200 hdfsBytesWritten: -1 hdfsFileCount: -1 - tenantId: BBB name: Jerry quota: diskBytesWritten: -1 diskFileCount: -1 hdfsBytesWritten: 10000 hdfsFileCount: 200","title":"Storage usage quota"},{"location":"storage-usage-quota/#storage-usage-quota-guide","text":"This documentation describes how RSS limits user's storage resource usage by setting quota.","title":"Storage Usage Quota Guide"},{"location":"storage-usage-quota/#quota-limitation","text":"RSS has a configurable user storage quota system. This allows RSS admin to manage each user's max resource usage to keep RSS cluster more stable. This feature can avoid RSS cluster resources being occupied by the minority with huge applications. RSS cluster's worker will collect each user's resource consumption and report the information to master in register and heartbeat message. When LifecycleManager register shuffle to RSS master, will check current user's resource usage, if used resource exceed the quota setting, shuffle will be fallback to ESS.","title":"Quota limitation"},{"location":"storage-usage-quota/#storage-resource","text":"Currently, RSS support two storage levels: 1. Local disk. 2. HDFS. And there are two levels of resources: 1. written bytes. 2. written file numbers. So, now we support four setting about quota: diskBytesWritten diskFileCount hdfsBytesWritten hdfsFileCount If not set, default quota value is -1 , means there is no limit for this user.","title":"Storage resource"},{"location":"storage-usage-quota/#configuration","text":"The quota system is configured via a configuration yaml file that RSS expects to be present at $RSS_HOME/conf/quota.yaml . A custom file location can be specified via the rss.quota.configuration.path configuration property. The quota yaml configuration file should be organized as a list, each part setting one user's quota. In the quota section, set each quota's threshold value. Notice: quota value should be numeric value that can be cast to Long type. For example: - tenantId: AAA name: Tom quota: diskBytesWritten: 10000 diskFileCount: 200 hdfsBytesWritten: -1 hdfsFileCount: -1 - tenantId: BBB name: Jerry quota: diskBytesWritten: -1 diskFileCount: -1 hdfsBytesWritten: 10000 hdfsFileCount: 200","title":"Configuration"},{"location":"user/","text":"Who's Using Various companies and organizations are using Celeborn for production and commercial products. Are you using this project? Add your company . .itemContainer { display: flex; flex-wrap: wrap; padding: 0 0px; } .companyItem { width: 257px; height: 120px; display: flex; flex-direction: column; align-items: center; background: #FFFFFF; border: 0px solid #E3E3E3; box-sizing: border-box; border-radius: 10px; position: relative; margin-bottom: 32px; } .companyItem img { max-width: 80%; max-height: 70%; margin: auto; display: block; } companyItemImg { width: 200px; height: 180px; margin-top: 48px; margin-bottom: 20px; height: 70%; vertical-align: middle; }","title":"Who's Using"},{"location":"user/#whos-using","text":"Various companies and organizations are using Celeborn for production and commercial products. Are you using this project? Add your company . .itemContainer { display: flex; flex-wrap: wrap; padding: 0 0px; } .companyItem { width: 257px; height: 120px; display: flex; flex-direction: column; align-items: center; background: #FFFFFF; border: 0px solid #E3E3E3; box-sizing: border-box; border-radius: 10px; position: relative; margin-bottom: 32px; } .companyItem img { max-width: 80%; max-height: 70%; margin: auto; display: block; } companyItemImg { width: 200px; height: 180px; margin-top: 48px; margin-bottom: 20px; height: 70%; vertical-align: middle; }","title":"Who's Using"},{"location":"community/committer/","text":"Current committers Name Binjie Yang Chandni Singh Cheng Pan Ethan Feng Fei Wang Fu Chen Jiaming Xie JiaShu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Sanskar Modi Shaoyun Chen Xiaofeng Jiang Yi Zhu Yifan Xia Yihe Li Wei Wu Weijie Guo Zhongqiang Chen Become A Committer of Apache Celeborn\u2122 Anyone being supportive of the community and working in any of the CoPDoC areas can become an Apache Celeborn committer. The CoPDoC is an acronym from ASF to describe how we recognize your contributions not only by code. Community - You can join us via our mailing list, issue trackers, discussions page to interact with community members, and share vision and knowledge Project - a clear vision and consensus are needed Documentation - without it, the stuff remains only in the minds of the authors Code - discussion goes nowhere without code Apache Celeborn community strives to be meritocratic. Thus, once someone has contributed sufficiently to any area of CoPDoC they can be a candidate for committer-ship and at last voted in as a Celeborn committer. Being an Apache Celeborn committer does not necessarily mean you must commit code with your commit privilege to the codebase; it means you are committed to the Celeborn project and are productively contributing to our community\u2019s success. Committer requirements There are no strict rules for becoming a committer or PMC member. Candidates for new committers are typically people that are active contributors and community members. Anyway, if the rules can be clarified a little bit, it can somehow clear the doubts in the minds of contributors and make the community more transparent, reasonable, and fair. Continuous contributions Committer candidates should have a decent amount of continuous engagements and contributions (fixing bugs, adding new features, writing documentation, maintaining issues boards, code review, or answering community questions) to Celeborn either by contributing to the codebase of the main website or Celeborn\u2019s GitHub repositories. +5 months with light activity and engagement +4 months of medium activity and engagement +3 month with solid activity and engagement Quality of contributions A solid general understanding of the project Well tested, well-designed, following Apache Celeborn coding standards, and simple patches Well-organized and detailed user-oriented documentation Community involvement Be active, courteous, and respectful on the dev mailing list and help mentor newer contributors and users Be active, courteous, and respectful on the issue tracker for project maintenance Be active, courteous, and respectful for pull requests reviewing Be involved in the design road map discussions with a professional and diplomatic approach even if there is a disagreement Promoting the project by writing articles or holding events","title":"Become a Committer"},{"location":"community/committer/#current-committers","text":"Name Binjie Yang Chandni Singh Cheng Pan Ethan Feng Fei Wang Fu Chen Jiaming Xie JiaShu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Sanskar Modi Shaoyun Chen Xiaofeng Jiang Yi Zhu Yifan Xia Yihe Li Wei Wu Weijie Guo Zhongqiang Chen","title":"Current committers"},{"location":"community/committer/#become-a-committer-of-apache-celeborntm","text":"Anyone being supportive of the community and working in any of the CoPDoC areas can become an Apache Celeborn committer. The CoPDoC is an acronym from ASF to describe how we recognize your contributions not only by code. Community - You can join us via our mailing list, issue trackers, discussions page to interact with community members, and share vision and knowledge Project - a clear vision and consensus are needed Documentation - without it, the stuff remains only in the minds of the authors Code - discussion goes nowhere without code Apache Celeborn community strives to be meritocratic. Thus, once someone has contributed sufficiently to any area of CoPDoC they can be a candidate for committer-ship and at last voted in as a Celeborn committer. Being an Apache Celeborn committer does not necessarily mean you must commit code with your commit privilege to the codebase; it means you are committed to the Celeborn project and are productively contributing to our community\u2019s success.","title":"Become A Committer of Apache Celeborn\u2122"},{"location":"community/committer/#committer-requirements","text":"There are no strict rules for becoming a committer or PMC member. Candidates for new committers are typically people that are active contributors and community members. Anyway, if the rules can be clarified a little bit, it can somehow clear the doubts in the minds of contributors and make the community more transparent, reasonable, and fair.","title":"Committer requirements"},{"location":"community/committer/#continuous-contributions","text":"Committer candidates should have a decent amount of continuous engagements and contributions (fixing bugs, adding new features, writing documentation, maintaining issues boards, code review, or answering community questions) to Celeborn either by contributing to the codebase of the main website or Celeborn\u2019s GitHub repositories. +5 months with light activity and engagement +4 months of medium activity and engagement +3 month with solid activity and engagement","title":"Continuous contributions"},{"location":"community/committer/#quality-of-contributions","text":"A solid general understanding of the project Well tested, well-designed, following Apache Celeborn coding standards, and simple patches Well-organized and detailed user-oriented documentation","title":"Quality of contributions"},{"location":"community/committer/#community-involvement","text":"Be active, courteous, and respectful on the dev mailing list and help mentor newer contributors and users Be active, courteous, and respectful on the issue tracker for project maintenance Be active, courteous, and respectful for pull requests reviewing Be involved in the design road map discussions with a professional and diplomatic approach even if there is a disagreement Promoting the project by writing articles or holding events","title":"Community involvement"},{"location":"community/maillist/","text":"Celeborn Mailing Lists The Celeborn developer mailing list is the preferred means for all your questions when using Celeborn, which pushes your doubts out to the entire community. This is the best way to keep up-to-date with the community. Before you post anything to the mailing lists, be sure that you already subscribe to them. The currently available lists are listed in the below table. List Name Address Subscribe Unsubscribe Archive Developer List dev@celeborn.apache.org subscribe unsubscribe archive User List user@celeborn.apache.org subscribe unsubscribe archive","title":"Join the Mailing Lists"},{"location":"community/maillist/#celeborn-mailing-lists","text":"The Celeborn developer mailing list is the preferred means for all your questions when using Celeborn, which pushes your doubts out to the entire community. This is the best way to keep up-to-date with the community. Before you post anything to the mailing lists, be sure that you already subscribe to them. The currently available lists are listed in the below table. List Name Address Subscribe Unsubscribe Archive Developer List dev@celeborn.apache.org subscribe unsubscribe archive User List user@celeborn.apache.org subscribe unsubscribe archive","title":"Celeborn Mailing Lists"},{"location":"community/news/","text":"Latest News Date Title Brief 2025 September 10 Release 0.6.1 Celeborn release 0.6.1. 2025 July 5 Release 0.6.0 Celeborn release 0.6.0. 2025 May 20 New Committer: Jiaming Xie We are happy to announce Jiaming Xie becomes a new Celeborn committer. 2025 March 13 Release 0.5.4 Celeborn release 0.5.4. 2025 January 6 Release 0.5.3 Celeborn release 0.5.3. 2024 December 31 New PMC Member: Fei Wang We are happy to announce Fei Wang becomes a new Celeborn PMC member. 2024 December 18 New Committer: Sanskar Modi We are happy to announce Sanskar Modi becomes a new Celeborn committer. 2024 December 10 Release 0.4.3 Celeborn release 0.4.3. 2024 November 28 New Committer: Weijie Guo We are happy to announce Weijie Guo becomes a new Celeborn committer. 2024 November 26 Release 0.5.2 Celeborn release 0.5.2. 2024 September 20 New PMC Member: Mridul Muralidharan We are happy to announce Mridul Muralidharan becomes a new Celeborn PMC member. 2024 July 29 Release 0.5.1 Celeborn release 0.5.1. 2024 July 26 Release 0.4.2 Celeborn release 0.4.2. 2024 July 23 New PMC Member: Xiaofeng Jiang We are happy to announce Xiaofeng Jiang becomes a new Celeborn PMC member. 2024 July 22 New Committer: Fei Wang We are happy to announce Fei Wang becomes a new Celeborn committer. 2024 June 24 Release 0.5.0 Celeborn release 0.5.0. 2024 May 22 Release 0.4.1 Celeborn release 0.4.1. 2024 April 28 New Committer: Mridul Muralidharan We are happy to announce Mridul Muralidharan becomes a new Celeborn committer. 2024 March 21 New Committer: Chandni Singh We are happy to announce Chandni Singh becomes a new Celeborn committer. 2024 February 14 New PPMC Member: Fu Chen We are happy to announce Fu Chen becomes a new Celeborn PPMC member. 2024 February 6 Release 0.4.0-incubating Celeborn release 0.4.0-incubating. 2024 January 11 New Committer: Xiaofeng Jiang We are happy to announce Xiaofeng Jiang becomes a new Celeborn committer. 2024 January 8 Release 0.3.2-incubating Celeborn release 0.3.2-incubating. 2023 November 16 New Committer: Yihe Li We are happy to announce Yihe Li becomes a new Celeborn committer. 2023 November 7 New Committer: Shaoyun Chen We are happy to announce Shaoyun Chen becomes a new Celeborn committer. 2023 October 13 Release 0.3.1-incubating Celeborn release 0.3.1-incubating. 2023 August 4 New Committer: Fu chen We are happy to announce Fu Chen becomes a new Celeborn committer. 2023 July 27 Release 0.3.0-incubating Celeborn release 0.3.0-incubating. 2023 March 29 Release 0.2.1-incubating Celeborn release 0.2.1-incubating. 2023 March 17 New Committer: Binjie Yang,Zhongqiang Chen,Jiashu Xiong We are happy to announce Binjie Yang,Zhongqiang Chen,Jiashu Xiong become new Celeborn committers. 2023 March 1 Release 0.2.0-incubating Celeborn release 0.2.0-incubating as its first Apache release. 2022 Nov 30 New Committer: Yifan Xia We are happy to announce Yifan Xia becomes a new Celeborn committer. 2022 October 18 Accept Celeborn into Apache Incubator Celeborn is accepted into Apache Incubator, see details in incubation status .","title":"Latest News"},{"location":"community/news/#latest-news","text":"Date Title Brief 2025 September 10 Release 0.6.1 Celeborn release 0.6.1. 2025 July 5 Release 0.6.0 Celeborn release 0.6.0. 2025 May 20 New Committer: Jiaming Xie We are happy to announce Jiaming Xie becomes a new Celeborn committer. 2025 March 13 Release 0.5.4 Celeborn release 0.5.4. 2025 January 6 Release 0.5.3 Celeborn release 0.5.3. 2024 December 31 New PMC Member: Fei Wang We are happy to announce Fei Wang becomes a new Celeborn PMC member. 2024 December 18 New Committer: Sanskar Modi We are happy to announce Sanskar Modi becomes a new Celeborn committer. 2024 December 10 Release 0.4.3 Celeborn release 0.4.3. 2024 November 28 New Committer: Weijie Guo We are happy to announce Weijie Guo becomes a new Celeborn committer. 2024 November 26 Release 0.5.2 Celeborn release 0.5.2. 2024 September 20 New PMC Member: Mridul Muralidharan We are happy to announce Mridul Muralidharan becomes a new Celeborn PMC member. 2024 July 29 Release 0.5.1 Celeborn release 0.5.1. 2024 July 26 Release 0.4.2 Celeborn release 0.4.2. 2024 July 23 New PMC Member: Xiaofeng Jiang We are happy to announce Xiaofeng Jiang becomes a new Celeborn PMC member. 2024 July 22 New Committer: Fei Wang We are happy to announce Fei Wang becomes a new Celeborn committer. 2024 June 24 Release 0.5.0 Celeborn release 0.5.0. 2024 May 22 Release 0.4.1 Celeborn release 0.4.1. 2024 April 28 New Committer: Mridul Muralidharan We are happy to announce Mridul Muralidharan becomes a new Celeborn committer. 2024 March 21 New Committer: Chandni Singh We are happy to announce Chandni Singh becomes a new Celeborn committer. 2024 February 14 New PPMC Member: Fu Chen We are happy to announce Fu Chen becomes a new Celeborn PPMC member. 2024 February 6 Release 0.4.0-incubating Celeborn release 0.4.0-incubating. 2024 January 11 New Committer: Xiaofeng Jiang We are happy to announce Xiaofeng Jiang becomes a new Celeborn committer. 2024 January 8 Release 0.3.2-incubating Celeborn release 0.3.2-incubating. 2023 November 16 New Committer: Yihe Li We are happy to announce Yihe Li becomes a new Celeborn committer. 2023 November 7 New Committer: Shaoyun Chen We are happy to announce Shaoyun Chen becomes a new Celeborn committer. 2023 October 13 Release 0.3.1-incubating Celeborn release 0.3.1-incubating. 2023 August 4 New Committer: Fu chen We are happy to announce Fu Chen becomes a new Celeborn committer. 2023 July 27 Release 0.3.0-incubating Celeborn release 0.3.0-incubating. 2023 March 29 Release 0.2.1-incubating Celeborn release 0.2.1-incubating. 2023 March 17 New Committer: Binjie Yang,Zhongqiang Chen,Jiashu Xiong We are happy to announce Binjie Yang,Zhongqiang Chen,Jiashu Xiong become new Celeborn committers. 2023 March 1 Release 0.2.0-incubating Celeborn release 0.2.0-incubating as its first Apache release. 2022 Nov 30 New Committer: Yifan Xia We are happy to announce Yifan Xia becomes a new Celeborn committer. 2022 October 18 Accept Celeborn into Apache Incubator Celeborn is accepted into Apache Incubator, see details in incubation status .","title":"Latest News"},{"location":"community/pmc/","text":"Current PMC Members Name Cheng Pan Ethan Feng Fei Wang Fu Chen Jiashu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Xiaofeng Jiang Yi Zhu Wei Wu Becket Qin Duo Zhang Lidong Dai Ning Jiang Yu Li Become A PMC member of Apache Celeborn\u2122 Anyone being supportive of the community and working in any of the CoPDoC areas can become an Apache Celeborn PMC member. The CoPDoC is an acronym from ASF to describe how we recognize your contributions not only by code. Community - You can join us via our mailing list, issue trackers, discussions page to interact with community members, and share vision and knowledge Project - a clear vision and consensus are needed Documentation - without it, the stuff remains only in the minds of the authors Code - discussion goes nowhere without code Apache Celeborn community strives to be meritocratic. Thus, once someone has contributed sufficiently to any area of CoPDoC they can be a candidate for PMC membership and at last voted in as a Celeborn PMC member. The PMC should take an active role in watching committers develop as community participants. PMC member requirements: There are no strict rules for becoming a PMC member. Candidates for new PMC member are typically committers that are stilling actively participate in the community development after obtaining the committer membership, or contributors and community members that make significant contributions to the community for both code and contributor develop. It is a clear goal of Celeborn to have all committers participate in the PMC based on their contributions, which are considered at a community level (not just a technical one). Continuous contributions PMC member candidates should have a decent amount of continuous engagements and contributions (fixing bugs, adding new features, writing documentation, maintaining issues boards, code review, mentoring new contributors, and answering community questions) to the Celeborn codebase and community. +7 months with light activity and engagement. +6 months of medium activity and engagement. +5 month with solid activity and engagement. Quality of contributions A solid general understanding of the project Well tested, well-designed, following Apache Celeborn coding standards, and simple patches. Well-organized and detailed user-oriented documentation. Community involvement Be active, courteous, and respectful on the dev mailing list and help mentor newer contributors and users. Be active, courteous, and respectful on the issue tracker for project maintenance Be active, courteous, and respectful for pull requests reviewing Be involved in the design road map discussions with a professional and diplomatic approach even if there is a disagreement Promoting the project by writing articles or holding events","title":"Become a PMC Member"},{"location":"community/pmc/#current-pmc-members","text":"Name Cheng Pan Ethan Feng Fei Wang Fu Chen Jiashu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Xiaofeng Jiang Yi Zhu Wei Wu Becket Qin Duo Zhang Lidong Dai Ning Jiang Yu Li","title":"Current PMC Members"},{"location":"community/pmc/#become-a-pmc-member-of-apache-celeborntm","text":"Anyone being supportive of the community and working in any of the CoPDoC areas can become an Apache Celeborn PMC member. The CoPDoC is an acronym from ASF to describe how we recognize your contributions not only by code. Community - You can join us via our mailing list, issue trackers, discussions page to interact with community members, and share vision and knowledge Project - a clear vision and consensus are needed Documentation - without it, the stuff remains only in the minds of the authors Code - discussion goes nowhere without code Apache Celeborn community strives to be meritocratic. Thus, once someone has contributed sufficiently to any area of CoPDoC they can be a candidate for PMC membership and at last voted in as a Celeborn PMC member. The PMC should take an active role in watching committers develop as community participants.","title":"Become A PMC member of Apache Celeborn\u2122"},{"location":"community/pmc/#pmc-member-requirements","text":"There are no strict rules for becoming a PMC member. Candidates for new PMC member are typically committers that are stilling actively participate in the community development after obtaining the committer membership, or contributors and community members that make significant contributions to the community for both code and contributor develop. It is a clear goal of Celeborn to have all committers participate in the PMC based on their contributions, which are considered at a community level (not just a technical one).","title":"PMC member requirements:"},{"location":"community/pmc/#continuous-contributions","text":"PMC member candidates should have a decent amount of continuous engagements and contributions (fixing bugs, adding new features, writing documentation, maintaining issues boards, code review, mentoring new contributors, and answering community questions) to the Celeborn codebase and community. +7 months with light activity and engagement. +6 months of medium activity and engagement. +5 month with solid activity and engagement.","title":"Continuous contributions"},{"location":"community/pmc/#quality-of-contributions","text":"A solid general understanding of the project Well tested, well-designed, following Apache Celeborn coding standards, and simple patches. Well-organized and detailed user-oriented documentation.","title":"Quality of contributions"},{"location":"community/pmc/#community-involvement","text":"Be active, courteous, and respectful on the dev mailing list and help mentor newer contributors and users. Be active, courteous, and respectful on the issue tracker for project maintenance Be active, courteous, and respectful for pull requests reviewing Be involved in the design road map discussions with a professional and diplomatic approach even if there is a disagreement Promoting the project by writing articles or holding events","title":"Community involvement"},{"location":"community/project_management_committee/","text":"Project Management Committee Celeborn has received numerous help from the community. This page lists the contributors and committers of Apache Celeborn\u2122. Project Management Committee (PMC) A committer will be promoted to a PMC member when the community thinks he/she is able to be in charge at least a major component of this project. Current Celeborn PMC members are as follows: Name GitHub ID Apache ID Cheng Pan pan3793 chengpan@apache.org Ethan Feng FMX ethanfeng@apache.org Fei Wang turboFei feiwang@apache.org Fu Chen cfmcgrady fchen@apache.org Jiashu Xiong RexXiong rexxiong@apache.org Kerwin Zhang kerwin-zk kerwinzhang@apache.org Keyong Zhou waitinfuture zhouky@apache.org Mridul Muralidharan mridulm mridulm80@apache.org Xiaofeng Jiang SteNicholas nicholasjiang@apache.org Yi Zhu AngersZhuuuu angerszhuuuu@apache.org Wei Wu powerwu powerwu@apache.org Mentors Mentors from Apache Incubator help the project to turn into a good shape following the \"Apache\" way. Thank you, mentors! Name GitHub ID Apache ID Becket Qin becketqin jqin@apache.org Duo Zhang Apache9 zhangduo@apache.org Lidong Dai davidzollo lidongdai@apache.org Willem Ning Jiang WillemJiang ningjiang@apache.org Yu Li carp84 liyu@apache.org Committers A contributor who contributes enough code to Celeborn will be promoted to a committer. A committer has the write access to Celeborn git repository. Current Celeborn Committers are as follows: Name GitHub ID Apache ID Binjie Yang zwangsheng binjieyang@apache.org Chandni Singh otterc csingh@apache.org Sanskar Modi s0nskar s0nskar@apache.org Shaoyun Chen cxzl25 csy@apache.org Weijie Guo reswqa guoweijie@apache.org Yifan Xia nafiyAix nafiyaix@apache.org Yihe Li onebox-li liyihe@apache.org Zhongqiang Chen zhongqiangczq zhongqiangchen@apache.org","title":"Project Management Committee"},{"location":"community/project_management_committee/#project-management-committee","text":"Celeborn has received numerous help from the community. This page lists the contributors and committers of Apache Celeborn\u2122.","title":"Project Management Committee"},{"location":"community/project_management_committee/#project-management-committee-pmc","text":"A committer will be promoted to a PMC member when the community thinks he/she is able to be in charge at least a major component of this project. Current Celeborn PMC members are as follows: Name GitHub ID Apache ID Cheng Pan pan3793 chengpan@apache.org Ethan Feng FMX ethanfeng@apache.org Fei Wang turboFei feiwang@apache.org Fu Chen cfmcgrady fchen@apache.org Jiashu Xiong RexXiong rexxiong@apache.org Kerwin Zhang kerwin-zk kerwinzhang@apache.org Keyong Zhou waitinfuture zhouky@apache.org Mridul Muralidharan mridulm mridulm80@apache.org Xiaofeng Jiang SteNicholas nicholasjiang@apache.org Yi Zhu AngersZhuuuu angerszhuuuu@apache.org Wei Wu powerwu powerwu@apache.org","title":"Project Management Committee (PMC)"},{"location":"community/project_management_committee/#mentors","text":"Mentors from Apache Incubator help the project to turn into a good shape following the \"Apache\" way. Thank you, mentors! Name GitHub ID Apache ID Becket Qin becketqin jqin@apache.org Duo Zhang Apache9 zhangduo@apache.org Lidong Dai davidzollo lidongdai@apache.org Willem Ning Jiang WillemJiang ningjiang@apache.org Yu Li carp84 liyu@apache.org","title":"Mentors"},{"location":"community/project_management_committee/#committers","text":"A contributor who contributes enough code to Celeborn will be promoted to a committer. A committer has the write access to Celeborn git repository. Current Celeborn Committers are as follows: Name GitHub ID Apache ID Binjie Yang zwangsheng binjieyang@apache.org Chandni Singh otterc csingh@apache.org Sanskar Modi s0nskar s0nskar@apache.org Shaoyun Chen cxzl25 csy@apache.org Weijie Guo reswqa guoweijie@apache.org Yifan Xia nafiyAix nafiyaix@apache.org Yihe Li onebox-li liyihe@apache.org Zhongqiang Chen zhongqiangczq zhongqiangchen@apache.org","title":"Committers"},{"location":"community/release_guide/","text":"Celeborn Release Guide Introduction The Apache Celeborn project periodically declares and publishes releases. A release is one or more packages of the project artifact(s) that are approved for general public distribution and use. They may come with various degrees of caveat regarding their perceived quality and potential for change, such as \"alpha\", \"beta\", \"incubating\", \"stable\", etc. The Celeborn community treats releases with great importance. They are a public face of the project and most users interact with the project only through the releases. Releases are signed off by the entire Celeborn community in a public vote. Each release is executed by a Release Manager, who is selected among the Celeborn committers. This document describes the process that the Release Manager follows to perform a release. Any changes to this process should be discussed and adopted on the dev mailing list . Please remember that publishing software has legal consequences. This guide complements the foundation-wide Product Release Policy and Release Distribution Policy . Overview The release process consists of several steps: Decide to release Prepare for the release Cut branch off for major release Build a release candidate Vote on the release candidate If necessary, fix any issues and go back to step 3. Finalize the release Promote the release Remove the dist repo directories for deprecated release candidates Decide to release Deciding to release and selecting a Release Manager is the first step of the release process. This is a consensus-based decision of the entire community. Anybody can propose a release on the dev mailing list , giving a solid argument and nominating a committer as the Release Manager (including themselves). There\u2019s no formal process, no vote requirements, and no timing requirements. Any objections should be resolved by consensus before starting the release. In general, the community prefers to have a rotating set of 1-2 Release Managers. Keeping a small core set of managers allows enough people to build expertise in this area and improve processes over time, without Release Managers needing to re-learn the processes for each release. That said, if you are a committer interested in serving the community in this way, please reach out to the community on the dev mailing list . Checklist to proceed to the next step Community agrees to release Community selects a Release Manager Prepare for the release Before your first release, you should perform one-time configuration steps. This will set up your security keys for signing the release and access to various release repositories. One-time setup instructions ASF authentication The environments ASF_USERNAME and ASF_PASSWORD have been used in several places and several times in the release process, you can either one-time set up them in ~/.bashrc or ~/.zshrc , or export them in terminal every time. export ASF_USERNAME = <your apache username> export ASF_PASSWORD = <your apache password> Java Home An available environment variable JAVA_HOME , you can do echo $JAVA_HOME to check it. Note The Java version should be 8. Subversion Besides on git , svn is also required for Apache release, please refer to https://www.apache.org/dev/version-control.html#https-svn for details. GPG Key You need to have a GPG key to sign the release artifacts. Please be aware of the ASF-wide release signing guidelines . If you don\u2019t have a GPG key associated with your Apache account, please create one according to the guidelines. Determine your Apache GPG Key and Key ID, as follows: gpg --list-keys --keyid-format SHORT This will list your GPG keys. One of these should reflect your Apache account, for example: pub rsa4096/37356FA0 2022 -10-27 [ SC ] [ expires: 2028 -10-27 ] FCF20BB29C7BEFDF58F998F76392F71F37356FA0 uid [ ultimate ] Ethan Feng <ethanfeng@apache.org> sub rsa4096/D2ED4CBF 2022 -10-27 [ E ] [ expires: 2028 -10-27 ] Note To follow the Apache's release specification , all new RSA keys generated should be at least 4096 bits. Do not generate new DSA keys. Here, the key ID is the 8-digit hex string in the pub line: 37356FA0 . To export the PGP public key, using: gpg --armor --export 37356FA0 If you have more than one gpg key, you can specify the default key as the following: echo 'default-key <key-fpr>' > ~/.gnupg/gpg.conf The last step is to update the KEYS file with your code signing key https://www.apache.org/dev/openpgp.html#export-public-key svn checkout --depth = files \"https://dist.apache.org/repos/dist/release/celeborn/\" work/svn-celeborn ( gpg --list-sigs \" ${ ASF_USERNAME } @apache.org\" && gpg --export --armor \" ${ ASF_USERNAME } @apache.org\" ) >> work/svn-celeborn/KEYS svn commit --username \" ${ ASF_USERNAME } \" --password \" ${ ASF_PASSWORD } \" --message \"Update KEYS\" work/svn-celeborn Cut branch if for major release celeborn use version pattern {MAJOR_VERSION}.{MINOR_VERSION}.{PATCH_VERSION}[-{OPTIONAL_SUFFIX}] , e.g. 0.5.0 . Major Release means MAJOR_VERSION or MINOR_VERSION changed, and Patch Release means PATCH_VERSION changed. The main step towards preparing a feature release is to create a release branch. This is done via standard Git branching mechanism and should be announced to the community once the branch is created. Note If you are releasing a patch version, you can ignore this step. The release branch pattern is branch-{MAJOR_VERSION}.{MINOR_VERSION} , e.g. branch-0.5 . After cutting release branch, don't forget bump version in main branch. Build a release candidate Don't forget to switch to the release branch! Set environment variables. # The RELEASE_VERSION will be extracted from the project's root `pom.xml` export RELEASE_RC_NO = <RC number, e.g. 0 > Bump version. Considering that other committers may merge PRs during your release period, you should accomplish the version change first, and then come back to the release candidate tag to continue the rest release process. The tag pattern is v${RELEASE_VERSION}-rc${RELEASE_RC_NO} , e.g. v0.5.0-rc0 Note After all the voting passed, be sure to create a final tag with the pattern: v${RELEASE_VERSION} # Bump to the release version # change the <project.version> in pom to ${RELEASE_VERSION} git commit -am \"[RELEASE] Bump ${ RELEASE_VERSION } \" # Create tag git tag v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } # Push branch to apache remote repo git push apache # Push tag to apache remote repo git push apache v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } # Go back to release candidate tag git checkout v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } Package source and binary artifacts, and upload them to the Apache staging SVN repo. Publish jars to the Apache staging Maven repo. build/release/release.sh publish To make your release available in the staging repository, you must close the staging repo in the Apache Nexus . Until you close, you can re-run deploying to staging multiple times. But once closed, it will create a new staging repo. So ensure you close this, so that the next RC (if need be) is on a new repo. Once everything is good, close the staging repository on Apache Nexus. Generate a pre-release note from GitHub for the subsequent voting. Goto the release page and click the \"Draft a new release\" button, then it would jump to a new page to prepare the release. Filling in all the necessary information required by the form. And in the bottom of the form, choose the \"This is a pre-release\" checkbox. Finally, click the \"Publish release\" button to finish the step. Note The pre-release note is used for voting purposes. It would be marked with a Pre-release tag. After all the voting works(dev and general) are finished, do not forget to inverse the \"This is a pre-release\" checkbox. The pre-release version comes from vx.y.z-rcN tags, and the final version should come from vx.y.z tags. Vote on the release candidate The release voting takes place on the Apache Celeborn developers list. If possible, attach a draft of the release notes with the email. Recommend represent voting closing time in UTC format. Make sure the email is in text format and the links are correct. Once the vote is done, you should also send out a summary email with the totals, with a subject that looks something like [VOTE][RESULT] Release Apache Celeborn ... Finalize the Release Danger THIS STEP IS IRREVERSIBLE so make sure you selected the correct staging repository. Once you move the artifacts into the release folder, they cannot be removed. After the vote passes, to upload the binaries to Apache mirrors, you move the binaries from dev directory (this should be where they are voted) to release directory. This \"moving\" is the only way you can add stuff to the actual release directory. (Note: only PMC members can move to release directory) Move the subdirectory in \"dev\" to the corresponding directory in \"release\". If you've added your signing key to the KEYS file, also update the release copy. build/release/release.sh finalize Verify that the resources are present in https://www.apache.org/dist/celeborn/. It may take a while for them to be visible. This will be mirrored throughout the Apache network. For Maven Central Repository, you can Release from the Apache Nexus Repository Manager . Log in, open \"Staging Repositories\", find the one voted on, select and click \"Release\" and confirm. If successful, it should show up under https://repository.apache.org/content/repositories/releases/org/apache/celeborn/ and the same under https://repository.apache.org/content/groups/maven-staging-group/org/apache/celeborn/ (look for the correct release version). After some time this will be synced to Maven Central automatically. Promote the release Update Website Fork and clone Apache Celeborn website Add a new markdown file in docs/community/release_notes/ Add a new segment in docs/community/news.md Update releases defined in docs/download.md Add the latest release version in .github/workflows/site.yaml Update the stable_version and version in mkdocs.yml Create an Announcement Once everything is working, create an announcement and send an e-mail to the mailing list. The mailing list includes: announce@apache.org , dev@celeborn.apache.org , user@spark.apache.org , user@flink.apache.org . Note You must use the apache.org email to send announce to announce@apache.org . Enjoy an adult beverage of your choice, and congratulations on making a Celeborn release. Remove the dist repo directories for deprecated release candidates Remove the deprecated dist repo directories at last. cd work/svn-dev svn delete https://dist.apache.org/repos/dist/dev/celeborn/ { RELEASE_TAG } \\ --username \" ${ ASF_USERNAME } \" \\ --password \" ${ ASF_PASSWORD } \" \\ --message \"Remove deprecated Apache Celeborn ${ RELEASE_TAG } \"","title":"Release Guide"},{"location":"community/release_guide/#celeborn-release-guide","text":"","title":"Celeborn Release Guide"},{"location":"community/release_guide/#introduction","text":"The Apache Celeborn project periodically declares and publishes releases. A release is one or more packages of the project artifact(s) that are approved for general public distribution and use. They may come with various degrees of caveat regarding their perceived quality and potential for change, such as \"alpha\", \"beta\", \"incubating\", \"stable\", etc. The Celeborn community treats releases with great importance. They are a public face of the project and most users interact with the project only through the releases. Releases are signed off by the entire Celeborn community in a public vote. Each release is executed by a Release Manager, who is selected among the Celeborn committers. This document describes the process that the Release Manager follows to perform a release. Any changes to this process should be discussed and adopted on the dev mailing list . Please remember that publishing software has legal consequences. This guide complements the foundation-wide Product Release Policy and Release Distribution Policy .","title":"Introduction"},{"location":"community/release_guide/#overview","text":"The release process consists of several steps: Decide to release Prepare for the release Cut branch off for major release Build a release candidate Vote on the release candidate If necessary, fix any issues and go back to step 3. Finalize the release Promote the release Remove the dist repo directories for deprecated release candidates","title":"Overview"},{"location":"community/release_guide/#decide-to-release","text":"Deciding to release and selecting a Release Manager is the first step of the release process. This is a consensus-based decision of the entire community. Anybody can propose a release on the dev mailing list , giving a solid argument and nominating a committer as the Release Manager (including themselves). There\u2019s no formal process, no vote requirements, and no timing requirements. Any objections should be resolved by consensus before starting the release. In general, the community prefers to have a rotating set of 1-2 Release Managers. Keeping a small core set of managers allows enough people to build expertise in this area and improve processes over time, without Release Managers needing to re-learn the processes for each release. That said, if you are a committer interested in serving the community in this way, please reach out to the community on the dev mailing list .","title":"Decide to release"},{"location":"community/release_guide/#checklist-to-proceed-to-the-next-step","text":"Community agrees to release Community selects a Release Manager","title":"Checklist to proceed to the next step"},{"location":"community/release_guide/#prepare-for-the-release","text":"Before your first release, you should perform one-time configuration steps. This will set up your security keys for signing the release and access to various release repositories.","title":"Prepare for the release"},{"location":"community/release_guide/#one-time-setup-instructions","text":"","title":"One-time setup instructions"},{"location":"community/release_guide/#asf-authentication","text":"The environments ASF_USERNAME and ASF_PASSWORD have been used in several places and several times in the release process, you can either one-time set up them in ~/.bashrc or ~/.zshrc , or export them in terminal every time. export ASF_USERNAME = <your apache username> export ASF_PASSWORD = <your apache password>","title":"ASF authentication"},{"location":"community/release_guide/#java-home","text":"An available environment variable JAVA_HOME , you can do echo $JAVA_HOME to check it. Note The Java version should be 8.","title":"Java Home"},{"location":"community/release_guide/#subversion","text":"Besides on git , svn is also required for Apache release, please refer to https://www.apache.org/dev/version-control.html#https-svn for details.","title":"Subversion"},{"location":"community/release_guide/#gpg-key","text":"You need to have a GPG key to sign the release artifacts. Please be aware of the ASF-wide release signing guidelines . If you don\u2019t have a GPG key associated with your Apache account, please create one according to the guidelines. Determine your Apache GPG Key and Key ID, as follows: gpg --list-keys --keyid-format SHORT This will list your GPG keys. One of these should reflect your Apache account, for example: pub rsa4096/37356FA0 2022 -10-27 [ SC ] [ expires: 2028 -10-27 ] FCF20BB29C7BEFDF58F998F76392F71F37356FA0 uid [ ultimate ] Ethan Feng <ethanfeng@apache.org> sub rsa4096/D2ED4CBF 2022 -10-27 [ E ] [ expires: 2028 -10-27 ] Note To follow the Apache's release specification , all new RSA keys generated should be at least 4096 bits. Do not generate new DSA keys. Here, the key ID is the 8-digit hex string in the pub line: 37356FA0 . To export the PGP public key, using: gpg --armor --export 37356FA0 If you have more than one gpg key, you can specify the default key as the following: echo 'default-key <key-fpr>' > ~/.gnupg/gpg.conf The last step is to update the KEYS file with your code signing key https://www.apache.org/dev/openpgp.html#export-public-key svn checkout --depth = files \"https://dist.apache.org/repos/dist/release/celeborn/\" work/svn-celeborn ( gpg --list-sigs \" ${ ASF_USERNAME } @apache.org\" && gpg --export --armor \" ${ ASF_USERNAME } @apache.org\" ) >> work/svn-celeborn/KEYS svn commit --username \" ${ ASF_USERNAME } \" --password \" ${ ASF_PASSWORD } \" --message \"Update KEYS\" work/svn-celeborn","title":"GPG Key"},{"location":"community/release_guide/#cut-branch-if-for-major-release","text":"celeborn use version pattern {MAJOR_VERSION}.{MINOR_VERSION}.{PATCH_VERSION}[-{OPTIONAL_SUFFIX}] , e.g. 0.5.0 . Major Release means MAJOR_VERSION or MINOR_VERSION changed, and Patch Release means PATCH_VERSION changed. The main step towards preparing a feature release is to create a release branch. This is done via standard Git branching mechanism and should be announced to the community once the branch is created. Note If you are releasing a patch version, you can ignore this step. The release branch pattern is branch-{MAJOR_VERSION}.{MINOR_VERSION} , e.g. branch-0.5 . After cutting release branch, don't forget bump version in main branch.","title":"Cut branch if for major release"},{"location":"community/release_guide/#build-a-release-candidate","text":"Don't forget to switch to the release branch! Set environment variables. # The RELEASE_VERSION will be extracted from the project's root `pom.xml` export RELEASE_RC_NO = <RC number, e.g. 0 > Bump version. Considering that other committers may merge PRs during your release period, you should accomplish the version change first, and then come back to the release candidate tag to continue the rest release process. The tag pattern is v${RELEASE_VERSION}-rc${RELEASE_RC_NO} , e.g. v0.5.0-rc0 Note After all the voting passed, be sure to create a final tag with the pattern: v${RELEASE_VERSION} # Bump to the release version # change the <project.version> in pom to ${RELEASE_VERSION} git commit -am \"[RELEASE] Bump ${ RELEASE_VERSION } \" # Create tag git tag v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } # Push branch to apache remote repo git push apache # Push tag to apache remote repo git push apache v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } # Go back to release candidate tag git checkout v ${ RELEASE_VERSION } -rc ${ RELEASE_RC_NO } Package source and binary artifacts, and upload them to the Apache staging SVN repo. Publish jars to the Apache staging Maven repo. build/release/release.sh publish To make your release available in the staging repository, you must close the staging repo in the Apache Nexus . Until you close, you can re-run deploying to staging multiple times. But once closed, it will create a new staging repo. So ensure you close this, so that the next RC (if need be) is on a new repo. Once everything is good, close the staging repository on Apache Nexus. Generate a pre-release note from GitHub for the subsequent voting. Goto the release page and click the \"Draft a new release\" button, then it would jump to a new page to prepare the release. Filling in all the necessary information required by the form. And in the bottom of the form, choose the \"This is a pre-release\" checkbox. Finally, click the \"Publish release\" button to finish the step. Note The pre-release note is used for voting purposes. It would be marked with a Pre-release tag. After all the voting works(dev and general) are finished, do not forget to inverse the \"This is a pre-release\" checkbox. The pre-release version comes from vx.y.z-rcN tags, and the final version should come from vx.y.z tags.","title":"Build a release candidate"},{"location":"community/release_guide/#vote-on-the-release-candidate","text":"The release voting takes place on the Apache Celeborn developers list. If possible, attach a draft of the release notes with the email. Recommend represent voting closing time in UTC format. Make sure the email is in text format and the links are correct. Once the vote is done, you should also send out a summary email with the totals, with a subject that looks something like [VOTE][RESULT] Release Apache Celeborn ...","title":"Vote on the release candidate"},{"location":"community/release_guide/#finalize-the-release","text":"Danger THIS STEP IS IRREVERSIBLE so make sure you selected the correct staging repository. Once you move the artifacts into the release folder, they cannot be removed. After the vote passes, to upload the binaries to Apache mirrors, you move the binaries from dev directory (this should be where they are voted) to release directory. This \"moving\" is the only way you can add stuff to the actual release directory. (Note: only PMC members can move to release directory) Move the subdirectory in \"dev\" to the corresponding directory in \"release\". If you've added your signing key to the KEYS file, also update the release copy. build/release/release.sh finalize Verify that the resources are present in https://www.apache.org/dist/celeborn/. It may take a while for them to be visible. This will be mirrored throughout the Apache network. For Maven Central Repository, you can Release from the Apache Nexus Repository Manager . Log in, open \"Staging Repositories\", find the one voted on, select and click \"Release\" and confirm. If successful, it should show up under https://repository.apache.org/content/repositories/releases/org/apache/celeborn/ and the same under https://repository.apache.org/content/groups/maven-staging-group/org/apache/celeborn/ (look for the correct release version). After some time this will be synced to Maven Central automatically.","title":"Finalize the Release"},{"location":"community/release_guide/#promote-the-release","text":"","title":"Promote the release"},{"location":"community/release_guide/#update-website","text":"Fork and clone Apache Celeborn website Add a new markdown file in docs/community/release_notes/ Add a new segment in docs/community/news.md Update releases defined in docs/download.md Add the latest release version in .github/workflows/site.yaml Update the stable_version and version in mkdocs.yml","title":"Update Website"},{"location":"community/release_guide/#create-an-announcement","text":"Once everything is working, create an announcement and send an e-mail to the mailing list. The mailing list includes: announce@apache.org , dev@celeborn.apache.org , user@spark.apache.org , user@flink.apache.org . Note You must use the apache.org email to send announce to announce@apache.org . Enjoy an adult beverage of your choice, and congratulations on making a Celeborn release.","title":"Create an Announcement"},{"location":"community/release_guide/#remove-the-dist-repo-directories-for-deprecated-release-candidates","text":"Remove the deprecated dist repo directories at last. cd work/svn-dev svn delete https://dist.apache.org/repos/dist/dev/celeborn/ { RELEASE_TAG } \\ --username \" ${ ASF_USERNAME } \" \\ --password \" ${ ASF_PASSWORD } \" \\ --message \"Remove deprecated Apache Celeborn ${ RELEASE_TAG } \"","title":"Remove the dist repo directories for deprecated release candidates"},{"location":"community/contributor_guide/docs_and_website/","text":"Building Docs and Website Setup Python Follow the Python official document to install Python 3.7 or above. (optional) use pyenv to manage Python virtualenv on macOS Optionally, pyenv is recommended to manage Python environments on macOS. Install from Homebrew brew install pyenv pyenv-virtualenv Setup in ~/.zshrc eval \" $( pyenv init - ) \" eval \" $( pyenv virtualenv-init - ) \" Install virtualenv pyenv install 3 .9.13 pyenv virtualenv 3 .9.13 celeborn Localize virtualenv pyenv local celeborn Install dependencies pip install -r requirements.txt Preview website mkdocs serve Open http://127.0.0.1:8000/ in browser.","title":"Docs and Website"},{"location":"community/contributor_guide/docs_and_website/#building-docs-and-website","text":"","title":"Building Docs and Website"},{"location":"community/contributor_guide/docs_and_website/#setup-python","text":"Follow the Python official document to install Python 3.7 or above. (optional) use pyenv to manage Python virtualenv on macOS Optionally, pyenv is recommended to manage Python environments on macOS. Install from Homebrew brew install pyenv pyenv-virtualenv Setup in ~/.zshrc eval \" $( pyenv init - ) \" eval \" $( pyenv virtualenv-init - ) \" Install virtualenv pyenv install 3 .9.13 pyenv virtualenv 3 .9.13 celeborn Localize virtualenv pyenv local celeborn","title":"Setup Python"},{"location":"community/contributor_guide/docs_and_website/#install-dependencies","text":"pip install -r requirements.txt","title":"Install dependencies"},{"location":"community/contributor_guide/docs_and_website/#preview-website","text":"mkdocs serve Open http://127.0.0.1:8000/ in browser.","title":"Preview website"},{"location":"community/release_notes/release_note_0.2.0/","text":"Apache Celeborn\u2122 (Incubating) 0.2.0 Release Notes Highlight Support load-aware slots allocation strategy. Support columnar shuffle. Enhanced flow control. Enhanced HA stability. Enhanced disk management. Support graceful and fast upgrade. Support quota management. Support zstd compression. Support spark 2.4 to 3.3. Major improvements of Celeborn on Kubernetes, including documents and Helm Chart. Code cleanup and refactor. Shade netty completely. Enhanced build system. Refactor configurations. Support JDK11. Remove log4j1. Performance Batch and parallelize RPC. Add bitmap to filter unnecessary partition read. Cache RPC to reduce Spark driver memory pressure. Others Bugfixes and improvements. Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.2.0-incubating version, and the order is based on the commit time: Contributors zwangsheng AngersZhuuuu FMX waitinfuture dxheming haiming pan3793 lichaojacobs liugs0213 nafiyAix fanyilun 942011334 kerwin-zk xunxunmimi5577 mcdull-zhang wForget RexXiong leesf zouxxyy Gabriel39 zhongqiangczq szyWilliam boneanxs jxysoft cfmcgrady zy-jordan kaijchen Rex(Hui) An jiaoqingbo","title":"Apache Celeborn\u2122 (Incubating) 0.2.0 Release Notes"},{"location":"community/release_notes/release_note_0.2.0/#apache-celeborntm-incubating-020-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.2.0 Release Notes"},{"location":"community/release_notes/release_note_0.2.0/#highlight","text":"Support load-aware slots allocation strategy. Support columnar shuffle. Enhanced flow control. Enhanced HA stability. Enhanced disk management. Support graceful and fast upgrade. Support quota management. Support zstd compression. Support spark 2.4 to 3.3. Major improvements of Celeborn on Kubernetes, including documents and Helm Chart. Code cleanup and refactor. Shade netty completely. Enhanced build system. Refactor configurations. Support JDK11. Remove log4j1.","title":"Highlight"},{"location":"community/release_notes/release_note_0.2.0/#performance","text":"Batch and parallelize RPC. Add bitmap to filter unnecessary partition read. Cache RPC to reduce Spark driver memory pressure.","title":"Performance"},{"location":"community/release_notes/release_note_0.2.0/#others","text":"Bugfixes and improvements.","title":"Others"},{"location":"community/release_notes/release_note_0.2.0/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.2.0-incubating version, and the order is based on the commit time: Contributors zwangsheng AngersZhuuuu FMX waitinfuture dxheming haiming pan3793 lichaojacobs liugs0213 nafiyAix fanyilun 942011334 kerwin-zk xunxunmimi5577 mcdull-zhang wForget RexXiong leesf zouxxyy Gabriel39 zhongqiangczq szyWilliam boneanxs jxysoft cfmcgrady zy-jordan kaijchen Rex(Hui) An jiaoqingbo","title":"Credits"},{"location":"community/release_notes/release_note_0.2.1/","text":"Apache Celeborn\u2122 (Incubating) 0.2.1 Release Notes Highlight Fix correctness issue in rare cases Refactor PartitionLocationInfo to use ConcurrentHashMap instead of lock Support FetchTime in LoadAware assignment policy Fix start-all.sh script Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.2.1-incubating version, and the order is based on the commit time: Contributors FMX waitinfuture liugs0213 pan3793 RexXiong","title":"Apache Celeborn\u2122 (Incubating) 0.2.1 Release Notes"},{"location":"community/release_notes/release_note_0.2.1/#apache-celeborntm-incubating-021-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.2.1 Release Notes"},{"location":"community/release_notes/release_note_0.2.1/#highlight","text":"Fix correctness issue in rare cases Refactor PartitionLocationInfo to use ConcurrentHashMap instead of lock Support FetchTime in LoadAware assignment policy Fix start-all.sh script","title":"Highlight"},{"location":"community/release_notes/release_note_0.2.1/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.2.1-incubating version, and the order is based on the commit time: Contributors FMX waitinfuture liugs0213 pan3793 RexXiong","title":"Credits"},{"location":"community/release_notes/release_note_0.3.0/","text":"Apache Celeborn\u2122 (Incubating) 0.3.0 Release Notes Highlight Initial support for Flink 1.14 1.15 1.17 Initial support for Spark 3.4 Initial support for MapPartition on shuffle write and read and support for credit-based shuffle read to improve performance Compatibility support for version 0.2.x and 0.3.0 Add support for batch revive RPCs in clients to avoid too many requests Enhanced worker exclusion mechanism Optimization of memory usage by pooling flusher's CompositeByteBuf and PushTask queues Enhanced rolling upgrading and graceful shutdown More bug fixes and usability improvements of tiered storage Performance improvements and bug fixs of native Spark columnar shuffle More bug fixes and usability improvements of K8S deployment More code reflectors and code refines More configuration default values are changed and new confs are added Spark/Flink [CELEBORN-235] FLINK: Implement Flink 1.14 plugin [CELEBORN-106] FLINK: Flink 1.14 plugin supports shufflewrite:OutputGate [CELEBORN-548] FLINK: Support Flink 1.15 [CELEBORN-548] FLINK: Support Flink 1.17 [CELEBORN-610] FLINK: Eliminate PluginConf and merge its content to CelebornConf [CELEBORN-441] FLINK: Move ShuffleTaskInfo to Flink Plugin [CELEBORN-397] FLINK: Flink plugin support UnpooledByteBufAllocator [CELEBORN-350] FLINK: Add PluginConf to be compatible with old configuration keys [CELEBORN-315] FLINK: Add ut for flink-plugin PartitionSortedBuffer [CELEBORN-324] FLINK: Flink plugin needs reuse connections [CELEBORN-290] FLINK: Optimize flink-plugin RemoteShuffleOutputGate/RemoteShuffleResultPartition [CELEBORN-310] FLINK: Include roaringbitmap in Flink plugin [CELEBORN-283] FLINK: Derive network layer for Flink plugin [CELEBORN-222] FLINK: Flink plugin RemoteShuffleOutputGate adds ut about nettybufferTransform [CELEBORN-202] FLINK: Flink plugin BuffPacker adds unpack implements for shuffle read [CELEBORN-8][CELEBORN-56] FLINK: LifeCycleManger supports register shuffle task in map partition mode and Handle map partition mapper end [CELEBORN-11] FLINK: ShuffleClient supports MapPartition shuffle write [CELEBORN-103][CELEBORN-71] FLINK: PushDataHandler supports mappartition write [CELEBORN-80] FLINK: FileWriter supports MapPartition [CELEBORN-278][CELEBORN-282][CELEBORN-124] FLINK: Support Credit-Based Shuffle Read [CELEBORN-604] SPARK: Support Spark 3.4 [CELEBORN-664] SPARK native: Improve the perf of columnar shuffle write [CELEBORN-620] SPARK native: Columnar shuffle codegen gets compileError [CELEBORN-754] SPARK: Provide a new SparkShuffleManager to replace RssShuffleManager in the future [CELEBORN-753] SPARK: Rename spark patch file name to make it more clear [CELEBORN-741] SPARK: Bump Spark to latest patched version [CELEBORN-720] SPARK: peakMemoryUsedBytes not updated in SortShuffleWriter [CELEBORN-693] SPARK: Align the incWriterTime in the hash-based shuffle writer with the sort-based shuffle [CELEBORN-683] SPARK: Avoid calling CelebornConf.get multi-time when columnar shuffle write is enabled [CELEBORN-673] SPARK: Improve the perf of sort-based shuffle write [CELEBORN-654] SPARK: SortBasedShuffleWriter does not require mapStatusRecords in Spark 3 [CELEBORN-655] SPARK: Rename newAppId to appUniqueId [CELEBORN-648] SPARK: Improve pref SendBufferPool and logs about memory [CELEBORN-619] SPARK: Adapt Spark DRA patch for Spark 3.4 [CELEBORN-625] SPARK: Add a config to enable/disable unsafeRow fast write [CELEBORN-560] SPARK: Rerun task in spark later then RSS stageEnd cause NPE then cause job failed [CELEBORN-472] SPARK: Support using Celeborn in the scenario of switching multiple SparkSessions in the same process [CELEBORN-620] SPARK: Fix columnar shuffle codegen exception [CELEBORN-664][CELEBORN-683] SPARK: Improve the perf of columnar shuffle write Compatibility [CELEBORN-776] Restore package name of MasterNotLeaderException [CELEBORN-702] Extend doc about migration from 0.2.1 to 0.3.0 [CELEBORN-724] Fix the compatibility of HeartbeatFromApplicationResponse with lower versions [CELEBORN-700] Fix compatibility issue from WorkerInfo [CELEBORN-701] Fix compatibility issue caused by pushdata timeout [CELEBORN-579] revert Destroy Message rename for compatibility [CELEBORN-745] Match TransportMessage type use number instead of enum [CELEBORN-442] Support HDFS compatible file system Stability and Bug Fix [CELEBORN-805] Immediate shutdown of server upon completion of unit test to prevent potential resource leakage [CELEBORN-798] Add heartbeat from client to LifecycleManager to cleanup client [CELEBORN-803] Increase default timeout for commit files [CELEBORN-801] Warn when local shuffle reader is enabled [CELEBORN-802] Pool PushTask queues for reuse among DataPushers [CELEBORN-799] Limit total inflight push requests [CELEBORN-791] Remove slots allocation simulation from master and use active slots sent from worker's heartbeat [CELEBORN-792] SparkShuffleManager.getWriter use wrong appUniqueId for Spark2 [CELEBORN-789] Increase default value of flushBuffer's max components [CELEBORN-790] Use pooled direct allocator for flusher's CompositeByteBuf [CELEBORN-787] Add chunk related UTs for FileWriter [CELEBORN-783] Revise the conditions for the SortBasedPusher#insertRecord method [CELEBORN-779] Fix sorted file size summary overflow [CELEBORN-777] CongestionControl getPotentialConsumeSpeed throw /zero error [CELEBORN-775] Update executorCores calculation in SparkShuffleManager for Spark local mode [CELEBORN-721] Fix concurrent bug in ChangePartitionManager [CELEBORN-709] Increase default fetch timeout [CELEBORN-708] Fix commit metrics in application heartbeat [CELEBORN-696] Fix bugs related with shutting down and excluded workers [CELEBORN-668] Report WorkerLost instead of WorkerUnavailable if graceful is disabled [CELEBORN-662] Report worker unavailable regardless graceful shutdown [CELEBORN-585] Create if not exists worker recoverPath when graceful shutdown is enabled [CELEBORN-698] Fix LocalDeviceMonitor::readWriteError judge [CELEBORN-685] Fix permission on creating shuffle dir on HDFS [CELEBORN-695] Fix UnsupportedOperationException by refactoring WorkerInfo [CELEBORN-692] WorkerStatusTracker::recordWorkerFailure should put WORKER_SHUTDOWN workers into shuttingWorkers [CELEBORN-687] Fix shuffleResourceExists, reduce unexpected slot release request [CELEBORN-686] Include ConnectException when exclude worker for fetch [CELEBORN-676] Celeborn fetch chunk also should support check timeout [CELEBORN-678] ShuffleClientImpl::mapperEnded should not consider attemptId [CELEBORN-675] Fix decode heartbeat message [CELEBORN-669] Avoid commit files on excluded worker list [CELEBORN-674] Support revive for empty locations [CELEBORN-646] Throw exception when raft client request not success [CELEBORN-662] Report worker unavailable regardless graceful shutdown [CELEBORN-640] DataPushQueue should not keep waiting take tasks [CELEBORN-657] DataPushQueue return task should always remove iterator [CELEBORN-642] Improve metrics and update grafana [CELEBORN-647] Fix potential NPE when remove push status [CELEBORN-639] getPushDataFailCause should handle NPE [CELEBORN-636] Replace SimpleDateFormat with FastDateFormat [CELEBORN-626] Fix potential deadlock in filewriter [CELEBORN-621] Push merged data task timeout and mapended should also remove push states [CELEBORN-624] StorageManager should only remove expired app dirs [CELEBORN-611] Log4j Rolling strategy can not delete old files [CELEBORN-599] Consolidate calculation of mount point [CELEBORN-596] Worker don't need to update disk max slots [CELEBORN-591] RatisSystem need decrease no leader timeout configuration [CELEBORN-583] Merge pooled memory allocators [CELEBORN-582] Celeborn should not throw Interrupted during kill task [CELEBORN-584] Export netty pooledByteBufAllocator's metric [CELEBORN-586] Add system load related metrics [CELEBORN-552] Add HeartBeat between the client and worker to keep alive [CELEBORN-573] HA Mode need guarantee resource/app change persistent in raft [CELEBORN-556] ReserveSlot should not use default rpc timeout [CELEBORN-575] PartitionLocationInfo change cause quick upgrade impacted [CELEBORN-567] Timeout workers/app need consider long leader election period [CELEBORN-559] createReader quick fail all the retry times during worker restart [CELEBORN-565] FFETCH_MAX_RETRIES should double when enable replicates [CELEBORN-560] Rerun task in spark later then RSS stageEnd cause NPE then cause job failed [CELEBORN-554] Avoid reserve/commit empty worker resources [CELEBORN-557] HA_CLIENT_RPC_ASK_TIMEOUT should fallback to RPC_ASK_TIMEOUT [CELEBORN-532] Refine push-related failure metrics [CELEBORN-534] Respect the user's configured master host settings [CELEBORN-521] correct exception and unify unRetryableException [CELEBORN-525] Fix wrong parameter celeborn.push.buffer.size [CELEBORN-522] Add worker consume speed metric [CELEBORN-495] Leader does not step down when its metadata directory has IO exception [CELEBORN-475] Support extra tags for prometheus metrics [CELEBORN-471] Fix String.format wrong type in ShuffleClientImpl [CELEBORN-449] Repair the HDFS path regex [CELEBORN-459] Remove chunkTracker from FileManagedBuffers to avoid conflict with stream reuse [CELEBORN-455] Use 4 bytes instead of 16 to read mapId in FileWriter.write [CELEBORN-439] Fix java version check in start-work [CELEBORN-434] Add constraint about memory manager's parameters [CELEBORN-405] Add metrics about lost workers [CELEBORN-400] Add RPC metrics for OpenStream [CELEBORN-393] responseBuilder.setCmdType should be called only once in MetaHandler's handleReadRequest method [CELEBORN-385] Add rolling file in log4j configuration template [CELEBORN-373] Add sorted files into grafana dashboard [CELEBORN-336] Revive Failed should use keep the corresponding StatusCode [CELEBORN-342] Fix the wrong avg produce bytes in Congestion control [CELEBORN-330] Netty Channel thread would be locked when data recevied [CELEBORN-331] submitRetryPushData should throw PUSH_DATA_CREATE_CONNECTION_FAIL_MASTER too [CELEBORN-325] After worker restart, throw NPE when receive not found partition [CELEBORN-321] Register shuffle failed DataPusherQueue throw NPE [CELEBORN-323] readBuffers need synchronized as recycle buffer will call that in multiple threads [CELEBORN-281] Add metrics about buffer stream read buffer [CELEBORN-309] Fix some potential concurrent issues in InFlightRequestTracker [CELEBORN-305] ShuffleClientImpl's registerShuffle method should pass numPartitions instead of numMappers [CELEBORN-304] The fromCelebornConf method in Utils should set celeborn.$module.io.serverThreads instead of setting celeborn.$module.io.clientThreads twice [CELEBORN-279] Add user level push data speed metric [CELEBORN-277] PushDataHandle callback could miss soft split status [CELEBORN-275] WrappedCallback should only handle response from replica [CELEBORN-271] Mark push data to slave should use peer location's hostAndPort [CELEBORN-272] Non-replication should use callback instead of wrappedCallback [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-269] Disable replication throw NPE when removeBatch in pushDataHandler [CELEBORN-238] PUSH_DATA_TIMEOUT should add to blacklist too [CELEBORN-239] Enable PUSH_DATA_TIMEOUT when master push data to slave [CELEBORN-247] Add metrics for each user's quota usage [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-190] PushMerged Data only revive once [CELEBORN-203] fix NPE when removeExpiredShuffle in LifecycleManager [CELEBORN-191] ShuffleClient registerShuffle not success/not timeout should print register failed reason [CELEBORN-764] Fix celeborn on HDFS might clean using app directories [CELEBORN-568] Support storage type selection [CELEBORN-728] Celeborn won't clean remnant application directory on HDFS if worker is restarted [CELEBORN-685] Fix permission on creating shuffle dir on HDFS [CELEBORN-449] Repair the HDFS path regex [CELEBORN-666] Renaming blacklist to excluded [CELEBORN-718] ReviveTimes should always decrease regardless worker is excluded or not [CELEBORN-682] Master should separate blacklist and shutdown workers [CELEBORN-494] RssInputStream fetch side support blacklist to avoid client side timeout in same worker multiple times during fetch [CELEBORN-406] Add blacklist http request info of master [CELEBORN-238][CELEBORN-189] PushDataTimeout/PushDataFailedSlave should add to blacklist too [CELEBORN-487] ShuffleClient push side support blacklist to avoid client side timeout in same worker multiple times [CELEBORN-537] Improve blacklist and don't remove worker resource for Flink Performance [CELEBORN-797] Decrease metric sampling frequency to improve perf [CELEBORN-744] Add Benchmark framework and ComputeIfAbsentBenchmark [CELEBORN-656] Batch revive RPCs in client to avoid too many requests [CELEBORN-718] ReviveTimes should always decrease regardless worker is excluded or not [CELEBORN-703] avoid calling CelebornConf.get multi-time when PushDataHandler handle PushData / PushMergedData [CELEBORN-679] Optimize Utils#bytesToString [CELEBORN-494] RssInputStream fetch side support blacklist to avoid client side timeout in same worker multiple times during fetch [CELEBORN-614] Simplify StorageManager's flushFileWriters [CELEBORN-553] Improve IO [CELEBORN-541] handleGetReducerFileGroup occupy too much RPC thread cause other RPC can't been handled [CELEBORN-524] ChannelLimtter trim too frequent [CELEBORN-511] Should direct execute onTrim to avoid frequent trim action [CELEBORN-519] Optimize getMaster/SlaveLcoation [CELEBORN-517] Optimize stopTimer/startTimer cpu cost [CELEBORN-516] Remove RPCSource since it cost too much CPU [CELEBORN-512] Sort timestamp and show in date format [CELEBORN-507] Improve Master apply raft log speed in Ha mode [CELEBORN-484] Master trigger LifecycleManager commit shutdown [CELEBORN-473] Enable file system cache for viewfs in ShuffleClient as well [CELEBORN-474] Speed up ConcurrentHashMap#computeIfAbsent [CELEBORN-345] TransportResponseHandler create too much thread [CELEBORN-267] reuse stream when client channel reconnected Kubernetes [CELEBORN-714] Improved the local disk binding mechanism of Kubernetes HostPath [CELEBORN-644] Support Helm Deploy Celeborn with HostNetwork And DnsPolicy [CELEBORN-628] Separate mount & host path on hostPath case [CELEBORN-612] Tackle hostPath directory permission [CELEBORN-533] Bootstrap scripts should use exec to avoid fork subprocess [CELEBORN-518] fix bug that worker uses celeborn.master.metrics.prometheus.port in worker-statefulset [CELEBORN-460] Helm Upgrade Release fail due to change image version [CELEBORN-450] Configurable volumes in the values.yaml [CELEBORN-447] Should nslookup dns with namespace before start master & worker [CELEBORN-415] Fix syntax error in prometheus-podmonitor.yaml [CELEBORN-401] Modify prometheus-podmonitor.yaml to collect metrics correctly [CELEBORN-384] Fix master-statefulset.yaml syntax error [CELEBORN-218] Move helm chart to dedicated directory [CELEBORN-210] Add recommended labels in celeborn chart Code Refector [CELEBORN-778] Rename MemoryManagerStat to ServingState [CELEBORN-751] Rename remain rss related class name [CELEBORN-756] Refactor PushDataHandler class to utilize while loop [CELEBORN-754] Provide a new CelebornShuffleManager to replace RssShuffleManager in the future [CELEBORN-645] Refine logic about handle HeartbeatFromWorkerResponse [CELEBORN-609] Refactor master's worker info HTTP request [CELEBORN-594] Eliminate Ratis noisy logs [CELEBORN-592] Refactor PbSerdeUtils's some foreach code format [CELEBORN-590] Remove hadoop prefix of WORKER_WORKING_DIR [CELEBORN-588] Remove test conf's category [CELEBORN-578] Refine commit file's log to indicate more clear about empty partitions [CELEBORN-563] Remove unnecessary code [CELEBORN-551] Remove unnecessary ShuffleClient.get() [CELEBORN-547] Refactor request related API [CELEBORN-562] Rename Destroy RPC message [CELEBORN-555] Avoid print noisy blacklist info when record blacklist [CELEBORN-540] Add config entity of celeborn.rpc.io.threads [CELEBORN-530] Refactor stream manager and memory manager to worker module [CELEBORN-528] limitZeroInFlight should show inflight target [CELEBORN-523] Refine PartitionLocationInfo [CELEBORN-502] Merge GetBlacklistResponse to HeartbeatFromApplication [CELEBORN-491] Improve exception logging in RssInputStream [CELEBORN-479] Refactor DataPushQueue.takePushTask to avoid busy wait [CELEBORN-438] Move ServletPath to MetricsSytsem [CELEBORN-360] Export necessary env in load-celeborn-env.sh [CELEBORN-344] Change PUSH_DATA_FAIL_MASTER/SALVE to PUSH_DATA_WRITE_FAIL_MASTER/SALVE [CELEBORN-295] Optimize data push [CELEBORN-338] Clean duplicated exception message of ShuffleClientImpl [CELEBORN-328] Too much noisy log when reserve slot failed [CELEBORN-316] Wrap Celeborn exception with CelebornIOException [CELEBORN-273] Move push data timeout checker into TransportResponseHandler to keep callback status consistence [CELEBORN-257] Avoid one hash searching when process message in TransportResponseHandler [CELEBORN-244] Separate outstandingRpcs to rpc & pushes [CELEBORN-201] separate partitionLocationInfo in LifecycleManager and worker [CELEBORN-252] Delete slides [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-241] limit push timeout > push data timeout [CELEBORN-237] Push slave failed should show clear target slave worker in executor's error [CELEBORN-196] Rename batchHandleRequestPartitions to handleRequestPartitions [CELEBORN-146] refactor ShuffleMapperAttempts & GetReducerFileGroup [CELEBORN-18] Refactor stream manager to distinguish map partition and reduce partition Building and Developer tools [CELEBORN-763] Add --add-opens to bootstrap shell scripts [CELEBORN-762] Always set JVM opts -XX:+IgnoreUnrecognizedVMOptions [CELEBORN-738] Enable Java 17 for CI [CELEBORN-497] Enable Java 11 for CI [CELEBORN-705] Upgrade Maven from 3.6.3 to 3.8.8 [CELEBORN-649] Speed up make-distribution.sh [CELEBORN-633] Introduce PR merge script [CELEBORN-716] Correct the to name when renaming the Netty native library [CELEBORN-667] Define protobuf-maven-plugin in the root pom.xml [CELEBORN-630] Binary release artifact should package all versions of Spark and Flink clients [CELEBORN-608] Exclude macOS fflags in make-distribution.sh [CELEBORN-605] Remove redundant exclusions from hadoop-client-api [CELEBORN-589] Using Apache CDN to download maven [CELEBORN-280] Enable Jacoco multi-module mode to collect coverage report [CELEBORN-482] Fix CVE dependency issue [CELEBORN-402] Enable autolink to Jira Dependency upgrades [CELEBORN-743] Bump commons-io to 2.13.0 [CELEBORN-736] Bump commons-lang3 to 3.12.0 [CELEBORN-684] Bump Netty to 4.1.93.Final [CELEBORN-558] Bump Ratis to 2.5.1 Others Improvement in Docs and Configuration [CELEBORN-786] Change default flush threads [CELEBORN-782] Make max components configurable for FileWriter#flushBuffer [CELEBORN-785] Add worker side partition hard split threshold [CELEBORN-769] Change default value of celeborn.client.push.maxReqsInFlight to 16 [CELEBORN-774] Pullout celeborn.rpc.dispatcher.threads to CelebornConf [CELEBORN-768] Change default config values for batch rpc and memory allocator [CELEBORN-765] Disable partitionSplit in Flink engine related configurations [CELEBORN-767] update the docs of celeborn.client.spark.push.sort.memory.threshold [CELEBORN-680] Refresh celeborn configurations in doc [CELEBORN-681] Add celeborn.metrics.conf to conf entity [CELEBORN-629] Add doc about enable rac-awareness [CELEBORN-632] Add spark namespace to spark specify properties [CELEBORN-623] Document how to change RPC type in celeborn-ratis [CELEBORN-625] Add a config to enable/disable UnsafeRow fast write. [CELEBORN-595] Rename and refactor the configuration doc. [CELEBORN-598] Fix Typos in READ [CELEBORN-570] Update docs about monitor and deployment. [CELEBORN-566] Refine docs to eliminate misleading configs. [CELEBORN-549] Update readme about deploy Flink client. [CELEBORN-527] Fix incorrect monitor the arrangement of documents [CELEBORN-499] Move version specific resource to main repo [CELEBORN-485] Make celeborn.push.replicate.enabled default to false [CELEBORN-399] Make fileSorterExecutors thread num can be customized [CELEBORN-223] The default rpc thread num of pushServer/replicateServer/fetchServer should be the number of total of Flusher's thread [CELEBORN-213] Add configuration whether to close idle connections in client side Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.0-incubating version, and the order is based on the commit time: Contributors cfmcgrady waitinfuture pan3793 FMX shujiewu jiaoqingbo JQ-Cao RexXiong AngersZhuuuu onebox-li Demon-Liang kerwin-zk zhongqiangczq cxzl25 zwangsheng cchung100m liyihe skytin1004 ulysses-you kaijchen Radeity boneanxs akpatnam25 turboFei xunxunmimi5577 CVEDetect every-breaking-wave lianneli tcodehuber hddong liugs0213 boneanxs nafiyAix zy-jordan","title":"Apache Celeborn\u2122 (Incubating) 0.3.0 Release Notes"},{"location":"community/release_notes/release_note_0.3.0/#apache-celeborntm-incubating-030-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.3.0 Release Notes"},{"location":"community/release_notes/release_note_0.3.0/#highlight","text":"Initial support for Flink 1.14 1.15 1.17 Initial support for Spark 3.4 Initial support for MapPartition on shuffle write and read and support for credit-based shuffle read to improve performance Compatibility support for version 0.2.x and 0.3.0 Add support for batch revive RPCs in clients to avoid too many requests Enhanced worker exclusion mechanism Optimization of memory usage by pooling flusher's CompositeByteBuf and PushTask queues Enhanced rolling upgrading and graceful shutdown More bug fixes and usability improvements of tiered storage Performance improvements and bug fixs of native Spark columnar shuffle More bug fixes and usability improvements of K8S deployment More code reflectors and code refines More configuration default values are changed and new confs are added","title":"Highlight"},{"location":"community/release_notes/release_note_0.3.0/#sparkflink","text":"[CELEBORN-235] FLINK: Implement Flink 1.14 plugin [CELEBORN-106] FLINK: Flink 1.14 plugin supports shufflewrite:OutputGate [CELEBORN-548] FLINK: Support Flink 1.15 [CELEBORN-548] FLINK: Support Flink 1.17 [CELEBORN-610] FLINK: Eliminate PluginConf and merge its content to CelebornConf [CELEBORN-441] FLINK: Move ShuffleTaskInfo to Flink Plugin [CELEBORN-397] FLINK: Flink plugin support UnpooledByteBufAllocator [CELEBORN-350] FLINK: Add PluginConf to be compatible with old configuration keys [CELEBORN-315] FLINK: Add ut for flink-plugin PartitionSortedBuffer [CELEBORN-324] FLINK: Flink plugin needs reuse connections [CELEBORN-290] FLINK: Optimize flink-plugin RemoteShuffleOutputGate/RemoteShuffleResultPartition [CELEBORN-310] FLINK: Include roaringbitmap in Flink plugin [CELEBORN-283] FLINK: Derive network layer for Flink plugin [CELEBORN-222] FLINK: Flink plugin RemoteShuffleOutputGate adds ut about nettybufferTransform [CELEBORN-202] FLINK: Flink plugin BuffPacker adds unpack implements for shuffle read [CELEBORN-8][CELEBORN-56] FLINK: LifeCycleManger supports register shuffle task in map partition mode and Handle map partition mapper end [CELEBORN-11] FLINK: ShuffleClient supports MapPartition shuffle write [CELEBORN-103][CELEBORN-71] FLINK: PushDataHandler supports mappartition write [CELEBORN-80] FLINK: FileWriter supports MapPartition [CELEBORN-278][CELEBORN-282][CELEBORN-124] FLINK: Support Credit-Based Shuffle Read [CELEBORN-604] SPARK: Support Spark 3.4 [CELEBORN-664] SPARK native: Improve the perf of columnar shuffle write [CELEBORN-620] SPARK native: Columnar shuffle codegen gets compileError [CELEBORN-754] SPARK: Provide a new SparkShuffleManager to replace RssShuffleManager in the future [CELEBORN-753] SPARK: Rename spark patch file name to make it more clear [CELEBORN-741] SPARK: Bump Spark to latest patched version [CELEBORN-720] SPARK: peakMemoryUsedBytes not updated in SortShuffleWriter [CELEBORN-693] SPARK: Align the incWriterTime in the hash-based shuffle writer with the sort-based shuffle [CELEBORN-683] SPARK: Avoid calling CelebornConf.get multi-time when columnar shuffle write is enabled [CELEBORN-673] SPARK: Improve the perf of sort-based shuffle write [CELEBORN-654] SPARK: SortBasedShuffleWriter does not require mapStatusRecords in Spark 3 [CELEBORN-655] SPARK: Rename newAppId to appUniqueId [CELEBORN-648] SPARK: Improve pref SendBufferPool and logs about memory [CELEBORN-619] SPARK: Adapt Spark DRA patch for Spark 3.4 [CELEBORN-625] SPARK: Add a config to enable/disable unsafeRow fast write [CELEBORN-560] SPARK: Rerun task in spark later then RSS stageEnd cause NPE then cause job failed [CELEBORN-472] SPARK: Support using Celeborn in the scenario of switching multiple SparkSessions in the same process [CELEBORN-620] SPARK: Fix columnar shuffle codegen exception [CELEBORN-664][CELEBORN-683] SPARK: Improve the perf of columnar shuffle write","title":"Spark/Flink"},{"location":"community/release_notes/release_note_0.3.0/#compatibility","text":"[CELEBORN-776] Restore package name of MasterNotLeaderException [CELEBORN-702] Extend doc about migration from 0.2.1 to 0.3.0 [CELEBORN-724] Fix the compatibility of HeartbeatFromApplicationResponse with lower versions [CELEBORN-700] Fix compatibility issue from WorkerInfo [CELEBORN-701] Fix compatibility issue caused by pushdata timeout [CELEBORN-579] revert Destroy Message rename for compatibility [CELEBORN-745] Match TransportMessage type use number instead of enum [CELEBORN-442] Support HDFS compatible file system","title":"Compatibility"},{"location":"community/release_notes/release_note_0.3.0/#stability-and-bug-fix","text":"[CELEBORN-805] Immediate shutdown of server upon completion of unit test to prevent potential resource leakage [CELEBORN-798] Add heartbeat from client to LifecycleManager to cleanup client [CELEBORN-803] Increase default timeout for commit files [CELEBORN-801] Warn when local shuffle reader is enabled [CELEBORN-802] Pool PushTask queues for reuse among DataPushers [CELEBORN-799] Limit total inflight push requests [CELEBORN-791] Remove slots allocation simulation from master and use active slots sent from worker's heartbeat [CELEBORN-792] SparkShuffleManager.getWriter use wrong appUniqueId for Spark2 [CELEBORN-789] Increase default value of flushBuffer's max components [CELEBORN-790] Use pooled direct allocator for flusher's CompositeByteBuf [CELEBORN-787] Add chunk related UTs for FileWriter [CELEBORN-783] Revise the conditions for the SortBasedPusher#insertRecord method [CELEBORN-779] Fix sorted file size summary overflow [CELEBORN-777] CongestionControl getPotentialConsumeSpeed throw /zero error [CELEBORN-775] Update executorCores calculation in SparkShuffleManager for Spark local mode [CELEBORN-721] Fix concurrent bug in ChangePartitionManager [CELEBORN-709] Increase default fetch timeout [CELEBORN-708] Fix commit metrics in application heartbeat [CELEBORN-696] Fix bugs related with shutting down and excluded workers [CELEBORN-668] Report WorkerLost instead of WorkerUnavailable if graceful is disabled [CELEBORN-662] Report worker unavailable regardless graceful shutdown [CELEBORN-585] Create if not exists worker recoverPath when graceful shutdown is enabled [CELEBORN-698] Fix LocalDeviceMonitor::readWriteError judge [CELEBORN-685] Fix permission on creating shuffle dir on HDFS [CELEBORN-695] Fix UnsupportedOperationException by refactoring WorkerInfo [CELEBORN-692] WorkerStatusTracker::recordWorkerFailure should put WORKER_SHUTDOWN workers into shuttingWorkers [CELEBORN-687] Fix shuffleResourceExists, reduce unexpected slot release request [CELEBORN-686] Include ConnectException when exclude worker for fetch [CELEBORN-676] Celeborn fetch chunk also should support check timeout [CELEBORN-678] ShuffleClientImpl::mapperEnded should not consider attemptId [CELEBORN-675] Fix decode heartbeat message [CELEBORN-669] Avoid commit files on excluded worker list [CELEBORN-674] Support revive for empty locations [CELEBORN-646] Throw exception when raft client request not success [CELEBORN-662] Report worker unavailable regardless graceful shutdown [CELEBORN-640] DataPushQueue should not keep waiting take tasks [CELEBORN-657] DataPushQueue return task should always remove iterator [CELEBORN-642] Improve metrics and update grafana [CELEBORN-647] Fix potential NPE when remove push status [CELEBORN-639] getPushDataFailCause should handle NPE [CELEBORN-636] Replace SimpleDateFormat with FastDateFormat [CELEBORN-626] Fix potential deadlock in filewriter [CELEBORN-621] Push merged data task timeout and mapended should also remove push states [CELEBORN-624] StorageManager should only remove expired app dirs [CELEBORN-611] Log4j Rolling strategy can not delete old files [CELEBORN-599] Consolidate calculation of mount point [CELEBORN-596] Worker don't need to update disk max slots [CELEBORN-591] RatisSystem need decrease no leader timeout configuration [CELEBORN-583] Merge pooled memory allocators [CELEBORN-582] Celeborn should not throw Interrupted during kill task [CELEBORN-584] Export netty pooledByteBufAllocator's metric [CELEBORN-586] Add system load related metrics [CELEBORN-552] Add HeartBeat between the client and worker to keep alive [CELEBORN-573] HA Mode need guarantee resource/app change persistent in raft [CELEBORN-556] ReserveSlot should not use default rpc timeout [CELEBORN-575] PartitionLocationInfo change cause quick upgrade impacted [CELEBORN-567] Timeout workers/app need consider long leader election period [CELEBORN-559] createReader quick fail all the retry times during worker restart [CELEBORN-565] FFETCH_MAX_RETRIES should double when enable replicates [CELEBORN-560] Rerun task in spark later then RSS stageEnd cause NPE then cause job failed [CELEBORN-554] Avoid reserve/commit empty worker resources [CELEBORN-557] HA_CLIENT_RPC_ASK_TIMEOUT should fallback to RPC_ASK_TIMEOUT [CELEBORN-532] Refine push-related failure metrics [CELEBORN-534] Respect the user's configured master host settings [CELEBORN-521] correct exception and unify unRetryableException [CELEBORN-525] Fix wrong parameter celeborn.push.buffer.size [CELEBORN-522] Add worker consume speed metric [CELEBORN-495] Leader does not step down when its metadata directory has IO exception [CELEBORN-475] Support extra tags for prometheus metrics [CELEBORN-471] Fix String.format wrong type in ShuffleClientImpl [CELEBORN-449] Repair the HDFS path regex [CELEBORN-459] Remove chunkTracker from FileManagedBuffers to avoid conflict with stream reuse [CELEBORN-455] Use 4 bytes instead of 16 to read mapId in FileWriter.write [CELEBORN-439] Fix java version check in start-work [CELEBORN-434] Add constraint about memory manager's parameters [CELEBORN-405] Add metrics about lost workers [CELEBORN-400] Add RPC metrics for OpenStream [CELEBORN-393] responseBuilder.setCmdType should be called only once in MetaHandler's handleReadRequest method [CELEBORN-385] Add rolling file in log4j configuration template [CELEBORN-373] Add sorted files into grafana dashboard [CELEBORN-336] Revive Failed should use keep the corresponding StatusCode [CELEBORN-342] Fix the wrong avg produce bytes in Congestion control [CELEBORN-330] Netty Channel thread would be locked when data recevied [CELEBORN-331] submitRetryPushData should throw PUSH_DATA_CREATE_CONNECTION_FAIL_MASTER too [CELEBORN-325] After worker restart, throw NPE when receive not found partition [CELEBORN-321] Register shuffle failed DataPusherQueue throw NPE [CELEBORN-323] readBuffers need synchronized as recycle buffer will call that in multiple threads [CELEBORN-281] Add metrics about buffer stream read buffer [CELEBORN-309] Fix some potential concurrent issues in InFlightRequestTracker [CELEBORN-305] ShuffleClientImpl's registerShuffle method should pass numPartitions instead of numMappers [CELEBORN-304] The fromCelebornConf method in Utils should set celeborn.$module.io.serverThreads instead of setting celeborn.$module.io.clientThreads twice [CELEBORN-279] Add user level push data speed metric [CELEBORN-277] PushDataHandle callback could miss soft split status [CELEBORN-275] WrappedCallback should only handle response from replica [CELEBORN-271] Mark push data to slave should use peer location's hostAndPort [CELEBORN-272] Non-replication should use callback instead of wrappedCallback [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-269] Disable replication throw NPE when removeBatch in pushDataHandler [CELEBORN-238] PUSH_DATA_TIMEOUT should add to blacklist too [CELEBORN-239] Enable PUSH_DATA_TIMEOUT when master push data to slave [CELEBORN-247] Add metrics for each user's quota usage [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-190] PushMerged Data only revive once [CELEBORN-203] fix NPE when removeExpiredShuffle in LifecycleManager [CELEBORN-191] ShuffleClient registerShuffle not success/not timeout should print register failed reason [CELEBORN-764] Fix celeborn on HDFS might clean using app directories [CELEBORN-568] Support storage type selection [CELEBORN-728] Celeborn won't clean remnant application directory on HDFS if worker is restarted [CELEBORN-685] Fix permission on creating shuffle dir on HDFS [CELEBORN-449] Repair the HDFS path regex [CELEBORN-666] Renaming blacklist to excluded [CELEBORN-718] ReviveTimes should always decrease regardless worker is excluded or not [CELEBORN-682] Master should separate blacklist and shutdown workers [CELEBORN-494] RssInputStream fetch side support blacklist to avoid client side timeout in same worker multiple times during fetch [CELEBORN-406] Add blacklist http request info of master [CELEBORN-238][CELEBORN-189] PushDataTimeout/PushDataFailedSlave should add to blacklist too [CELEBORN-487] ShuffleClient push side support blacklist to avoid client side timeout in same worker multiple times [CELEBORN-537] Improve blacklist and don't remove worker resource for Flink","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.3.0/#performance","text":"[CELEBORN-797] Decrease metric sampling frequency to improve perf [CELEBORN-744] Add Benchmark framework and ComputeIfAbsentBenchmark [CELEBORN-656] Batch revive RPCs in client to avoid too many requests [CELEBORN-718] ReviveTimes should always decrease regardless worker is excluded or not [CELEBORN-703] avoid calling CelebornConf.get multi-time when PushDataHandler handle PushData / PushMergedData [CELEBORN-679] Optimize Utils#bytesToString [CELEBORN-494] RssInputStream fetch side support blacklist to avoid client side timeout in same worker multiple times during fetch [CELEBORN-614] Simplify StorageManager's flushFileWriters [CELEBORN-553] Improve IO [CELEBORN-541] handleGetReducerFileGroup occupy too much RPC thread cause other RPC can't been handled [CELEBORN-524] ChannelLimtter trim too frequent [CELEBORN-511] Should direct execute onTrim to avoid frequent trim action [CELEBORN-519] Optimize getMaster/SlaveLcoation [CELEBORN-517] Optimize stopTimer/startTimer cpu cost [CELEBORN-516] Remove RPCSource since it cost too much CPU [CELEBORN-512] Sort timestamp and show in date format [CELEBORN-507] Improve Master apply raft log speed in Ha mode [CELEBORN-484] Master trigger LifecycleManager commit shutdown [CELEBORN-473] Enable file system cache for viewfs in ShuffleClient as well [CELEBORN-474] Speed up ConcurrentHashMap#computeIfAbsent [CELEBORN-345] TransportResponseHandler create too much thread [CELEBORN-267] reuse stream when client channel reconnected","title":"Performance"},{"location":"community/release_notes/release_note_0.3.0/#kubernetes","text":"[CELEBORN-714] Improved the local disk binding mechanism of Kubernetes HostPath [CELEBORN-644] Support Helm Deploy Celeborn with HostNetwork And DnsPolicy [CELEBORN-628] Separate mount & host path on hostPath case [CELEBORN-612] Tackle hostPath directory permission [CELEBORN-533] Bootstrap scripts should use exec to avoid fork subprocess [CELEBORN-518] fix bug that worker uses celeborn.master.metrics.prometheus.port in worker-statefulset [CELEBORN-460] Helm Upgrade Release fail due to change image version [CELEBORN-450] Configurable volumes in the values.yaml [CELEBORN-447] Should nslookup dns with namespace before start master & worker [CELEBORN-415] Fix syntax error in prometheus-podmonitor.yaml [CELEBORN-401] Modify prometheus-podmonitor.yaml to collect metrics correctly [CELEBORN-384] Fix master-statefulset.yaml syntax error [CELEBORN-218] Move helm chart to dedicated directory [CELEBORN-210] Add recommended labels in celeborn chart","title":"Kubernetes"},{"location":"community/release_notes/release_note_0.3.0/#code-refector","text":"[CELEBORN-778] Rename MemoryManagerStat to ServingState [CELEBORN-751] Rename remain rss related class name [CELEBORN-756] Refactor PushDataHandler class to utilize while loop [CELEBORN-754] Provide a new CelebornShuffleManager to replace RssShuffleManager in the future [CELEBORN-645] Refine logic about handle HeartbeatFromWorkerResponse [CELEBORN-609] Refactor master's worker info HTTP request [CELEBORN-594] Eliminate Ratis noisy logs [CELEBORN-592] Refactor PbSerdeUtils's some foreach code format [CELEBORN-590] Remove hadoop prefix of WORKER_WORKING_DIR [CELEBORN-588] Remove test conf's category [CELEBORN-578] Refine commit file's log to indicate more clear about empty partitions [CELEBORN-563] Remove unnecessary code [CELEBORN-551] Remove unnecessary ShuffleClient.get() [CELEBORN-547] Refactor request related API [CELEBORN-562] Rename Destroy RPC message [CELEBORN-555] Avoid print noisy blacklist info when record blacklist [CELEBORN-540] Add config entity of celeborn.rpc.io.threads [CELEBORN-530] Refactor stream manager and memory manager to worker module [CELEBORN-528] limitZeroInFlight should show inflight target [CELEBORN-523] Refine PartitionLocationInfo [CELEBORN-502] Merge GetBlacklistResponse to HeartbeatFromApplication [CELEBORN-491] Improve exception logging in RssInputStream [CELEBORN-479] Refactor DataPushQueue.takePushTask to avoid busy wait [CELEBORN-438] Move ServletPath to MetricsSytsem [CELEBORN-360] Export necessary env in load-celeborn-env.sh [CELEBORN-344] Change PUSH_DATA_FAIL_MASTER/SALVE to PUSH_DATA_WRITE_FAIL_MASTER/SALVE [CELEBORN-295] Optimize data push [CELEBORN-338] Clean duplicated exception message of ShuffleClientImpl [CELEBORN-328] Too much noisy log when reserve slot failed [CELEBORN-316] Wrap Celeborn exception with CelebornIOException [CELEBORN-273] Move push data timeout checker into TransportResponseHandler to keep callback status consistence [CELEBORN-257] Avoid one hash searching when process message in TransportResponseHandler [CELEBORN-244] Separate outstandingRpcs to rpc & pushes [CELEBORN-201] separate partitionLocationInfo in LifecycleManager and worker [CELEBORN-252] Delete slides [CELEBORN-243] Create push client failed should have a ERROR type [CELEBORN-241] limit push timeout > push data timeout [CELEBORN-237] Push slave failed should show clear target slave worker in executor's error [CELEBORN-196] Rename batchHandleRequestPartitions to handleRequestPartitions [CELEBORN-146] refactor ShuffleMapperAttempts & GetReducerFileGroup [CELEBORN-18] Refactor stream manager to distinguish map partition and reduce partition","title":"Code Refector"},{"location":"community/release_notes/release_note_0.3.0/#building-and-developer-tools","text":"[CELEBORN-763] Add --add-opens to bootstrap shell scripts [CELEBORN-762] Always set JVM opts -XX:+IgnoreUnrecognizedVMOptions [CELEBORN-738] Enable Java 17 for CI [CELEBORN-497] Enable Java 11 for CI [CELEBORN-705] Upgrade Maven from 3.6.3 to 3.8.8 [CELEBORN-649] Speed up make-distribution.sh [CELEBORN-633] Introduce PR merge script [CELEBORN-716] Correct the to name when renaming the Netty native library [CELEBORN-667] Define protobuf-maven-plugin in the root pom.xml [CELEBORN-630] Binary release artifact should package all versions of Spark and Flink clients [CELEBORN-608] Exclude macOS fflags in make-distribution.sh [CELEBORN-605] Remove redundant exclusions from hadoop-client-api [CELEBORN-589] Using Apache CDN to download maven [CELEBORN-280] Enable Jacoco multi-module mode to collect coverage report [CELEBORN-482] Fix CVE dependency issue [CELEBORN-402] Enable autolink to Jira","title":"Building and Developer tools"},{"location":"community/release_notes/release_note_0.3.0/#dependency-upgrades","text":"[CELEBORN-743] Bump commons-io to 2.13.0 [CELEBORN-736] Bump commons-lang3 to 3.12.0 [CELEBORN-684] Bump Netty to 4.1.93.Final [CELEBORN-558] Bump Ratis to 2.5.1","title":"Dependency upgrades"},{"location":"community/release_notes/release_note_0.3.0/#others","text":"Improvement in Docs and Configuration [CELEBORN-786] Change default flush threads [CELEBORN-782] Make max components configurable for FileWriter#flushBuffer [CELEBORN-785] Add worker side partition hard split threshold [CELEBORN-769] Change default value of celeborn.client.push.maxReqsInFlight to 16 [CELEBORN-774] Pullout celeborn.rpc.dispatcher.threads to CelebornConf [CELEBORN-768] Change default config values for batch rpc and memory allocator [CELEBORN-765] Disable partitionSplit in Flink engine related configurations [CELEBORN-767] update the docs of celeborn.client.spark.push.sort.memory.threshold [CELEBORN-680] Refresh celeborn configurations in doc [CELEBORN-681] Add celeborn.metrics.conf to conf entity [CELEBORN-629] Add doc about enable rac-awareness [CELEBORN-632] Add spark namespace to spark specify properties [CELEBORN-623] Document how to change RPC type in celeborn-ratis [CELEBORN-625] Add a config to enable/disable UnsafeRow fast write. [CELEBORN-595] Rename and refactor the configuration doc. [CELEBORN-598] Fix Typos in READ [CELEBORN-570] Update docs about monitor and deployment. [CELEBORN-566] Refine docs to eliminate misleading configs. [CELEBORN-549] Update readme about deploy Flink client. [CELEBORN-527] Fix incorrect monitor the arrangement of documents [CELEBORN-499] Move version specific resource to main repo [CELEBORN-485] Make celeborn.push.replicate.enabled default to false [CELEBORN-399] Make fileSorterExecutors thread num can be customized [CELEBORN-223] The default rpc thread num of pushServer/replicateServer/fetchServer should be the number of total of Flusher's thread [CELEBORN-213] Add configuration whether to close idle connections in client side","title":"Others"},{"location":"community/release_notes/release_note_0.3.0/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.0-incubating version, and the order is based on the commit time: Contributors cfmcgrady waitinfuture pan3793 FMX shujiewu jiaoqingbo JQ-Cao RexXiong AngersZhuuuu onebox-li Demon-Liang kerwin-zk zhongqiangczq cxzl25 zwangsheng cchung100m liyihe skytin1004 ulysses-you kaijchen Radeity boneanxs akpatnam25 turboFei xunxunmimi5577 CVEDetect every-breaking-wave lianneli tcodehuber hddong liugs0213 boneanxs nafiyAix zy-jordan","title":"Credits"},{"location":"community/release_notes/release_note_0.3.1/","text":"Apache Celeborn\u2122 (Incubating) 0.3.1 Release Notes Highlight Flink supports split partitions Spark supports read local shuffle data Kubernetes deployment enhancements Metrics and Grafana Dashboard improvements Prefer to use jemalloc for memory allocation Globally disable thread-local cache in the shared PooledByteBufAllocator Fix wrongly delete running app shuffle data Fix occasionally data reading error when AQE is enabled Improvement [CELEBORN-152] Add config to limit max workers when offering slots [CELEBORN-468] Timeout useless lostWorkers/shutdownWorkers meta [CELEBORN-498] Add new config for DfsPartitionReader's chunk size [CELEBORN-627] Support split partitions [CELEBORN-656] Should also refine log about return HARD_SPLIT in handlePushMergedData [CELEBORN-712] Fix Utils.makeReducerKey [CELEBORN-726] Amend method names [CELEBORN-752] Separate local read test [CELEBORN-752] Support read local shuffle file for spark [CELEBORN-760] Convert OpenStream and StreamHandler to Pb [CELEBORN-770] Convert BacklogAnnouncement, BufferStreamEnd, ReadAddCredit to PB [CELEBORN-771] Convert PushDataHandShake, RegionFinish, RegionStart to PB [CELEBORN-796] Support for globally disable thread-local cache in the shared PooledByteBufAllocator [CELEBORN-798] Revert Add heartbeat from client to LifecycleManager to clean [CELEBORN-804] ShuffleManager stop should set shuffleClient to null [CELEBORN-807] Adjust shutdown worker logs in LifecycleManager [CELEBORN-809] Directly use isDriver passed from SparkEnv [CELEBORN-812] Cleanup SendBufferPool if idle for long [CELEBORN-819] Worker close should pass close status to support handle graceful shutdown and decommission [CELEBORN-820] Merge service shutdown and close method [CELEBORN-827] Eliminate unnecessary chunksBeingTransferred calculation [CELEBORN-830] Add spark integration test to verify fallback with workers unavailable [CELEBORN-830] Check available workers in CelebornShuffleFallbackPolicyRunner [CELEBORN-832] Support use RESTful API to trigger worker decommission [CELEBORN-837] Add silencer plugin to suppress deprecated warnings [CELEBORN-838] Add custom mvn flag to celeborn [CELEBORN-846] Remove unused updateReleaseSlotsMeta in master side [CELEBORN-847] Support use RESTful API to trigger worker exit and exitImmediately [CELEBORN-852] Add active connection count metrics to grafana dashboard [CELEBORN-852] Adding new metrics to record the number of registered \u2026 [CELEBORN-863] Persist committed file infos to support worker recovery [CELEBORN-874] Enrich Fetch log [CELEBORN-876] Enhance log to find out failed workers if data lost [CELEBORN-878] Convert all IOException to PartitionUnRetryAbleException when openStream/read file [CELEBORN-882] Add Pause Push Data Time Count Metrics & Dashboard Panel [CELEBORN-883] Optimized configuration checks during MemoryManager initialization [CELEBORN-886] Support multiple celeborn clusters in the same K8s namespace [CELEBORN-888] Tweak the logic and add unit tests for the MemoryManager#currentServingState method [CELEBORN-892] Fix statistics error of commitFiles method [CELEBORN-897] Set celeborn.network.memory.allocator.allowCache default to false [CELEBORN-900] Disable jemalloc in non-docker environment [CELEBORN-900] Prefer to use jemalloc for memory allocation [CELEBORN-901] Add support for Scala 2.13 [CELEBORN-902] Associate Celeborn.storage.dir with volumes in Helm values.yml [CELEBORN-904] Bump Spark in spark-3.3 profile from 3.3.2 to 3.3.3 [CELEBORN-905] Redraw the flowchart backpressure.svg after worker pause logic is reconstructed [CELEBORN-908] Tweak pause and resume logic && add unit test MemoryManager memory check thread [CELEBORN-920] Worker sends its load to Master through heartbeat [CELEBORN-922] Improve celeborn shuffle maanger fallback log message [CELEBORN-924] Change log level to error in PartitionFilesSorter upon Exception [CELEBORN-933] Add metrics about active shuffle data size [CELEBORN-934] Make the log description in switchServingState more precise [CELEBORN-942] Release script supports uploading Nexus [CELEBORN-943] Pre-create CelebornInputStreams in CelebornShuffleReader [CELEBORN-945] Change ShutdownHook's timeout for decommission [CELEBORN-950] Change CelebornShuffleReader log level and information [CELEBORN-956] Modify parameter passing in AbstractRemoteShuffleInputGateFactory [CELEBORN-957] Simplify nano time duration calculation [CELEBORN-958] Log DNS resolution result [CELEBORN-959] Use Java API to obtain disk capacity information instead of df command [CELEBORN-960] Exclude workers without healthy disks [CELEBORN-962] Add check DiskInfo#Status in PushDataHandler#checkDiskFull [CELEBORN-963] Add WORKDIR in celeborn Dockerfile [CELEBORN-964] Simplify read process output to prevent leak [CELEBORN-968] Make volume name dynamic in StatefulSet in Helm chart [CELEBORN-969] Allow user set priorityClass used by celeborn pods [CELEBORN-971] Should update Charts appVersion when we update project version [CELEBORN-975] Refactor the check logic to stop the celeborn master and worker [CELEBORN-976] Introduce script to check master and worker status [CELEBORN-979] Reduce default disk Check Interval [CELEBORN-981] Imrpove enable graceful shutdown tips [CELEBORN-982] Improve RPC bind port tips [CELEBORN-986] Use formatted log instead of string concat [CELEBORN-1007] Improve JVM metrics naming and add ThreadStates metrics [CELEBORN-1008] Adjust push/fetch timeout checker thread pool and tasks [CELEBORN-1014] Output log with bound address and port [MINOR] Add an alternative for CLIENT_RESERVE_SLOTS_RACKAWAE_ENABLED [MINOR] Exclude sbt files from git Stability and Bug Fix [CELEBORN-656] Fix wrong message call when revive return STAGE_END [CELEBORN-788] Update callback's location should also update the PushState to keep consistent [CELEBORN-788] Update latest PartitionLocation before retry PushData [CELEBORN-804] ShuffleClient should cleanup shuffle infos when trigger unregisterShuffle [CELEBORN-806] Correct the conf key celeborn.data.io.threads within the class ShuffleClientImpl [CELEBORN-819] Fix worker graceful shutdown exitKind set [CELEBORN-844] Fix incorrect config name in ConfigEntity checkvalue method and format message [CELEBORN-845] Sort memory counter won't decrease after sort failed [CELEBORN-846] Fix broken link caused by unknown RPC [CELEBORN-881] StorageManager clean up thread may delete new app directories [CELEBORN-890] PushHandler should check whether FileWriter has closed to avoid data lost [CELEBORN-899] Fix potential NPE in ShuffleClientImpl#revive [CELEBORN-917] Record read metric should be compatible with Gluten shuffle serde [CELEBORN-926] Enabled GRACEFUL SHUTDOWN, will meet IllegalMonitorStateException [CELEBORN-928] Don't stop LocalFlusher when notify error [CELEBORN-932] Fix worker register after gracefaully restart [CELEBORN-946] Record read metric should be compatible with Gluten shuffle dependency [CELEBORN-961] Catch exception when constructing Worker [CELEBORN-972] Enhance workingdirDiskCapacity unit parsing and fix ConfigMap is not effected for workerStatefuleSet [CELEBORN-988] Add config option to control original unsorted file deletion in PartitionFilesSorter [CELEBORN-988] Rename config key celeborn.worker.sortPartition.lazyRemovalOfOriginalFiles.enabled [CELEBORN-990] Add exception handler when calling CelebornHadoopUtils.getHadoopFS [CELEBORN-1005] Clean expired app dirs will delete the running application [CELEBORN-1013] Shutdown master if initialized failed Documentation [CELEBORN-810] Fix some typos and grammar [CELEBORN-811] Refine monitoring doc [CELEBORN-814] Merge upgrade doc to Deployment tab and add TOC [CELEBORN-909] Restore titles in migration guide [CELEBORN-941] Fix incorrect deploy doc [CELEBORN-944] Add link about cluster planning [CELEBORN-984] ShutdownWorkers API documentation [CELEBORN-1003] Correct the LICENSE and NOTICE for shaded client jars [CELEBORN-1007] Update Migration Guide [CELEBORN-1009] CELEBORN_PREFER_JEMALLOC [MINOR] Fix configuration version [MINOR] Fix typo in CelebornConf Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.1-incubating version: Contributors Angerszhuuuu Aravind Patnam Cheng Pan Fu Chen Jun He Keyong Zhou Melody Shuang SteNicholas Xiduo You camper42 caojiaqing hongzhaoyang jiang13021 jiaoqingbo liangyongyuan lishiyucn mingji onebox-li sunjunjie sychen xiyu.zk zhongqiang.czq zwangsheng \u5baa\u82f1","title":"Apache Celeborn\u2122 (Incubating) 0.3.1 Release Notes"},{"location":"community/release_notes/release_note_0.3.1/#apache-celeborntm-incubating-031-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.3.1 Release Notes"},{"location":"community/release_notes/release_note_0.3.1/#highlight","text":"Flink supports split partitions Spark supports read local shuffle data Kubernetes deployment enhancements Metrics and Grafana Dashboard improvements Prefer to use jemalloc for memory allocation Globally disable thread-local cache in the shared PooledByteBufAllocator Fix wrongly delete running app shuffle data Fix occasionally data reading error when AQE is enabled","title":"Highlight"},{"location":"community/release_notes/release_note_0.3.1/#improvement","text":"[CELEBORN-152] Add config to limit max workers when offering slots [CELEBORN-468] Timeout useless lostWorkers/shutdownWorkers meta [CELEBORN-498] Add new config for DfsPartitionReader's chunk size [CELEBORN-627] Support split partitions [CELEBORN-656] Should also refine log about return HARD_SPLIT in handlePushMergedData [CELEBORN-712] Fix Utils.makeReducerKey [CELEBORN-726] Amend method names [CELEBORN-752] Separate local read test [CELEBORN-752] Support read local shuffle file for spark [CELEBORN-760] Convert OpenStream and StreamHandler to Pb [CELEBORN-770] Convert BacklogAnnouncement, BufferStreamEnd, ReadAddCredit to PB [CELEBORN-771] Convert PushDataHandShake, RegionFinish, RegionStart to PB [CELEBORN-796] Support for globally disable thread-local cache in the shared PooledByteBufAllocator [CELEBORN-798] Revert Add heartbeat from client to LifecycleManager to clean [CELEBORN-804] ShuffleManager stop should set shuffleClient to null [CELEBORN-807] Adjust shutdown worker logs in LifecycleManager [CELEBORN-809] Directly use isDriver passed from SparkEnv [CELEBORN-812] Cleanup SendBufferPool if idle for long [CELEBORN-819] Worker close should pass close status to support handle graceful shutdown and decommission [CELEBORN-820] Merge service shutdown and close method [CELEBORN-827] Eliminate unnecessary chunksBeingTransferred calculation [CELEBORN-830] Add spark integration test to verify fallback with workers unavailable [CELEBORN-830] Check available workers in CelebornShuffleFallbackPolicyRunner [CELEBORN-832] Support use RESTful API to trigger worker decommission [CELEBORN-837] Add silencer plugin to suppress deprecated warnings [CELEBORN-838] Add custom mvn flag to celeborn [CELEBORN-846] Remove unused updateReleaseSlotsMeta in master side [CELEBORN-847] Support use RESTful API to trigger worker exit and exitImmediately [CELEBORN-852] Add active connection count metrics to grafana dashboard [CELEBORN-852] Adding new metrics to record the number of registered \u2026 [CELEBORN-863] Persist committed file infos to support worker recovery [CELEBORN-874] Enrich Fetch log [CELEBORN-876] Enhance log to find out failed workers if data lost [CELEBORN-878] Convert all IOException to PartitionUnRetryAbleException when openStream/read file [CELEBORN-882] Add Pause Push Data Time Count Metrics & Dashboard Panel [CELEBORN-883] Optimized configuration checks during MemoryManager initialization [CELEBORN-886] Support multiple celeborn clusters in the same K8s namespace [CELEBORN-888] Tweak the logic and add unit tests for the MemoryManager#currentServingState method [CELEBORN-892] Fix statistics error of commitFiles method [CELEBORN-897] Set celeborn.network.memory.allocator.allowCache default to false [CELEBORN-900] Disable jemalloc in non-docker environment [CELEBORN-900] Prefer to use jemalloc for memory allocation [CELEBORN-901] Add support for Scala 2.13 [CELEBORN-902] Associate Celeborn.storage.dir with volumes in Helm values.yml [CELEBORN-904] Bump Spark in spark-3.3 profile from 3.3.2 to 3.3.3 [CELEBORN-905] Redraw the flowchart backpressure.svg after worker pause logic is reconstructed [CELEBORN-908] Tweak pause and resume logic && add unit test MemoryManager memory check thread [CELEBORN-920] Worker sends its load to Master through heartbeat [CELEBORN-922] Improve celeborn shuffle maanger fallback log message [CELEBORN-924] Change log level to error in PartitionFilesSorter upon Exception [CELEBORN-933] Add metrics about active shuffle data size [CELEBORN-934] Make the log description in switchServingState more precise [CELEBORN-942] Release script supports uploading Nexus [CELEBORN-943] Pre-create CelebornInputStreams in CelebornShuffleReader [CELEBORN-945] Change ShutdownHook's timeout for decommission [CELEBORN-950] Change CelebornShuffleReader log level and information [CELEBORN-956] Modify parameter passing in AbstractRemoteShuffleInputGateFactory [CELEBORN-957] Simplify nano time duration calculation [CELEBORN-958] Log DNS resolution result [CELEBORN-959] Use Java API to obtain disk capacity information instead of df command [CELEBORN-960] Exclude workers without healthy disks [CELEBORN-962] Add check DiskInfo#Status in PushDataHandler#checkDiskFull [CELEBORN-963] Add WORKDIR in celeborn Dockerfile [CELEBORN-964] Simplify read process output to prevent leak [CELEBORN-968] Make volume name dynamic in StatefulSet in Helm chart [CELEBORN-969] Allow user set priorityClass used by celeborn pods [CELEBORN-971] Should update Charts appVersion when we update project version [CELEBORN-975] Refactor the check logic to stop the celeborn master and worker [CELEBORN-976] Introduce script to check master and worker status [CELEBORN-979] Reduce default disk Check Interval [CELEBORN-981] Imrpove enable graceful shutdown tips [CELEBORN-982] Improve RPC bind port tips [CELEBORN-986] Use formatted log instead of string concat [CELEBORN-1007] Improve JVM metrics naming and add ThreadStates metrics [CELEBORN-1008] Adjust push/fetch timeout checker thread pool and tasks [CELEBORN-1014] Output log with bound address and port [MINOR] Add an alternative for CLIENT_RESERVE_SLOTS_RACKAWAE_ENABLED [MINOR] Exclude sbt files from git","title":"Improvement"},{"location":"community/release_notes/release_note_0.3.1/#stability-and-bug-fix","text":"[CELEBORN-656] Fix wrong message call when revive return STAGE_END [CELEBORN-788] Update callback's location should also update the PushState to keep consistent [CELEBORN-788] Update latest PartitionLocation before retry PushData [CELEBORN-804] ShuffleClient should cleanup shuffle infos when trigger unregisterShuffle [CELEBORN-806] Correct the conf key celeborn.data.io.threads within the class ShuffleClientImpl [CELEBORN-819] Fix worker graceful shutdown exitKind set [CELEBORN-844] Fix incorrect config name in ConfigEntity checkvalue method and format message [CELEBORN-845] Sort memory counter won't decrease after sort failed [CELEBORN-846] Fix broken link caused by unknown RPC [CELEBORN-881] StorageManager clean up thread may delete new app directories [CELEBORN-890] PushHandler should check whether FileWriter has closed to avoid data lost [CELEBORN-899] Fix potential NPE in ShuffleClientImpl#revive [CELEBORN-917] Record read metric should be compatible with Gluten shuffle serde [CELEBORN-926] Enabled GRACEFUL SHUTDOWN, will meet IllegalMonitorStateException [CELEBORN-928] Don't stop LocalFlusher when notify error [CELEBORN-932] Fix worker register after gracefaully restart [CELEBORN-946] Record read metric should be compatible with Gluten shuffle dependency [CELEBORN-961] Catch exception when constructing Worker [CELEBORN-972] Enhance workingdirDiskCapacity unit parsing and fix ConfigMap is not effected for workerStatefuleSet [CELEBORN-988] Add config option to control original unsorted file deletion in PartitionFilesSorter [CELEBORN-988] Rename config key celeborn.worker.sortPartition.lazyRemovalOfOriginalFiles.enabled [CELEBORN-990] Add exception handler when calling CelebornHadoopUtils.getHadoopFS [CELEBORN-1005] Clean expired app dirs will delete the running application [CELEBORN-1013] Shutdown master if initialized failed","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.3.1/#documentation","text":"[CELEBORN-810] Fix some typos and grammar [CELEBORN-811] Refine monitoring doc [CELEBORN-814] Merge upgrade doc to Deployment tab and add TOC [CELEBORN-909] Restore titles in migration guide [CELEBORN-941] Fix incorrect deploy doc [CELEBORN-944] Add link about cluster planning [CELEBORN-984] ShutdownWorkers API documentation [CELEBORN-1003] Correct the LICENSE and NOTICE for shaded client jars [CELEBORN-1007] Update Migration Guide [CELEBORN-1009] CELEBORN_PREFER_JEMALLOC [MINOR] Fix configuration version [MINOR] Fix typo in CelebornConf","title":"Documentation"},{"location":"community/release_notes/release_note_0.3.1/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.1-incubating version: Contributors Angerszhuuuu Aravind Patnam Cheng Pan Fu Chen Jun He Keyong Zhou Melody Shuang SteNicholas Xiduo You camper42 caojiaqing hongzhaoyang jiang13021 jiaoqingbo liangyongyuan lishiyucn mingji onebox-li sunjunjie sychen xiyu.zk zhongqiang.czq zwangsheng \u5baa\u82f1","title":"Credits"},{"location":"community/release_notes/release_note_0.3.2/","text":"Apache Celeborn\u2122 (Incubating) 0.3.2 Release Notes Highlight Cleanup parmap to avoid creating too many threads Support arbitary Ratis configs and client rpc timeout Support policy for master to assign slots fallback to roundrobin with no available slots Use scheduleWithFixedDelay instead of scheduleAtFixedRate in threads pool Optimize mechanism of ChunkManager expired shuffle key cleanup Thread factory uncaught exception and MasterNotLeaderException improvements Metrics and Grafana Dashboard improvements Fix incorrect output for metrics of Prometheus Fix map task hangs at limitZeroInFlight due to duplicate onFailure called Improvement [CELEBORN-665] Skip empty app snapshot logs [CELEBORN-678] MapperAttempts for a shuffle should reply MAP_ENDED when mapper has already been ended from speculative task [CELEBORN-688] Add JVM metrics grafana template [CELEBORN-872] Extract the same allocation logic for both loadaware and roundrobin [CELEBORN-916] Add new metric about active shuffle file count in worker [CELEBORN-1017] Make checkPushTimeout and checkFetchTimeout conditions independent [CELEBORN-1019] Avoid magic strings copy from Spark SQLConf [CELEBORN-1021] Celeborn support arbitary Ratis configs and client rpc timeout [CELEBORN-1024] Thread factory should set UncaughtExceptionHandler to handle uncaught exception [CELEBORN-1026] Optimize registerShuffle fallback log [CELEBORN-1030] Improve the logic of delete md5 files when initializing SimpleStateMachineStorage [CELEBORN-1032] Use scheduleWithFixedDelay instead of scheduleAtFixedRate in threads pool of master and worker [CELEBORN-1033] MasterNotLeaderException should provide the cause of exception [CELEBORN-1034] Offer slots uses random range of available workers instead of shuffling [CELEBORN-1035] Expose RunningApplicationCount, PartitionWritten and PartitionFileCount metric by Celeborn master [CELEBORN-1040] Adjust local read logs and refine createReader [CELEBORN-1041] Improve the implementation for get the PartitionIdPassthrough class [CELEBORN-1042] Calculate duration using nanotime in CelebornInputStream [CELEBORN-1043] Convert variable \u2018metric\u2019 from String to StringBuilder in toMetric method [CELEBORN-1048] Align fetchWaitTime metrics to spark implementation [CELEBORN-1058] Support specifying the number of dispatcher threads for each role [CELEBORN-1076] Using text/plain content type for prometheus metrics [CELEBORN-1077] Support to apply base legend format for all grafana metrics [CELEBORN-1081] Client support celeborn.storage.activeTypes config [CELEBORN-1083] Refine TimeSlidingHub code [CELEBORN-1084] Initialize workerSource member to prevent NullPointException [CELEBORN-1088] Define baseLegend variable for JVM Metrics dashboard [CELEBORN-1089] Seperate overHighWatermark check to a dedicated thread [CELEBORN-1093] Improve setup endpoint [CELEBORN-1094] Optimize mechanism of ChunkManager expired shuffle key cleanup to avoid memory leak [CELEBORN-1096] Avoid initializing SortShuffleManager when stop [CELEBORN-1097] Optimize the retrieval of configuration in the internalCreateClient [CELEBORN-1098] Logging worker address with worker failure log [CELEBORN-1099] Check register when handleGetReducerFileGroup [CELEBORN-1102] Optimize the performance of getAllPrimaryLocationsWithMinEpoch [CELEBORN-1107] Make the max default number of netty threads configurable [CELEBORN-1109] Cache RegisterShuffleResponse to improve the processing speed of LifecycleManager [CELEBORN-1110] Support celeborn.worker.storage.disk.reserve.ratio to configure worker reserved ratio for each disk [CELEBORN-1111] Supporting connection to HDFS with Kerberos authentication enabled [CELEBORN-1112] Inform celeborn application is shutdown, then celeborn cluster can release resource immediately [CELEBORN-1114] Remove allocationBuckets from WorkerInfo and refactor SLOTS_ALLOCATED metrics [CELEBORN-1116] Read authentication configs from HADOOP_CONF_DIR [CELEBORN-1121] Improve WorkerInfo#hashCode method [CELEBORN-1123] Support fallback to non-columnar shuffle for schema that cannot be obtained from shuffle dependency [CELEBORN-1126] Set kubernetes resources field for master and worker init container for helm chart [CELEBORN-1129] More easy to dedicate createReaderWithRetry error [CELEBORN-1130] LifecycleManager#requestWorkerReserveSlots should check null for endpoint [CELEBORN-1136] Support policy for master to assign slots fallback to roundrobin with no available slots [CELEBORN-1137] Correct suggested leader of exception message for MasterNotLeaderException [CELEBORN-1138] Fix log error in createReaderWithRetry method [CELEBORN-1160] Avoid calling parmap when commit files [CELEBORN-1165] Avoid calling parmap when reserve slots [CELEBORN-1166] Avoid calling parmap when setup endpoint [CELEBORN-1167] Avoid calling parmap when destroy slots [CELEBORN-1178] Destroy fail reserved slots in LifecycleManager#reserveSlotsWithRetry [CELEBORN-1181] Filter out null endpoint workers in destroySlotsWithRetry [CELEBORN-1197] Avoid using the sleep command with the s suffix in bash scripts Stability and Bug Fix [CELEBORN-1036] Map task hangs at limitZeroInFlight due to duplicate onFailure called [CELEBORN-1037] Incorrect output for metrics of Prometheus [CELEBORN-1046] Add an expiration time configuration for app directory to clean up [CELEBORN-1059] Fix callback not update if push worker excluded during retry [CELEBORN-1075] Refactor MetricsSystem and AbstractSource to use synchronized blocks [CELEBORN-1086] Fix JVM metrics grafana expression issue [CELEBORN-1103] only clean up expire data for good disks [CELEBORN-1120] ShuffleClientImpl should close batchReviveRequestScheduler of ReviveManager [CELEBORN-1124] Exclude workers of shuffle manager remove worker of connect exception primary or replica [CELEBORN-1128] Fix incorrect method reference in ConcurrentHashMap.contains [CELEBORN-1139] Master's follower clean state before install snapshot [CELEBORN-1143] SortBasedPusher pushData should inc memory spill metrics [CELEBORN-1154] Fix NPE in DeviceMonitor#readWriteError [CELEBORN-1192] Celeborn wait task timeout error message should show correct corresponding batch and target host and port Documentation [CELEBORN-858] Generate patch to each Spark 3.x minor version [CELEBORN-1003] Add missing protobuf license file into spark shaded client jars [CELEBORN-1020] Remove outdated info in README.md file [CELEBORN-1202] LICENSE mentions third-party components under other open source licenses Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.2-incubating version: Contributors Angerszhuuuu Binjie Yang Bowen Song Chandni Singh Cheng Pan Ethan Feng Fei Wang Fu Chen Jiaan Geng Jiashu Xiong Jiayi Liu Junjie Sun Kerwin Zhang Keyong Zhou Luke Yan Marwan Salem Nicholas Jiang Qingbo Jiao Shaoyun Chen Wei Tong Yanze Jiang Yihe Li Yongyuan Liang qinrui wusphinx xleoken \u5434\u7965\u5e73 \u5baa\u82f1","title":"Apache Celeborn\u2122 (Incubating) 0.3.2 Release Notes"},{"location":"community/release_notes/release_note_0.3.2/#apache-celeborntm-incubating-032-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.3.2 Release Notes"},{"location":"community/release_notes/release_note_0.3.2/#highlight","text":"Cleanup parmap to avoid creating too many threads Support arbitary Ratis configs and client rpc timeout Support policy for master to assign slots fallback to roundrobin with no available slots Use scheduleWithFixedDelay instead of scheduleAtFixedRate in threads pool Optimize mechanism of ChunkManager expired shuffle key cleanup Thread factory uncaught exception and MasterNotLeaderException improvements Metrics and Grafana Dashboard improvements Fix incorrect output for metrics of Prometheus Fix map task hangs at limitZeroInFlight due to duplicate onFailure called","title":"Highlight"},{"location":"community/release_notes/release_note_0.3.2/#improvement","text":"[CELEBORN-665] Skip empty app snapshot logs [CELEBORN-678] MapperAttempts for a shuffle should reply MAP_ENDED when mapper has already been ended from speculative task [CELEBORN-688] Add JVM metrics grafana template [CELEBORN-872] Extract the same allocation logic for both loadaware and roundrobin [CELEBORN-916] Add new metric about active shuffle file count in worker [CELEBORN-1017] Make checkPushTimeout and checkFetchTimeout conditions independent [CELEBORN-1019] Avoid magic strings copy from Spark SQLConf [CELEBORN-1021] Celeborn support arbitary Ratis configs and client rpc timeout [CELEBORN-1024] Thread factory should set UncaughtExceptionHandler to handle uncaught exception [CELEBORN-1026] Optimize registerShuffle fallback log [CELEBORN-1030] Improve the logic of delete md5 files when initializing SimpleStateMachineStorage [CELEBORN-1032] Use scheduleWithFixedDelay instead of scheduleAtFixedRate in threads pool of master and worker [CELEBORN-1033] MasterNotLeaderException should provide the cause of exception [CELEBORN-1034] Offer slots uses random range of available workers instead of shuffling [CELEBORN-1035] Expose RunningApplicationCount, PartitionWritten and PartitionFileCount metric by Celeborn master [CELEBORN-1040] Adjust local read logs and refine createReader [CELEBORN-1041] Improve the implementation for get the PartitionIdPassthrough class [CELEBORN-1042] Calculate duration using nanotime in CelebornInputStream [CELEBORN-1043] Convert variable \u2018metric\u2019 from String to StringBuilder in toMetric method [CELEBORN-1048] Align fetchWaitTime metrics to spark implementation [CELEBORN-1058] Support specifying the number of dispatcher threads for each role [CELEBORN-1076] Using text/plain content type for prometheus metrics [CELEBORN-1077] Support to apply base legend format for all grafana metrics [CELEBORN-1081] Client support celeborn.storage.activeTypes config [CELEBORN-1083] Refine TimeSlidingHub code [CELEBORN-1084] Initialize workerSource member to prevent NullPointException [CELEBORN-1088] Define baseLegend variable for JVM Metrics dashboard [CELEBORN-1089] Seperate overHighWatermark check to a dedicated thread [CELEBORN-1093] Improve setup endpoint [CELEBORN-1094] Optimize mechanism of ChunkManager expired shuffle key cleanup to avoid memory leak [CELEBORN-1096] Avoid initializing SortShuffleManager when stop [CELEBORN-1097] Optimize the retrieval of configuration in the internalCreateClient [CELEBORN-1098] Logging worker address with worker failure log [CELEBORN-1099] Check register when handleGetReducerFileGroup [CELEBORN-1102] Optimize the performance of getAllPrimaryLocationsWithMinEpoch [CELEBORN-1107] Make the max default number of netty threads configurable [CELEBORN-1109] Cache RegisterShuffleResponse to improve the processing speed of LifecycleManager [CELEBORN-1110] Support celeborn.worker.storage.disk.reserve.ratio to configure worker reserved ratio for each disk [CELEBORN-1111] Supporting connection to HDFS with Kerberos authentication enabled [CELEBORN-1112] Inform celeborn application is shutdown, then celeborn cluster can release resource immediately [CELEBORN-1114] Remove allocationBuckets from WorkerInfo and refactor SLOTS_ALLOCATED metrics [CELEBORN-1116] Read authentication configs from HADOOP_CONF_DIR [CELEBORN-1121] Improve WorkerInfo#hashCode method [CELEBORN-1123] Support fallback to non-columnar shuffle for schema that cannot be obtained from shuffle dependency [CELEBORN-1126] Set kubernetes resources field for master and worker init container for helm chart [CELEBORN-1129] More easy to dedicate createReaderWithRetry error [CELEBORN-1130] LifecycleManager#requestWorkerReserveSlots should check null for endpoint [CELEBORN-1136] Support policy for master to assign slots fallback to roundrobin with no available slots [CELEBORN-1137] Correct suggested leader of exception message for MasterNotLeaderException [CELEBORN-1138] Fix log error in createReaderWithRetry method [CELEBORN-1160] Avoid calling parmap when commit files [CELEBORN-1165] Avoid calling parmap when reserve slots [CELEBORN-1166] Avoid calling parmap when setup endpoint [CELEBORN-1167] Avoid calling parmap when destroy slots [CELEBORN-1178] Destroy fail reserved slots in LifecycleManager#reserveSlotsWithRetry [CELEBORN-1181] Filter out null endpoint workers in destroySlotsWithRetry [CELEBORN-1197] Avoid using the sleep command with the s suffix in bash scripts","title":"Improvement"},{"location":"community/release_notes/release_note_0.3.2/#stability-and-bug-fix","text":"[CELEBORN-1036] Map task hangs at limitZeroInFlight due to duplicate onFailure called [CELEBORN-1037] Incorrect output for metrics of Prometheus [CELEBORN-1046] Add an expiration time configuration for app directory to clean up [CELEBORN-1059] Fix callback not update if push worker excluded during retry [CELEBORN-1075] Refactor MetricsSystem and AbstractSource to use synchronized blocks [CELEBORN-1086] Fix JVM metrics grafana expression issue [CELEBORN-1103] only clean up expire data for good disks [CELEBORN-1120] ShuffleClientImpl should close batchReviveRequestScheduler of ReviveManager [CELEBORN-1124] Exclude workers of shuffle manager remove worker of connect exception primary or replica [CELEBORN-1128] Fix incorrect method reference in ConcurrentHashMap.contains [CELEBORN-1139] Master's follower clean state before install snapshot [CELEBORN-1143] SortBasedPusher pushData should inc memory spill metrics [CELEBORN-1154] Fix NPE in DeviceMonitor#readWriteError [CELEBORN-1192] Celeborn wait task timeout error message should show correct corresponding batch and target host and port","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.3.2/#documentation","text":"[CELEBORN-858] Generate patch to each Spark 3.x minor version [CELEBORN-1003] Add missing protobuf license file into spark shaded client jars [CELEBORN-1020] Remove outdated info in README.md file [CELEBORN-1202] LICENSE mentions third-party components under other open source licenses","title":"Documentation"},{"location":"community/release_notes/release_note_0.3.2/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.3.2-incubating version: Contributors Angerszhuuuu Binjie Yang Bowen Song Chandni Singh Cheng Pan Ethan Feng Fei Wang Fu Chen Jiaan Geng Jiashu Xiong Jiayi Liu Junjie Sun Kerwin Zhang Keyong Zhou Luke Yan Marwan Salem Nicholas Jiang Qingbo Jiao Shaoyun Chen Wei Tong Yanze Jiang Yihe Li Yongyuan Liang qinrui wusphinx xleoken \u5434\u7965\u5e73 \u5baa\u82f1","title":"Credits"},{"location":"community/release_notes/release_note_0.4.0/","text":"Apache Celeborn\u2122 (Incubating) 0.4.0 Release Notes Highlight Rerun Spark Stage for Celeborn Shuffle Fetch Failure Added support for Apache Hadoop MapReduce Added support for Apache Flink 1.18 Implemented JVM monitoring in Celeborn Worker using JVMQuake Added support for SBT build system IMPOROVEMENT [CELEBORN-299] Deprecate celeborn.worker.storage.baseDir.prefix and celeborn.worker.storage.baseDir.number [CELEBORN-313] Add rest endpoint to show master group info [CELEBORN-448] Support exclude worker manually [CELEBORN-655][SPARK] Rename newAppId to appUniqueId [CELEBORN-733] Clean unused GetBlacklist & GetBlacklistResponse [CELEBORN-772] Convert StreamChunkSlice, ChunkFetchRequest, TransportableError to PB [CELEBORN-780] Change SPARK_SHUFFLE_FORCE_FALLBACK_PARTITION_THRESHOLD default to Int.MaxValue since slot's is not a bottleneck [CELEBORN-781] Refactor RPC message type name [CELEBORN-794] Fix link of CONFIGURATIONS in README [CELEBORN-808] Remove unnecessary RssShuffleManager in 0.4.0 [CELEBORN-815] Remove unused ShuffleClient.readPartition [CELEBORN-829] Improve response message of invalid HTTP request [CELEBORN-833] Remove unused code [CELEBORN-835] Format specifiers should be used instead of string concatenation [CELEBORN-851] Mention Celeborn 0.4 server requires 0.3 or above clients [CELEBORN-856] Add mapreduce integration test [CELEBORN-868][MASTER] Adjust logic of SlotsAllocator#offerSlotsLoadAware fallback to roundrobin [CELEBORN-879] Add dev/dependencies.sh for audit dependencies [CELEBORN-885][SPARK] Shade RoaringBitmap to avoid dependency conflicts [CELEBORN-887] Option --config should take effect in celeborn-daemon.sh script [CELEBORN-891] Remove pipeline feature for sort based writer [CELEBORN-903][INFRA] Fix list index out of range for JIRA resolution in merge_pr [CELEBORN-907][INFRA] The Jira Python misses our assignee when it searches users again [CELEBORN-910][INFRA] Support JIRA_ACCESS_TOKEN for merging script [CELEBORN-912] Support build with Spark 3.5 [CELEBORN-913] Implement method ShuffleDriverComponents#supportsReliableStorage [CELEBORN-918][INFRA] Auto Assign First-time contributor with Contributors role [CELEBORN-919] Move Columnar Shuffle code into an individual module [CELEBORN-929][INFRA] Add dependencies check CI [CELEBORN-930][INFRA] Eagerly check if the token is valid to align with the behavior of username/password auth [CELEBORN-931][INFRA] Fix merged pull requests resolution [CELEBORN-936] Shuffle master urls to avoid always connect first mast\u2026 [CELEBORN-937][INFRA] Improve branch suggestion for backporting [CELEBORN-939] Change register to unregister in Log [CELEBORN-940] Make the number of arguments and placeholders consistent [CELEBORN-951] Add IssueNavigationLink and icon for IDEA [CELEBORN-953] Remove unused-imports in Utils.scala [CELEBORN-973] Improve HttpRequestHandler handle HTTP request with base, master and worker [CELEBORN-977] Support RocksDB as recover DB backend [CELEBORN-978] Improve dependency.sh replacement mode [CELEBORN-980] Asynchronously delete original files to fix ReusedExchange bug [CELEBORN-983] Rename PrometheusMetric configuration [CELEBORN-985] Change default value of numConnectionsPerPeer to 1 [CELEBORN-999] MR deps check [CELEBORN-1000] MR module style check [CELEBORN-1006] Add support for Apache Hadoop 2.x in Celeborn build [CELEBORN-1018] Fix throw exception when exec create-package.sh script [CELEBORN-1028] Make prometheus path configurable [CELEBORN-1038] Clean up deprecated api [CELEBORN-1044] Enhance the check of parameter array length [CELEBORN-1047] Remove conf celeborn.worker.sortPartition.eagerlyRemoveOriginalFiles.enabled [CELEBORN-1052] Introduce dynamic ConfigService at SystemLevel and TenantLevel [CELEBORN-1060] Fix the master's http port conflicts with rpc port in celeborn default template file [CELEBORN-1065] Prevent the local variable 'time' declared in one 'switch' branch and used in another [CELEBORN-1066] Skip looping streamimg sets in numShuffleSteams of ChunkStreamManager [CELEBORN-1068] Fix hashCode computation [CELEBORN-1069] Avoid double brace initialization [CELEBORN-1070] Add error-prone to pom.xml [CELEBORN-1071] Ensure guardedBy is satisfied, fix DCL bugs as well [CELEBORN-1072] Fix misc error prone reports found [CELEBORN-1079] Fix use of GuardedBy in client-flink/common [CELEBORN-1082] Fixing partition sorter task failures due to duplicate sorting [CELEBORN-1087] Remove SimpleStateMachineStorageUtil in master module [CELEBORN-1095] Support configuration of fastest available XXHashFactory instance for checksum of Lz4Decompressor [CELEBORN-1100] Introduce ChunkStreamCount, OpenStreamFailCount metrics about opening stream of FetchHandler [CELEBORN-1106] Ensure data is written into flush buffer before sending message to client [CELEBORN-1108] Rat plugin check for more modules [CELEBORN-1122] Metrics supports json format [CELEBORN-1123] Support fallback to non-columnar shuffle for schema that cannot be obtained from shuffle dependency [CELEBORN-1127] Add JVM classloader metrics [CELEBORN-1131] Add Client/Server bootstrap framework to transport layer [CELEBORN-1134] Celeborn Flink client should validate whether execution.batch-shuffle-mode is ALL_EXCHANGES_BLOCKING [CELEBORN-1135] Added tests for the RpcEnv and related classes [CELEBORN-1140] Use try-with-resources to avoid FSDataInputStream not being closed [CELEBORN-1142] clear shuffleIdCache in shutdown method of ShuffleClientImpl [CELEBORN-1145] Separate clientPushBufferMaxSize from CelebornInputStreamImpl [CELEBORN-1147] Added a dedicated API for RPC messages which also accepts an RpcResponseCallback instance [CELEBORN-1149] Improve replica selection when rack aware [CELEBORN-1150] support io encryption for spark [CELEBORN-1151] Request slots when register shuffle should filter the workers excluded by application [CELEBORN-1152] fix GetShuffleId RPC NPE for empty shuffle [CELEBORN-1157] Add client-side support for Sasl Authentication in the transport layer [CELEBORN-1162][BUG] Fix refCnt 0 Exception in FetchHandler#handleChunkFetchRequest [CELEBORN-1164] Introduce FetchChunkFailCount metric to expose the count of fetching chunk failed in current worker [CELEBORN-1176] Server side support for Sasl Auth [CELEBORN-1177] OpenStream should register stream via ChunkStreamManager to close stream for ReusedExchange [CELEBORN-1180] Changed the version of Sasl Auth related config to 0.5 [CELEBORN-1187] Unify the size and file count of active shuffle metrics for master and worker [CELEBORN-1188][TEST] Using JUnit function instead of java assert [CELEBORN-1189] Introduce RunningApplicationCount metric and /applications API to record running applications of worker [CELEBORN-1190] Apply error prone patch and suppress some problems [CELEBORN-1193] ResettableSlidingWindowReservoir should reset full to false [CELEBORN-1196] Slots allocator will increment disk index repeatedly [CELEBORN-1201] Optimize memory usage of cache in partition sorter [CELEBORN-1210] Fix potential memory leak in PartitionFilesCleaner [CELEBORN-1211] Add extension for celeborn shuffle handler [CELEBORN-1214] Introduce WriteDataHardSplitCount metric to record HARD_SPLIT partitions of PushData and PushMergedData [CELEBORN-1215] Introduce PausePushDataAndReplicateTime metric to record time for a worker to stop receiving pushData from clients and other workers [CELEBORN-1216] Resolve error occurring during distribution creation with profile -Pspark-2.4 [CELEBORN-1217] Improve exception message of loadFileGroup for ShuffleClientImpl [CELEBORN-1218] Optimize dataPusher to get partitionLocationMap only once [CELEBORN-1219] takeBuffer() avoid checking source.metricsCollectCriticalEnabled twice [CELEBORN-1220][IMPROVEMENT] Make trim logic more robust [CELEBORN-1224] Make TransportMessage#type transient for backward compatibility [CELEBORN-1225] Worker should build replicate factory to get client for sending replicate data [CELEBORN-1226][BRANCH-0.4.0] Unify creation of thread using ThreadUtils (#2245) [CELEBORN-1228] Format the timestamp when recording worker failure [CELEBORN-1233] Treat unfound PartitionLocation as failed in Controller#commitFiles [CELEBORN-1236][METRICS] Celeborn add metrics about thread pool [CELEBORN-1238] deviceCheckThreadPool is only initialized when diskCheck is enabled [CELEBORN-1242] Unify celeborn thread name format [CELEBORN-1252] Fix resource consumption of worker does not update when update interval is greater than heartbeat interval [CELEBORN-1253] Improve exception message of fetching chunk failure for WorkerPartitionReader BUILD [CELEBORN-836][BUILD] Initial support sbt [CELEBORN-843][BUILD] sbt support flink-related module build/test [CELEBORN-850][INFRA] Add SBT CI [CELEBORN-867][BUILD] Add maven local repository to sbt respositories [CELEBORN-880] Remove sbt compiler plugin genjavadoc-plugin [CELEBORN-884][BUILD] Consolidate all dependencies into a global object Dependencies [CELEBORN-898][INFRA] Fix java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing for SBT CI [CELEBORN-906][BUILD] Aligning dependencies between SBT and Maven [CELEBORN-921] Upgrade sbt to 1.9.4 [CELEBORN-989] Add support for making distribution package via SBT [CELEBORN-1002] Add SBT MRClientProject [CELEBORN-1031] SBT correct the LICENSE and NOTICE for shaded client jars [CELEBORN-1156][BUILD] SBT publish support [CELEBORN-1159][BUILD] Update the scope of the protobuf-java dependency from protobuf to runtime [CELEBORN-1191] Migrate the release script from Maven to SBT [CELEBORN-1194] Add sbt-pgp plugin for publishing signed artifacts [CELEBORN-1198] Keep debug info when use SBT build [CELEBORN-1199] Add LICENSE and NOTICE files for service related sub-projects [CELEBORN-1203] Add LicenseAndNoticeMergeStrategy to resolve inner project LICENSE/NOTICE conflict for shaded client packaging [CELEBORN-1205] Disable Maven local caches to improve SBT building stability Documentation [CELEBORN-822] Add quick start guide [CELEBORN-822] Introduce a quick start guide for running Apache Flink with Apache Celeborn [CELEBORN-823] Add Celeborn architecture document [CELEBORN-824] Add PushData document [CELEBORN-826] Add storage document [CELEBORN-828] Merge Monitoring to Development doc [CELEBORN-831] Add traffic control document [CELEBORN-834] Add fault tolerant document [CELEBORN-849] Document on Master [CELEBORN-853] Document on LifecycleManager [CELEBORN-860] Document on ShuffleClient [CELEBORN-864] Document on blacklist [CELEBORN-869] Document on Integrating Celeborn [CELEBORN-870] Document on usage together with Gluten [CELEBORN-877] Document on SBT [CELEBORN-893] Fix Spark patch list text in Readme [CELEBORN-909] Mention celeborn.worker.directMemoryRatioToResume default value changed in main/0.4 [CELEBORN-927] Correct celeborn.metrics.conf.*.sink.csv.class configuration example for a CSV sink [CELEBORN-927] Guideline to add new RPC messages [CELEBORN-927] Run dev/reformat before you create a new pull request for code style [CELEBORN-948] fix quick start doc about failed to submit flink wordcount [CELEBORN-954] Add documentation about reliable shuffle data storage [CELEBORN-974] Add quick start guide about using MapReduce with Celeborn [CELEBORN-987] README#Build should extend to Java8/11/17 [CELEBORN-991] Remove incorrect spark.metrics.conf [CELEBORN-997] Fix Rolling upgrade broken link [CELEBORN-1010] Update docs about spark.shuffle.service.enabled [CELEBORN-1085] Update metrics doc [CELEBORN-1091] Update docs about how to use error-prone plugin in IDEA [CELEBORN-1101] Update metrics doc to add necessary configuration steps [CELEBORN-1104] Fix SBT documentation incorrect command [CELEBORN-1207] SBT http repository documentation [CELEBORN-1223] Align master and worker metrics of document with MasterSource and WorkerSource [CELEBORN-1247] Output config's alternatives to doc [MINOR] Add the Celeborn Helm Chart doc [MINOR] Updated sbt.md documentation to be consistent with description Dependencies [CELEBORN-742][BUILD] Bump Hadoop 3.2.4 [CELEBORN-821][BUILD] Bump junit from 4.12 to 4.13.2 [CELEBORN-1113] Bump Hadoop client version from 3.2.4 to 3.3.6 [CELEBORN-1125] Bump guava from 14.0.1 to 32.1.3-jre [CELEBORN-1163] Upgrade protobuf from 3.19.2 to 3.21.7 [CELEBORN-1169] Bump Spark from 3.4.1 to 3.4.2 [CELEBORN-1170] Upgrade snappy-java from 1.1.8.2 to 1.1.10.5 [CELEBORN-1173] Upgrade netty version from 4.1.93.Final to 4.1.101.Final [CELEBORN-1184] Update the snakeyaml version from 1.33 to 2.2 [MINOR] upgrade snappy-java from 1.1.8.2 to 1.1.10.5 Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.4.0-incubating version: Contributors Angerszhuuuu Aravind Patnam Chandni Singh Cheng Pan Erik.fang Fei Wang Fu Chen Kent Yao Kerwin Zhang Keyong Zhou Mridul Muralidharan Shuang SteNicholas Xiduo You exmy gaochao0509 hongzhaoyang jiaoqingbo liangbowen liangyongyuan mingji onebox-li pengqli qinrui sychen wangshengjie xianminglei xiyu.zk xleoken zhouyifan279 zml1206 zwangsheng","title":"Apache Celeborn\u2122 (Incubating) 0.4.0 Release Notes"},{"location":"community/release_notes/release_note_0.4.0/#apache-celeborntm-incubating-040-release-notes","text":"","title":"Apache Celeborn\u2122 (Incubating) 0.4.0 Release Notes"},{"location":"community/release_notes/release_note_0.4.0/#highlight","text":"Rerun Spark Stage for Celeborn Shuffle Fetch Failure Added support for Apache Hadoop MapReduce Added support for Apache Flink 1.18 Implemented JVM monitoring in Celeborn Worker using JVMQuake Added support for SBT build system","title":"Highlight"},{"location":"community/release_notes/release_note_0.4.0/#imporovement","text":"[CELEBORN-299] Deprecate celeborn.worker.storage.baseDir.prefix and celeborn.worker.storage.baseDir.number [CELEBORN-313] Add rest endpoint to show master group info [CELEBORN-448] Support exclude worker manually [CELEBORN-655][SPARK] Rename newAppId to appUniqueId [CELEBORN-733] Clean unused GetBlacklist & GetBlacklistResponse [CELEBORN-772] Convert StreamChunkSlice, ChunkFetchRequest, TransportableError to PB [CELEBORN-780] Change SPARK_SHUFFLE_FORCE_FALLBACK_PARTITION_THRESHOLD default to Int.MaxValue since slot's is not a bottleneck [CELEBORN-781] Refactor RPC message type name [CELEBORN-794] Fix link of CONFIGURATIONS in README [CELEBORN-808] Remove unnecessary RssShuffleManager in 0.4.0 [CELEBORN-815] Remove unused ShuffleClient.readPartition [CELEBORN-829] Improve response message of invalid HTTP request [CELEBORN-833] Remove unused code [CELEBORN-835] Format specifiers should be used instead of string concatenation [CELEBORN-851] Mention Celeborn 0.4 server requires 0.3 or above clients [CELEBORN-856] Add mapreduce integration test [CELEBORN-868][MASTER] Adjust logic of SlotsAllocator#offerSlotsLoadAware fallback to roundrobin [CELEBORN-879] Add dev/dependencies.sh for audit dependencies [CELEBORN-885][SPARK] Shade RoaringBitmap to avoid dependency conflicts [CELEBORN-887] Option --config should take effect in celeborn-daemon.sh script [CELEBORN-891] Remove pipeline feature for sort based writer [CELEBORN-903][INFRA] Fix list index out of range for JIRA resolution in merge_pr [CELEBORN-907][INFRA] The Jira Python misses our assignee when it searches users again [CELEBORN-910][INFRA] Support JIRA_ACCESS_TOKEN for merging script [CELEBORN-912] Support build with Spark 3.5 [CELEBORN-913] Implement method ShuffleDriverComponents#supportsReliableStorage [CELEBORN-918][INFRA] Auto Assign First-time contributor with Contributors role [CELEBORN-919] Move Columnar Shuffle code into an individual module [CELEBORN-929][INFRA] Add dependencies check CI [CELEBORN-930][INFRA] Eagerly check if the token is valid to align with the behavior of username/password auth [CELEBORN-931][INFRA] Fix merged pull requests resolution [CELEBORN-936] Shuffle master urls to avoid always connect first mast\u2026 [CELEBORN-937][INFRA] Improve branch suggestion for backporting [CELEBORN-939] Change register to unregister in Log [CELEBORN-940] Make the number of arguments and placeholders consistent [CELEBORN-951] Add IssueNavigationLink and icon for IDEA [CELEBORN-953] Remove unused-imports in Utils.scala [CELEBORN-973] Improve HttpRequestHandler handle HTTP request with base, master and worker [CELEBORN-977] Support RocksDB as recover DB backend [CELEBORN-978] Improve dependency.sh replacement mode [CELEBORN-980] Asynchronously delete original files to fix ReusedExchange bug [CELEBORN-983] Rename PrometheusMetric configuration [CELEBORN-985] Change default value of numConnectionsPerPeer to 1 [CELEBORN-999] MR deps check [CELEBORN-1000] MR module style check [CELEBORN-1006] Add support for Apache Hadoop 2.x in Celeborn build [CELEBORN-1018] Fix throw exception when exec create-package.sh script [CELEBORN-1028] Make prometheus path configurable [CELEBORN-1038] Clean up deprecated api [CELEBORN-1044] Enhance the check of parameter array length [CELEBORN-1047] Remove conf celeborn.worker.sortPartition.eagerlyRemoveOriginalFiles.enabled [CELEBORN-1052] Introduce dynamic ConfigService at SystemLevel and TenantLevel [CELEBORN-1060] Fix the master's http port conflicts with rpc port in celeborn default template file [CELEBORN-1065] Prevent the local variable 'time' declared in one 'switch' branch and used in another [CELEBORN-1066] Skip looping streamimg sets in numShuffleSteams of ChunkStreamManager [CELEBORN-1068] Fix hashCode computation [CELEBORN-1069] Avoid double brace initialization [CELEBORN-1070] Add error-prone to pom.xml [CELEBORN-1071] Ensure guardedBy is satisfied, fix DCL bugs as well [CELEBORN-1072] Fix misc error prone reports found [CELEBORN-1079] Fix use of GuardedBy in client-flink/common [CELEBORN-1082] Fixing partition sorter task failures due to duplicate sorting [CELEBORN-1087] Remove SimpleStateMachineStorageUtil in master module [CELEBORN-1095] Support configuration of fastest available XXHashFactory instance for checksum of Lz4Decompressor [CELEBORN-1100] Introduce ChunkStreamCount, OpenStreamFailCount metrics about opening stream of FetchHandler [CELEBORN-1106] Ensure data is written into flush buffer before sending message to client [CELEBORN-1108] Rat plugin check for more modules [CELEBORN-1122] Metrics supports json format [CELEBORN-1123] Support fallback to non-columnar shuffle for schema that cannot be obtained from shuffle dependency [CELEBORN-1127] Add JVM classloader metrics [CELEBORN-1131] Add Client/Server bootstrap framework to transport layer [CELEBORN-1134] Celeborn Flink client should validate whether execution.batch-shuffle-mode is ALL_EXCHANGES_BLOCKING [CELEBORN-1135] Added tests for the RpcEnv and related classes [CELEBORN-1140] Use try-with-resources to avoid FSDataInputStream not being closed [CELEBORN-1142] clear shuffleIdCache in shutdown method of ShuffleClientImpl [CELEBORN-1145] Separate clientPushBufferMaxSize from CelebornInputStreamImpl [CELEBORN-1147] Added a dedicated API for RPC messages which also accepts an RpcResponseCallback instance [CELEBORN-1149] Improve replica selection when rack aware [CELEBORN-1150] support io encryption for spark [CELEBORN-1151] Request slots when register shuffle should filter the workers excluded by application [CELEBORN-1152] fix GetShuffleId RPC NPE for empty shuffle [CELEBORN-1157] Add client-side support for Sasl Authentication in the transport layer [CELEBORN-1162][BUG] Fix refCnt 0 Exception in FetchHandler#handleChunkFetchRequest [CELEBORN-1164] Introduce FetchChunkFailCount metric to expose the count of fetching chunk failed in current worker [CELEBORN-1176] Server side support for Sasl Auth [CELEBORN-1177] OpenStream should register stream via ChunkStreamManager to close stream for ReusedExchange [CELEBORN-1180] Changed the version of Sasl Auth related config to 0.5 [CELEBORN-1187] Unify the size and file count of active shuffle metrics for master and worker [CELEBORN-1188][TEST] Using JUnit function instead of java assert [CELEBORN-1189] Introduce RunningApplicationCount metric and /applications API to record running applications of worker [CELEBORN-1190] Apply error prone patch and suppress some problems [CELEBORN-1193] ResettableSlidingWindowReservoir should reset full to false [CELEBORN-1196] Slots allocator will increment disk index repeatedly [CELEBORN-1201] Optimize memory usage of cache in partition sorter [CELEBORN-1210] Fix potential memory leak in PartitionFilesCleaner [CELEBORN-1211] Add extension for celeborn shuffle handler [CELEBORN-1214] Introduce WriteDataHardSplitCount metric to record HARD_SPLIT partitions of PushData and PushMergedData [CELEBORN-1215] Introduce PausePushDataAndReplicateTime metric to record time for a worker to stop receiving pushData from clients and other workers [CELEBORN-1216] Resolve error occurring during distribution creation with profile -Pspark-2.4 [CELEBORN-1217] Improve exception message of loadFileGroup for ShuffleClientImpl [CELEBORN-1218] Optimize dataPusher to get partitionLocationMap only once [CELEBORN-1219] takeBuffer() avoid checking source.metricsCollectCriticalEnabled twice [CELEBORN-1220][IMPROVEMENT] Make trim logic more robust [CELEBORN-1224] Make TransportMessage#type transient for backward compatibility [CELEBORN-1225] Worker should build replicate factory to get client for sending replicate data [CELEBORN-1226][BRANCH-0.4.0] Unify creation of thread using ThreadUtils (#2245) [CELEBORN-1228] Format the timestamp when recording worker failure [CELEBORN-1233] Treat unfound PartitionLocation as failed in Controller#commitFiles [CELEBORN-1236][METRICS] Celeborn add metrics about thread pool [CELEBORN-1238] deviceCheckThreadPool is only initialized when diskCheck is enabled [CELEBORN-1242] Unify celeborn thread name format [CELEBORN-1252] Fix resource consumption of worker does not update when update interval is greater than heartbeat interval [CELEBORN-1253] Improve exception message of fetching chunk failure for WorkerPartitionReader","title":"IMPOROVEMENT"},{"location":"community/release_notes/release_note_0.4.0/#build","text":"[CELEBORN-836][BUILD] Initial support sbt [CELEBORN-843][BUILD] sbt support flink-related module build/test [CELEBORN-850][INFRA] Add SBT CI [CELEBORN-867][BUILD] Add maven local repository to sbt respositories [CELEBORN-880] Remove sbt compiler plugin genjavadoc-plugin [CELEBORN-884][BUILD] Consolidate all dependencies into a global object Dependencies [CELEBORN-898][INFRA] Fix java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing for SBT CI [CELEBORN-906][BUILD] Aligning dependencies between SBT and Maven [CELEBORN-921] Upgrade sbt to 1.9.4 [CELEBORN-989] Add support for making distribution package via SBT [CELEBORN-1002] Add SBT MRClientProject [CELEBORN-1031] SBT correct the LICENSE and NOTICE for shaded client jars [CELEBORN-1156][BUILD] SBT publish support [CELEBORN-1159][BUILD] Update the scope of the protobuf-java dependency from protobuf to runtime [CELEBORN-1191] Migrate the release script from Maven to SBT [CELEBORN-1194] Add sbt-pgp plugin for publishing signed artifacts [CELEBORN-1198] Keep debug info when use SBT build [CELEBORN-1199] Add LICENSE and NOTICE files for service related sub-projects [CELEBORN-1203] Add LicenseAndNoticeMergeStrategy to resolve inner project LICENSE/NOTICE conflict for shaded client packaging [CELEBORN-1205] Disable Maven local caches to improve SBT building stability","title":"BUILD"},{"location":"community/release_notes/release_note_0.4.0/#documentation","text":"[CELEBORN-822] Add quick start guide [CELEBORN-822] Introduce a quick start guide for running Apache Flink with Apache Celeborn [CELEBORN-823] Add Celeborn architecture document [CELEBORN-824] Add PushData document [CELEBORN-826] Add storage document [CELEBORN-828] Merge Monitoring to Development doc [CELEBORN-831] Add traffic control document [CELEBORN-834] Add fault tolerant document [CELEBORN-849] Document on Master [CELEBORN-853] Document on LifecycleManager [CELEBORN-860] Document on ShuffleClient [CELEBORN-864] Document on blacklist [CELEBORN-869] Document on Integrating Celeborn [CELEBORN-870] Document on usage together with Gluten [CELEBORN-877] Document on SBT [CELEBORN-893] Fix Spark patch list text in Readme [CELEBORN-909] Mention celeborn.worker.directMemoryRatioToResume default value changed in main/0.4 [CELEBORN-927] Correct celeborn.metrics.conf.*.sink.csv.class configuration example for a CSV sink [CELEBORN-927] Guideline to add new RPC messages [CELEBORN-927] Run dev/reformat before you create a new pull request for code style [CELEBORN-948] fix quick start doc about failed to submit flink wordcount [CELEBORN-954] Add documentation about reliable shuffle data storage [CELEBORN-974] Add quick start guide about using MapReduce with Celeborn [CELEBORN-987] README#Build should extend to Java8/11/17 [CELEBORN-991] Remove incorrect spark.metrics.conf [CELEBORN-997] Fix Rolling upgrade broken link [CELEBORN-1010] Update docs about spark.shuffle.service.enabled [CELEBORN-1085] Update metrics doc [CELEBORN-1091] Update docs about how to use error-prone plugin in IDEA [CELEBORN-1101] Update metrics doc to add necessary configuration steps [CELEBORN-1104] Fix SBT documentation incorrect command [CELEBORN-1207] SBT http repository documentation [CELEBORN-1223] Align master and worker metrics of document with MasterSource and WorkerSource [CELEBORN-1247] Output config's alternatives to doc [MINOR] Add the Celeborn Helm Chart doc [MINOR] Updated sbt.md documentation to be consistent with description","title":"Documentation"},{"location":"community/release_notes/release_note_0.4.0/#dependencies","text":"[CELEBORN-742][BUILD] Bump Hadoop 3.2.4 [CELEBORN-821][BUILD] Bump junit from 4.12 to 4.13.2 [CELEBORN-1113] Bump Hadoop client version from 3.2.4 to 3.3.6 [CELEBORN-1125] Bump guava from 14.0.1 to 32.1.3-jre [CELEBORN-1163] Upgrade protobuf from 3.19.2 to 3.21.7 [CELEBORN-1169] Bump Spark from 3.4.1 to 3.4.2 [CELEBORN-1170] Upgrade snappy-java from 1.1.8.2 to 1.1.10.5 [CELEBORN-1173] Upgrade netty version from 4.1.93.Final to 4.1.101.Final [CELEBORN-1184] Update the snakeyaml version from 1.33 to 2.2 [MINOR] upgrade snappy-java from 1.1.8.2 to 1.1.10.5","title":"Dependencies"},{"location":"community/release_notes/release_note_0.4.0/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn(Incubating) 0.4.0-incubating version: Contributors Angerszhuuuu Aravind Patnam Chandni Singh Cheng Pan Erik.fang Fei Wang Fu Chen Kent Yao Kerwin Zhang Keyong Zhou Mridul Muralidharan Shuang SteNicholas Xiduo You exmy gaochao0509 hongzhaoyang jiaoqingbo liangbowen liangyongyuan mingji onebox-li pengqli qinrui sychen wangshengjie xianminglei xiyu.zk xleoken zhouyifan279 zml1206 zwangsheng","title":"Credits"},{"location":"community/release_notes/release_note_0.4.1/","text":"Apache Celeborn\u2122 0.4.1 Release Notes Highlight Improve flusher's robustness Optimize CelebornInputStreamImpl 's memory usage Fix Worker#computeResourceConsumption NullPointerException for userResourceConsumption that does not contain given userIdentifier Fix unregisterShuffle with celeborn.client.spark.fetch.throwsFetchFailure disabled Improvement [CELEBORN-1174] Introduce application dimension resource consumption metrics [CELEBORN-1182] Support application dimension ActiveConnectionCount metric to record the number of registered connections for each application [CELEBORN-1244] Delete redundant remove operations and handle timeout requests in final check [CELEBORN-1248] Improve flusher's robustness [CELEBORN-1259] Improve the default gracePeriod of ThreadUtils#shutdown [CELEBORN-1266] Improve log of current failed workers for WorkerStatusTracker [CELEBORN-1272] Do not increment epoch when retry commit [CELEBORN-1278] Avoid calculating all outstanding requests to improve performance [CELEBORN-1283] TransportClientFactory avoid contention and get or create clientPools quickly [CELEBORN-1288] Prompt configuration items when receiving IdleStateEvent [CELEBORN-1291] Master crashed causing by huge app level worker consumption info [CELEBORN-1292] Remove app level metrics from worker and master [CELEBORN-1298] Support Spark 2.4 with Scala 2.12 [CELEBORN-1300] Optimize CelebornInputStreamImpl 's memory usage [CELEBORN-1301] Catch and throw FetchFailedException in CelebornInputStream#fillBuffer [CELEBORN-1312] Move handleRequestPartitions out of sync block [CELEBORN-1315] Manually close the RocksDB/LevelDB instance when checkVersion throw Exception [CELEBORN-1316] Override toString method for StoreVersion [CELEBORN-1324] Remove unused PrometheusSink class [CELEBORN-1326] FakedRemoteInputChannel use task name of RemoteShuffleInputGateDelegation as owningTaskName [CELEBORN-1339] Mark connection as timedOut in TransportClient#close [CELEBORN-1345] Add a limit to the master's estimated partition size [CELEBORN-1363] AbstractRemoteShuffleInputGateFactory supports celeborn.client.shuffle.compression.codec to configure compression codec [CELEBORN-1376] Push data failed should always release request body [CELEBORN-1379] Catch Throwable for ReadBufferDispatcher thread [CELEBORN-1380] leveldbjni uses org.openlabtesting.leveldbjni to support linux aarch64 platform for leveldb [CELEBORN-1381] Avoid construct TransportConf when creating CelebornInputStream [CELEBORN-1384] Manually excluding workers should not depend on whether the workers are alive [CELEBORN-1386] LevelDBProvider / RocksDBProvider should create non-existent multi-level directory for LevelDB/RocksDB initialization [CELEBORN-1391] Retry when MasterClient receiving a RpcTimeoutException [CELEBORN-1398] Support return leader ip to client [CELEBORN-1399] MR CelebornMapOutputCollector should check exception after flush [CELEBORN-1407] Change log4j2 template appender to file [CELEBORN-1408] workerShuffleCommitTimeout should use millisecond units [CELEBORN-1409] CommitHandler commitFiles RPC supports separate timeout configuration [CELEBORN-1411] Change default log level to INFO when there is no log4j2 config file [CELEBORN-1412] celeborn.client.rpc.*.askTimeout should fallback to celeborn.rpc.askTimeout Stability and Bug Fix [CELEBORN-448] HeartbeatFromApplicationResponse should include manually excluded workers [CELEBORN-863] Fix persisted committed file infos lost [CELEBORN-1252] Fix Worker#computeResourceConsumption NullPointerException for userResourceConsumption that does not contain given userIdentifier [CELEBORN-1271] Fix unregisterShuffle with celeborn.client.spark.fetch.throwsFetchFailure disabled [CELEBORN-1275] Fix bug that callback function may hang when unchecked exception missed [CELEBORN-1282] Fix FetchHandler#handleEndStreamFromClient NullPointerException after recycling stream of CreditStreamManager [CELEBORN-1290] Fix NPE occurring prior to worker registration [CELEBORN-1420] Fix mapreduce job will throw an exit exception after it succeeded Build [CELEBORN-1310] License check add flink-1.19 profile [CELEBORN-1404] Disable SBT ANSI color on extracting info from output [CELEBORN-1405] SBT allows using credential without a realm Documentation [CELEBORN-1260] Improve Spark Configuration of Deploy Spark client for deployment document [CELEBORN-1295] Add tm to Celeborn's website and change repo_url to apache repo Dependencies [CELEBORN-1006] Dependency hadoop-client should exclude hadoop-mapreduce-client dependencies for Hadoop 2 [CELEBORN-1330] Bump rocksdbjni version from 8.5.3 to 8.11.3 [CELEBORN-1331] Remove third-party dependencies in shaded clients' pom [CELEBORN-1366] Bump guava from 32.1.3-jre to 33.1.0-jre Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.1 version: Contributors Angerszhuuuu Cheng Pan Erik.fang Ethan Feng Fei Wang Fu Chen Fulong Li Jiashu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Nicholas Jiang Qingbo Jiao Shaoyun Chen Yanze Jiang Yihe Li","title":"Apache Celeborn\u2122 0.4.1 Release Notes"},{"location":"community/release_notes/release_note_0.4.1/#apache-celeborntm-041-release-notes","text":"","title":"Apache Celeborn\u2122 0.4.1 Release Notes"},{"location":"community/release_notes/release_note_0.4.1/#highlight","text":"Improve flusher's robustness Optimize CelebornInputStreamImpl 's memory usage Fix Worker#computeResourceConsumption NullPointerException for userResourceConsumption that does not contain given userIdentifier Fix unregisterShuffle with celeborn.client.spark.fetch.throwsFetchFailure disabled","title":"Highlight"},{"location":"community/release_notes/release_note_0.4.1/#improvement","text":"[CELEBORN-1174] Introduce application dimension resource consumption metrics [CELEBORN-1182] Support application dimension ActiveConnectionCount metric to record the number of registered connections for each application [CELEBORN-1244] Delete redundant remove operations and handle timeout requests in final check [CELEBORN-1248] Improve flusher's robustness [CELEBORN-1259] Improve the default gracePeriod of ThreadUtils#shutdown [CELEBORN-1266] Improve log of current failed workers for WorkerStatusTracker [CELEBORN-1272] Do not increment epoch when retry commit [CELEBORN-1278] Avoid calculating all outstanding requests to improve performance [CELEBORN-1283] TransportClientFactory avoid contention and get or create clientPools quickly [CELEBORN-1288] Prompt configuration items when receiving IdleStateEvent [CELEBORN-1291] Master crashed causing by huge app level worker consumption info [CELEBORN-1292] Remove app level metrics from worker and master [CELEBORN-1298] Support Spark 2.4 with Scala 2.12 [CELEBORN-1300] Optimize CelebornInputStreamImpl 's memory usage [CELEBORN-1301] Catch and throw FetchFailedException in CelebornInputStream#fillBuffer [CELEBORN-1312] Move handleRequestPartitions out of sync block [CELEBORN-1315] Manually close the RocksDB/LevelDB instance when checkVersion throw Exception [CELEBORN-1316] Override toString method for StoreVersion [CELEBORN-1324] Remove unused PrometheusSink class [CELEBORN-1326] FakedRemoteInputChannel use task name of RemoteShuffleInputGateDelegation as owningTaskName [CELEBORN-1339] Mark connection as timedOut in TransportClient#close [CELEBORN-1345] Add a limit to the master's estimated partition size [CELEBORN-1363] AbstractRemoteShuffleInputGateFactory supports celeborn.client.shuffle.compression.codec to configure compression codec [CELEBORN-1376] Push data failed should always release request body [CELEBORN-1379] Catch Throwable for ReadBufferDispatcher thread [CELEBORN-1380] leveldbjni uses org.openlabtesting.leveldbjni to support linux aarch64 platform for leveldb [CELEBORN-1381] Avoid construct TransportConf when creating CelebornInputStream [CELEBORN-1384] Manually excluding workers should not depend on whether the workers are alive [CELEBORN-1386] LevelDBProvider / RocksDBProvider should create non-existent multi-level directory for LevelDB/RocksDB initialization [CELEBORN-1391] Retry when MasterClient receiving a RpcTimeoutException [CELEBORN-1398] Support return leader ip to client [CELEBORN-1399] MR CelebornMapOutputCollector should check exception after flush [CELEBORN-1407] Change log4j2 template appender to file [CELEBORN-1408] workerShuffleCommitTimeout should use millisecond units [CELEBORN-1409] CommitHandler commitFiles RPC supports separate timeout configuration [CELEBORN-1411] Change default log level to INFO when there is no log4j2 config file [CELEBORN-1412] celeborn.client.rpc.*.askTimeout should fallback to celeborn.rpc.askTimeout","title":"Improvement"},{"location":"community/release_notes/release_note_0.4.1/#stability-and-bug-fix","text":"[CELEBORN-448] HeartbeatFromApplicationResponse should include manually excluded workers [CELEBORN-863] Fix persisted committed file infos lost [CELEBORN-1252] Fix Worker#computeResourceConsumption NullPointerException for userResourceConsumption that does not contain given userIdentifier [CELEBORN-1271] Fix unregisterShuffle with celeborn.client.spark.fetch.throwsFetchFailure disabled [CELEBORN-1275] Fix bug that callback function may hang when unchecked exception missed [CELEBORN-1282] Fix FetchHandler#handleEndStreamFromClient NullPointerException after recycling stream of CreditStreamManager [CELEBORN-1290] Fix NPE occurring prior to worker registration [CELEBORN-1420] Fix mapreduce job will throw an exit exception after it succeeded","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.4.1/#build","text":"[CELEBORN-1310] License check add flink-1.19 profile [CELEBORN-1404] Disable SBT ANSI color on extracting info from output [CELEBORN-1405] SBT allows using credential without a realm","title":"Build"},{"location":"community/release_notes/release_note_0.4.1/#documentation","text":"[CELEBORN-1260] Improve Spark Configuration of Deploy Spark client for deployment document [CELEBORN-1295] Add tm to Celeborn's website and change repo_url to apache repo","title":"Documentation"},{"location":"community/release_notes/release_note_0.4.1/#dependencies","text":"[CELEBORN-1006] Dependency hadoop-client should exclude hadoop-mapreduce-client dependencies for Hadoop 2 [CELEBORN-1330] Bump rocksdbjni version from 8.5.3 to 8.11.3 [CELEBORN-1331] Remove third-party dependencies in shaded clients' pom [CELEBORN-1366] Bump guava from 32.1.3-jre to 33.1.0-jre","title":"Dependencies"},{"location":"community/release_notes/release_note_0.4.1/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.1 version: Contributors Angerszhuuuu Cheng Pan Erik.fang Ethan Feng Fei Wang Fu Chen Fulong Li Jiashu Xiong Kerwin Zhang Keyong Zhou Mridul Muralidharan Nicholas Jiang Qingbo Jiao Shaoyun Chen Yanze Jiang Yihe Li","title":"Credits"},{"location":"community/release_notes/release_note_0.4.2/","text":"Apache Celeborn\u2122 0.4.2 Release Notes [CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1506][BUG] Revert \"[CELEBORN-1036][FOLLOWUP] totalInflightReqs should decrement when batchIdSet contains the batchId to avoid duplicate caller of removeBatch\" [CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1467] celeborn.worker.storage.dirs should support soft link [CELEBORN-1460][FOLLOWUP] MRAppMasterWithCeleborn support uri of absolute conf path for mapreduce.job.cache.files [CELEBORN-1463][FOLLOWUP] Respeact client/server threads num to avoid competitiveness [CELEBORN-1463] Create network memory allocator with celeborn.network.memory.allocator.numArenas [CELEBORN-1457][0.4] Avoid NPE during shuffle data cleanup [CELEBORN-1453] Fix the thread safety bug in getMetrics (#2566) [CELEBORN-1432] ShuffleClientImpl should invoke loadFileGroupInternal only once when using the reduce partition mode (#2567) [MINOR] Bump minikube and kubernetes version of integration test [CELEBORN-1452][0.4] Master follower node metadata is out of sync after installing snapshot [CELEBORN-1182][FOLLOWUP] Fix WorkerSource record application active connection for application dimension ActiveConnectionCount metric [CELEBORN-1448] Use static regex Pattern instances in JavaUtils.timeStringAs and JavaUtils.byteStringAs [CELEBORN-1380][FOLLOWUP] leveldbjni uses org.openlabtesting.leveldbjni to support linux aarch64 platform for leveldb via aarch64 profile [MINOR] Remove incubator in vcs.xml [CELEBORN-1410] Combine multiple ShuffleBlockInfo into a single ShuffleBlockInfo [CELEBORN-1380][FOLLOWUP] Add org.openlabtesting.leveldbjni in BSD 3-clause of LICENSE-binary Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.2 version: Contributors Fei Wang Jiashu Xiong Keyong Zhou Nicholas Jiang Sanskar Modi Shaoyun Chen Xianming Lei Xinyu Wang Yanze Jiang ZHAO ZHAO","title":"Apache Celeborn\u2122 0.4.2 Release Notes"},{"location":"community/release_notes/release_note_0.4.2/#apache-celeborntm-042-release-notes","text":"[CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1506][BUG] Revert \"[CELEBORN-1036][FOLLOWUP] totalInflightReqs should decrement when batchIdSet contains the batchId to avoid duplicate caller of removeBatch\" [CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1467] celeborn.worker.storage.dirs should support soft link [CELEBORN-1460][FOLLOWUP] MRAppMasterWithCeleborn support uri of absolute conf path for mapreduce.job.cache.files [CELEBORN-1463][FOLLOWUP] Respeact client/server threads num to avoid competitiveness [CELEBORN-1463] Create network memory allocator with celeborn.network.memory.allocator.numArenas [CELEBORN-1457][0.4] Avoid NPE during shuffle data cleanup [CELEBORN-1453] Fix the thread safety bug in getMetrics (#2566) [CELEBORN-1432] ShuffleClientImpl should invoke loadFileGroupInternal only once when using the reduce partition mode (#2567) [MINOR] Bump minikube and kubernetes version of integration test [CELEBORN-1452][0.4] Master follower node metadata is out of sync after installing snapshot [CELEBORN-1182][FOLLOWUP] Fix WorkerSource record application active connection for application dimension ActiveConnectionCount metric [CELEBORN-1448] Use static regex Pattern instances in JavaUtils.timeStringAs and JavaUtils.byteStringAs [CELEBORN-1380][FOLLOWUP] leveldbjni uses org.openlabtesting.leveldbjni to support linux aarch64 platform for leveldb via aarch64 profile [MINOR] Remove incubator in vcs.xml [CELEBORN-1410] Combine multiple ShuffleBlockInfo into a single ShuffleBlockInfo [CELEBORN-1380][FOLLOWUP] Add org.openlabtesting.leveldbjni in BSD 3-clause of LICENSE-binary","title":"Apache Celeborn\u2122 0.4.2 Release Notes"},{"location":"community/release_notes/release_note_0.4.2/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.2 version: Contributors Fei Wang Jiashu Xiong Keyong Zhou Nicholas Jiang Sanskar Modi Shaoyun Chen Xianming Lei Xinyu Wang Yanze Jiang ZHAO ZHAO","title":"Credits"},{"location":"community/release_notes/release_note_0.4.3/","text":"Apache Celeborn\u2122 0.4.3 Release Notes [CELEBORN-1686][FOLLOWUP] Avoid NPE when clean up data pusher [CELEBORN-1725][FOLLOWUP] Optimize isAllMapTasksEnd performance [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1485][0.4] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1556][0.4] Update Github actions to v4 [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1677][BUILD] Update SCM information for SBT build configuration [CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7 [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1058][FOLLOWUP] Update name of master service from MasterSys to Master in startup document [CELEBORN-1506][FOLLOWUP] InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight [CELEBORN-1544][0.4] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1496][0.4] Differentiate map results with only different stageAttemptId [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1570] Fix flaky test - monitor non-critical error metrics in DeviceMonitorSuite [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1520] Minor logging fix for AppDiskUsageMetric and Fixed UTs [CELEBORN-1522] Fix applicationId extraction from shuffle key Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.3 version: Contributors Aravind Patnam Bowen Liang Cheng Pan Fu Chen Sanskar Modi Shuang SteNicholas Fei Wang Xianming Lei codenohup jiang13021 Shaoyun Chen wuziyi","title":"Apache Celeborn\u2122 0.4.3 Release Notes"},{"location":"community/release_notes/release_note_0.4.3/#apache-celeborntm-043-release-notes","text":"[CELEBORN-1686][FOLLOWUP] Avoid NPE when clean up data pusher [CELEBORN-1725][FOLLOWUP] Optimize isAllMapTasksEnd performance [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1485][0.4] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1556][0.4] Update Github actions to v4 [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1677][BUILD] Update SCM information for SBT build configuration [CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7 [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1058][FOLLOWUP] Update name of master service from MasterSys to Master in startup document [CELEBORN-1506][FOLLOWUP] InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight [CELEBORN-1544][0.4] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1496][0.4] Differentiate map results with only different stageAttemptId [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1570] Fix flaky test - monitor non-critical error metrics in DeviceMonitorSuite [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1520] Minor logging fix for AppDiskUsageMetric and Fixed UTs [CELEBORN-1522] Fix applicationId extraction from shuffle key","title":"Apache Celeborn\u2122 0.4.3 Release Notes"},{"location":"community/release_notes/release_note_0.4.3/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.4.3 version: Contributors Aravind Patnam Bowen Liang Cheng Pan Fu Chen Sanskar Modi Shuang SteNicholas Fei Wang Xianming Lei codenohup jiang13021 Shaoyun Chen wuziyi","title":"Credits"},{"location":"community/release_notes/release_note_0.5.0/","text":"Apache Celeborn\u2122 0.5.0 Release Notes Highlight Support TLS for internal communication Support Flink 1.19 Support Java 21 Support memory storage(experimental) Memory usage and performance optimization Enhanced metrics and HTTP APIs Improvement [CELEBORN-1468] update dashboard layout for Celeborn 0.5 [CELEBORN-1467] celeborn.worker.storage.dirs should support soft link [CELEBORN-1463][FOLLOWUP] Respeact client/server threads num to avoid competitiveness [CELEBORN-1463] Create network memory allocator with celeborn.network.memory.allocator.numArenas [CELEBORN-1461] Fix Celeborn ipv6 local hostname resolution [CELEBORN-1460][FOLLOWUP] MRAppMasterWithCeleborn support uri of absolute conf path for mapreduce.job.cache.files [CELEBORN-1460] MRAppMasterWithCeleborn supports setting mapreduce.celeborn.master.endpoints via environment variable CELEBORN_MASTER_ENDPOINTS [CELEBORN-1459] Introduce CleanTaskQueueSize and CleanExpiredShuffleKeysTime to record situation of cleaning up expired shuffle keys [CELEBORN-1453] Fix the thread safety bug in getMetrics [CELEBORN-1448] Use static regex Pattern instances in JavaUtils.timeStringAs and JavaUtils.byteStringAs [CELEBORN-1443] Remove ratis dependencies from common module [CELEBORN-1441] RocksDBLogger uses Logger#Logger(InfoLogLevel) instead of deprecated constructor of o.rocksdb.Logger [CELEBORN-1434] Support MRAppMasterWithCeleborn to disable job recovery and job reduce slow start by default [CELEBORN-1430] TransportClientFactory should check whether handler is null when creating client [CELEBORN-1428] WrappedRpcResponseCallback should stop timer of PrimaryPushDataTime and ReplicaPushDataTime for failure [CELEBORN-1427] Add Capacity metrics for Celeborn [CELEBORN-1425][HELM] Add helm chart unit tests to ensure manifests are rendered as expected [CELEBORN-1423][HELM] Refactor chart templates and update readme docs [CELEBORN-1422] Remove tmpRecords array when collecting written count metrics [CELEBORN-1421] Refine code in master to reduce unnecessary sync to get workers/lostworkers/shutdownWorkers [CELEBORN-1419] Avoid adding shuffle id repeatedly [CELEBORN-1416] Add CI for helm charts lint and test [CELEBORN-1415][HELM] Move all the master and worker resource manifests to dedicated directories respectively [CELEBORN-1414] PartitionFilesSorter resolve DiskFileInfo without sorting lock [CELEBORN-1406] Use Files. getLastModifiedTime to find last modified time instead of file.lastModified [CELEBORN-1402][FOLLOWUP] Correct document of setting spark.executor.userClassPathFirst to false [CELEBORN-1402] SparkShuffleManager print warning log for spark.executor.userClassPathFirst=true with ShuffleManager defined in user jar [CELEBORN-1401] Add SSL support for ratis communication [CELEBORN-1392] TransportClientFactory should regard as zero for negative celeborn. .io.connectTimeout/connectionTimeout [CELEBORN-1390] ServletContextHandler should allow null path info to avoid redirection [CELEBORN-1387] Allow more retries when requesting more memory in sortbasedpusher [CELEBORN-1385] HttpServer support idle timeout configuration of Jetty [CELEBORN-1374] Refactor SortBuffer and PartitionSortedBuffer [CELEBORN-1372] Update ControlMessages to handle ApplicationMeta and ApplicationMetaRequest [CELEBORN-1371] Update ratis with internal port endpoint address as well [CELEBORN-1370] Exception with authentication is enabled when creating send-application-meta thread pool [CELEBORN-1369] Support for disable fallback to Spark's default shuffle [CELEBORN-1368] Log celeborn config for debugging purposes [CELEBORN-1365] Ensure that a client cannot update the metadata belonging to a different application [CELEBORN-1362] Remove unnecessary configuration celeborn.client.flink.inputGate.minMemory and celeborn.client.flink.resultPartition.minMemory [CELEBORN-1361] MaxInFlightPerWorker should use the value provided by PushStrategy [CELEBORN-1360] Ensure that a client cannot push or fetch data belonging to a different application [CELEBORN-1359] Support Netty Logging at the network layer [CELEBORN-1357] AbstractRemoteShuffleResultPartitionFactory should remove the check of shuffle compression codec [CELEBORN-1356] Split rpc module into rpc_app and rpc_service [CELEBORN-1354][FOLLOWUP] Split rpc_app into rpc_app_lifecyclemanager and rpc_app_client [CELEBORN-1354] auto ssl for rpc_app transport module [CELEBORN-1351] Introduce SSLFactory and enable TLS support [CELEBORN-1349] Add SSL related configs and support for ReloadingX509TrustManager [CELEBORN-1348] Update infrastructure for SSL communication [CELEBORN-1346] Add build changes and test resources for ssl support [CELEBORN-1341] Improve Celeborn document [CELEBORN-1337] Remove unused fields from HeartbeatFromApplicationResponse [CELEBORN-1336] Remove client partition split pool [CELEBORN-1328] Introduce ActiveSlotsCount metric to monitor the number of active slots [CELEBORN-1327] Support Spark 3.5 with JDK21 [CELEBORN-1323] Introduce ShutdownWorkerCount metric to record the count of workers in shutdown list [CELEBORN-1322] Rename LostWorkers metric to LostWorkerCount to align the naming style [CELEBORN-1321] Change noisy expire shuffle log to debug level and aggregate log [CELEBORN-1320] Use ReviveManager for soft splits [CELEBORN-1317][FOLLOWUP] Update default value of celeborn.master.http.maxWorkerThreads and celeborn.worker.http.maxWorkerThreads via QueuedThreadPool [CELEBORN-1317][FOLLOWUP] ServerConnector supports celeborn.master.http.stopTimeout and celeborn.worker.http.stopTimeout [CELEBORN-1317][FOLLOWUP] HttpServer avoid Jetty's acceptor thread shrink for stopping [CELEBORN-1317] Refine celeborn http server and support swagger ui [CELEBORN-1314] add capacity-bounded inbox for rpc endpoint [CELEBORN-1313] Custom Network Location Aware Replication [CELEBORN-1309][FOLLOWUP] Cap the max memory can be used for sort buffer [CELEBORN-1309] Support adaptive management of memory threshold for SortBasedWriter [CELEBORN-1307][FOLLOWUP] Introduce worker detail module for dashboard frontend [CELEBORN-1307] Introduce worker module for dashboard frontend [CELEBORN-1306] Introduce master module for dashboard frontend [CELEBORN-1305][FOLLOWUP] Unify application module naming [CELEBORN-1305][FOLLOWUP] Unify application module naming [CELEBORN-1305] Introduce application module for dashboard frontend [CELEBORN-1304] Introduce tenant module for dashboard frontend [CELEBORN-1303] Introduce API request module for dashboard frontend [CELEBORN-1302] Introduce overview module for dashboard frontend [CELEBORN-1299] Introduce JVM profiling in Celeborn Worker using async-profiler [CELEBORN-1297] Change DB script column from user to name [CELEBORN-1296] Introduce celeborn.dynamicConfig.store.fs.path config to configure the path of dynamic config file for fs store backend [CELEBORN-1293] Output received signals at master and worker [CELEBORN-1287] Improve both combine and sort operation of shuffle read for CelebornShuffleReader [CELEBRON-1285] Add check tenantConfig.getConfigs().isEmpty() in getTenantUserConfigFromCache [CELEBORN-1277] Add celeborn.quota.enabled at Master and Client side to enable checking quota [CELEBORN-1276] Move checkQuotaSpaceAvailable from Quota to QuotaManager [CELEBORN-1273] Move java classes under scala src to java [CELEBORN-1267] Add config to control worker check in CelebornShuffleFallbackPolicyRunner [CELEBORN-1265][FOLLOWUP] Remove unnecessary GlutenShuffleDependencyHelper [CELEBORN-1265] Fix batches read metric for gluten columnar shuffle [CELEBORN-1264] ConfigService supports TENANT_USER config level [CELEBORN-1261] Add auth support to client [CELEBORN-1257][FOLLOWUP] Removed the additional secured port from Celeborn Master [CELEBORN-1257] Adds a secured port in Celeborn Master for secure communication with LifecycleManager [CELEBORN-1256] Added internal port and auth support to Celeborn worker [CELEBORN-1254][FOLLOWUP] Rename celeborn.worker.sortPartition.reservedMemory.enabled to celeborn.worker.sortPartition.prefetch.enabled [CELEBORN-1254] PartitionFilesSorter seeks to position of each block and does not warm up for non-hdfs files [CELEBORN-1251] Connect the server and client bootstraps to RpcEnv [CELEBORN-1249] Add LICENSE of Celeborn Web [CELEBORN-1245][FOLLOWUP] Fix SendWorkerEvent in HA mode [CELEBORN-1245] Support Celeborn Master(Leader) to manage workers [CELEBORN-1242] Unify celeborn thread name format [CELEBORN-1241][FOLLOWUP] Fix duplicate CelebornRackResolver issue for SingleMasterMetaManager [CELEBORN-1241] Introduce hot load for CelebornRackResolver [CELEBORN-1240][FOLLOWUP] Web lint check uses different groups [CELEBORN-1240] Introduce Husky Configuration to Celeborn Web [CELEBORN-1239][FOLLOWUP] Deprecate celeborn.quota.configuration.path config [CELEBORN-1239] Celeborn QuotaManager support use ConfigService and support default quota setting [CELEBORN-1237] Refactor metrics name [CELEBORN-1236][FOLLOWUP] Gauge is_terminating, is_terminated and is_shutdown should represent a single numerical value [CELEBORN-1235] Start test nodes in random ports to allow multiple builds run in the same ci server [CELEBORN-1234] Master should persist the application meta in Ratis and push it to the Workers [CELEBORN-1232] Add Menu to Celeborn Web [CELEBORN-1231] Support baseline implementation of Celeborn Web [CELEBORN-1230] Check working directory read and write error without init delay [CELEBORN-1229] Support for application registration with Celeborn Master [CELEBORN-1213] Add pronunciation of Celeborn in README.md [CELEBORN-1212] Support for Anonymous SASL Mechanism [CELEBORN-1209] Print Warning Log if User use Celeborn with enabled Spark ShuffleTracking [CELEBORN-1208] Unify parse uniqueId to WorkerInfo [CELEBORN-1195] Use batch rack resolve when restore meta from file [CELEBORN-1179] Add support in Celeborn Workers to fetch application meta from the Master [CELEBORN-1172] Support dynamic switch shuffle push write mode based on partition number [CELEBORN-1144] Batch OpenStream RPCs [CELEBORN-1133] Refactor fileinfo [CELEBORN-1078] Log info to indicate columnar shuffle writer take effect [CELEBORN-1054] Support db based dynamic config service [CELEBORN-1051] Add isDynamic property for CelebornConf [CELEBORN-1012] Add a dedicated internal port in Master to talk to Workers and other Masters [CELEBORN-914] Support memory file storage [MINOR] Update log level of CommitFiles success for CommitHandler from error to info [MINOR] Unifiy license format of pom.xml [MINOR] Improve SuiteJ of client-flink module [MINOR] Fix typos [MINOR] Fix typo in TransportClient [INFRA][FOLLOWUP] Fix copyright of mkdocs.yml for graduation Stability and Bug Fix [CELEBORN-1462] Fix layout of DeviceCelebornTotalBytes, DeviceCelebornFreeBytes, RunningApplicationCount and DecommissionWorkerCount in celeborn-dashboard.json [CELEBORN-1456] Fix LICENSE dependencies in LICENSE-binary [CELEBORN-1456][FOLLOWUP] Fix license issue [CELEBORN-1450] MRAppMasterWithCeleborn should get FileSystem via mapreduce.job.dir for HDFS federation [CELEBORN-1449] Fix JavaUtils#deleteRecursivelyUsingJavaIO to skip non-existing file input [CELEBORN-1424] Fix getChunk NPE when enable local read [CELEBORN-1393][HELM] Resource labels and selector labels are duplicated [CELEBORN-1317][FOLLOWUP] Fix threadDump UT stuck issue [CELEBORN-1317][FOLLOWUP] Improve parameters, description and document of REST API [CELEBORN-1317][FOLLOWUP] Retry to setup mini cluster if the cause isBindException [CELEBORN-1310][FLINK] Support Flink 1.19 [CELEBORN-1280] Change default value of celeborn.worker.graceful.shutdown.recoverDbBackend to ROCKSDB [CELEBORN-1270] Introduce PbPackedPartitionLocations to (de-)serialize PartitionLocations more efficiently [CELEBORN-1222] Fix Celeborn worker won't record HDFS writer [CELEBORN-1016] Fix IPv6 host address resolve issue [MINOR] Fix typos and wrong package name [MINOR] Fix typos in profile name when checking dependencies Build [CELEBORN-1438] Exclude celeborn-service_xx-test jar [CELEBORN-1331] Remove third-party dependencies in shaded clients' pom [CELEBORN-1263] Fix Master HA mode without internal port error Documentation [CELEBORN-1369][FOLLOWUP] Improve docs for shuffle fallback policy [CELEBORN-1353] Document Celeborn security - authentication and SSL support [CELEBORN-1341][FOLLOWUP] Improve Celeborn document [CELEBORN-1317][FOLLOWUP] Remove Incubating from REST API Documentation [CELEBORN-1311] Developers Doc introduce Slots allocation [CELEBORN-1286] Introduce configuration.md to document dynamic config and config service [CELEBORN-1284][FOLLOWUP] Fix license style of quota_management.md [CELEBORN-1284][DOC] Add document about QuotaManager based on ConfigService [CELEBORN-1134][FOLLOWUP] Add execution.batch-shuffle-mode: ALL_EXCHANGES_BLOCKING to Flink Configuration of Deploy Flink client [MINOR] Fix typo in developer docs - overview [MINOR] Fix style and Gluten link in Developers Doc Dependencies [CELEBORN-1400] Bump Ratis version from 2.5.1 to 3.0.1 [CELEBORN-1396] Bump Netty from 4.1.107.Final to 4.1.109.Final [CELEBORN-1395] Bump RoaringBitmap version from 1.0.5 to 1.0.6 [CELEBORN-1394] Bump Spark from 3.4.2 to 3.4.3 [CELEBORN-1389] Bump Dropwizard version from 3.2.6 to 4.2.25 [CELEBORN-1382] Bump RoaringBitmap version from 0.9.32 to 1.0.5 [CELEBORN-1281] Bump Spark from 3.5.0 to 3.5.1 [CELEBORN-1262] Bump Spark from 3.3.3 to 3.3.4 [CELEBORN-1243] Bump Flink from 1.18.0 to 1.18.1 [CELEBORN-1221] Bump Flink from 1.17.0 to 1.17.2 [BUILD] Bump netty version to latest 4.1.107.Final Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.0 version: Contributors albin3 AngersZhuuuu Aravind Patnam binjie yang cfmcgrady ChenYi015 CodingCat Curtis Howard cxzl25 ErikFang FMX ForVic huangxiaopingRD jiaoqingbo kerwin-zk labbomb leixm miyuesc Mridul Muralidharan mridulm onebox-li otterc pan3793 radeity RexXiong SteNicholas tiny-dust turboFei waitinfuture xianminglei xinyuwang1 zwangsheng","title":"Apache Celeborn\u2122 0.5.0 Release Notes"},{"location":"community/release_notes/release_note_0.5.0/#apache-celeborntm-050-release-notes","text":"","title":"Apache Celeborn\u2122 0.5.0 Release Notes"},{"location":"community/release_notes/release_note_0.5.0/#highlight","text":"Support TLS for internal communication Support Flink 1.19 Support Java 21 Support memory storage(experimental) Memory usage and performance optimization Enhanced metrics and HTTP APIs","title":"Highlight"},{"location":"community/release_notes/release_note_0.5.0/#improvement","text":"[CELEBORN-1468] update dashboard layout for Celeborn 0.5 [CELEBORN-1467] celeborn.worker.storage.dirs should support soft link [CELEBORN-1463][FOLLOWUP] Respeact client/server threads num to avoid competitiveness [CELEBORN-1463] Create network memory allocator with celeborn.network.memory.allocator.numArenas [CELEBORN-1461] Fix Celeborn ipv6 local hostname resolution [CELEBORN-1460][FOLLOWUP] MRAppMasterWithCeleborn support uri of absolute conf path for mapreduce.job.cache.files [CELEBORN-1460] MRAppMasterWithCeleborn supports setting mapreduce.celeborn.master.endpoints via environment variable CELEBORN_MASTER_ENDPOINTS [CELEBORN-1459] Introduce CleanTaskQueueSize and CleanExpiredShuffleKeysTime to record situation of cleaning up expired shuffle keys [CELEBORN-1453] Fix the thread safety bug in getMetrics [CELEBORN-1448] Use static regex Pattern instances in JavaUtils.timeStringAs and JavaUtils.byteStringAs [CELEBORN-1443] Remove ratis dependencies from common module [CELEBORN-1441] RocksDBLogger uses Logger#Logger(InfoLogLevel) instead of deprecated constructor of o.rocksdb.Logger [CELEBORN-1434] Support MRAppMasterWithCeleborn to disable job recovery and job reduce slow start by default [CELEBORN-1430] TransportClientFactory should check whether handler is null when creating client [CELEBORN-1428] WrappedRpcResponseCallback should stop timer of PrimaryPushDataTime and ReplicaPushDataTime for failure [CELEBORN-1427] Add Capacity metrics for Celeborn [CELEBORN-1425][HELM] Add helm chart unit tests to ensure manifests are rendered as expected [CELEBORN-1423][HELM] Refactor chart templates and update readme docs [CELEBORN-1422] Remove tmpRecords array when collecting written count metrics [CELEBORN-1421] Refine code in master to reduce unnecessary sync to get workers/lostworkers/shutdownWorkers [CELEBORN-1419] Avoid adding shuffle id repeatedly [CELEBORN-1416] Add CI for helm charts lint and test [CELEBORN-1415][HELM] Move all the master and worker resource manifests to dedicated directories respectively [CELEBORN-1414] PartitionFilesSorter resolve DiskFileInfo without sorting lock [CELEBORN-1406] Use Files. getLastModifiedTime to find last modified time instead of file.lastModified [CELEBORN-1402][FOLLOWUP] Correct document of setting spark.executor.userClassPathFirst to false [CELEBORN-1402] SparkShuffleManager print warning log for spark.executor.userClassPathFirst=true with ShuffleManager defined in user jar [CELEBORN-1401] Add SSL support for ratis communication [CELEBORN-1392] TransportClientFactory should regard as zero for negative celeborn. .io.connectTimeout/connectionTimeout [CELEBORN-1390] ServletContextHandler should allow null path info to avoid redirection [CELEBORN-1387] Allow more retries when requesting more memory in sortbasedpusher [CELEBORN-1385] HttpServer support idle timeout configuration of Jetty [CELEBORN-1374] Refactor SortBuffer and PartitionSortedBuffer [CELEBORN-1372] Update ControlMessages to handle ApplicationMeta and ApplicationMetaRequest [CELEBORN-1371] Update ratis with internal port endpoint address as well [CELEBORN-1370] Exception with authentication is enabled when creating send-application-meta thread pool [CELEBORN-1369] Support for disable fallback to Spark's default shuffle [CELEBORN-1368] Log celeborn config for debugging purposes [CELEBORN-1365] Ensure that a client cannot update the metadata belonging to a different application [CELEBORN-1362] Remove unnecessary configuration celeborn.client.flink.inputGate.minMemory and celeborn.client.flink.resultPartition.minMemory [CELEBORN-1361] MaxInFlightPerWorker should use the value provided by PushStrategy [CELEBORN-1360] Ensure that a client cannot push or fetch data belonging to a different application [CELEBORN-1359] Support Netty Logging at the network layer [CELEBORN-1357] AbstractRemoteShuffleResultPartitionFactory should remove the check of shuffle compression codec [CELEBORN-1356] Split rpc module into rpc_app and rpc_service [CELEBORN-1354][FOLLOWUP] Split rpc_app into rpc_app_lifecyclemanager and rpc_app_client [CELEBORN-1354] auto ssl for rpc_app transport module [CELEBORN-1351] Introduce SSLFactory and enable TLS support [CELEBORN-1349] Add SSL related configs and support for ReloadingX509TrustManager [CELEBORN-1348] Update infrastructure for SSL communication [CELEBORN-1346] Add build changes and test resources for ssl support [CELEBORN-1341] Improve Celeborn document [CELEBORN-1337] Remove unused fields from HeartbeatFromApplicationResponse [CELEBORN-1336] Remove client partition split pool [CELEBORN-1328] Introduce ActiveSlotsCount metric to monitor the number of active slots [CELEBORN-1327] Support Spark 3.5 with JDK21 [CELEBORN-1323] Introduce ShutdownWorkerCount metric to record the count of workers in shutdown list [CELEBORN-1322] Rename LostWorkers metric to LostWorkerCount to align the naming style [CELEBORN-1321] Change noisy expire shuffle log to debug level and aggregate log [CELEBORN-1320] Use ReviveManager for soft splits [CELEBORN-1317][FOLLOWUP] Update default value of celeborn.master.http.maxWorkerThreads and celeborn.worker.http.maxWorkerThreads via QueuedThreadPool [CELEBORN-1317][FOLLOWUP] ServerConnector supports celeborn.master.http.stopTimeout and celeborn.worker.http.stopTimeout [CELEBORN-1317][FOLLOWUP] HttpServer avoid Jetty's acceptor thread shrink for stopping [CELEBORN-1317] Refine celeborn http server and support swagger ui [CELEBORN-1314] add capacity-bounded inbox for rpc endpoint [CELEBORN-1313] Custom Network Location Aware Replication [CELEBORN-1309][FOLLOWUP] Cap the max memory can be used for sort buffer [CELEBORN-1309] Support adaptive management of memory threshold for SortBasedWriter [CELEBORN-1307][FOLLOWUP] Introduce worker detail module for dashboard frontend [CELEBORN-1307] Introduce worker module for dashboard frontend [CELEBORN-1306] Introduce master module for dashboard frontend [CELEBORN-1305][FOLLOWUP] Unify application module naming [CELEBORN-1305][FOLLOWUP] Unify application module naming [CELEBORN-1305] Introduce application module for dashboard frontend [CELEBORN-1304] Introduce tenant module for dashboard frontend [CELEBORN-1303] Introduce API request module for dashboard frontend [CELEBORN-1302] Introduce overview module for dashboard frontend [CELEBORN-1299] Introduce JVM profiling in Celeborn Worker using async-profiler [CELEBORN-1297] Change DB script column from user to name [CELEBORN-1296] Introduce celeborn.dynamicConfig.store.fs.path config to configure the path of dynamic config file for fs store backend [CELEBORN-1293] Output received signals at master and worker [CELEBORN-1287] Improve both combine and sort operation of shuffle read for CelebornShuffleReader [CELEBRON-1285] Add check tenantConfig.getConfigs().isEmpty() in getTenantUserConfigFromCache [CELEBORN-1277] Add celeborn.quota.enabled at Master and Client side to enable checking quota [CELEBORN-1276] Move checkQuotaSpaceAvailable from Quota to QuotaManager [CELEBORN-1273] Move java classes under scala src to java [CELEBORN-1267] Add config to control worker check in CelebornShuffleFallbackPolicyRunner [CELEBORN-1265][FOLLOWUP] Remove unnecessary GlutenShuffleDependencyHelper [CELEBORN-1265] Fix batches read metric for gluten columnar shuffle [CELEBORN-1264] ConfigService supports TENANT_USER config level [CELEBORN-1261] Add auth support to client [CELEBORN-1257][FOLLOWUP] Removed the additional secured port from Celeborn Master [CELEBORN-1257] Adds a secured port in Celeborn Master for secure communication with LifecycleManager [CELEBORN-1256] Added internal port and auth support to Celeborn worker [CELEBORN-1254][FOLLOWUP] Rename celeborn.worker.sortPartition.reservedMemory.enabled to celeborn.worker.sortPartition.prefetch.enabled [CELEBORN-1254] PartitionFilesSorter seeks to position of each block and does not warm up for non-hdfs files [CELEBORN-1251] Connect the server and client bootstraps to RpcEnv [CELEBORN-1249] Add LICENSE of Celeborn Web [CELEBORN-1245][FOLLOWUP] Fix SendWorkerEvent in HA mode [CELEBORN-1245] Support Celeborn Master(Leader) to manage workers [CELEBORN-1242] Unify celeborn thread name format [CELEBORN-1241][FOLLOWUP] Fix duplicate CelebornRackResolver issue for SingleMasterMetaManager [CELEBORN-1241] Introduce hot load for CelebornRackResolver [CELEBORN-1240][FOLLOWUP] Web lint check uses different groups [CELEBORN-1240] Introduce Husky Configuration to Celeborn Web [CELEBORN-1239][FOLLOWUP] Deprecate celeborn.quota.configuration.path config [CELEBORN-1239] Celeborn QuotaManager support use ConfigService and support default quota setting [CELEBORN-1237] Refactor metrics name [CELEBORN-1236][FOLLOWUP] Gauge is_terminating, is_terminated and is_shutdown should represent a single numerical value [CELEBORN-1235] Start test nodes in random ports to allow multiple builds run in the same ci server [CELEBORN-1234] Master should persist the application meta in Ratis and push it to the Workers [CELEBORN-1232] Add Menu to Celeborn Web [CELEBORN-1231] Support baseline implementation of Celeborn Web [CELEBORN-1230] Check working directory read and write error without init delay [CELEBORN-1229] Support for application registration with Celeborn Master [CELEBORN-1213] Add pronunciation of Celeborn in README.md [CELEBORN-1212] Support for Anonymous SASL Mechanism [CELEBORN-1209] Print Warning Log if User use Celeborn with enabled Spark ShuffleTracking [CELEBORN-1208] Unify parse uniqueId to WorkerInfo [CELEBORN-1195] Use batch rack resolve when restore meta from file [CELEBORN-1179] Add support in Celeborn Workers to fetch application meta from the Master [CELEBORN-1172] Support dynamic switch shuffle push write mode based on partition number [CELEBORN-1144] Batch OpenStream RPCs [CELEBORN-1133] Refactor fileinfo [CELEBORN-1078] Log info to indicate columnar shuffle writer take effect [CELEBORN-1054] Support db based dynamic config service [CELEBORN-1051] Add isDynamic property for CelebornConf [CELEBORN-1012] Add a dedicated internal port in Master to talk to Workers and other Masters [CELEBORN-914] Support memory file storage [MINOR] Update log level of CommitFiles success for CommitHandler from error to info [MINOR] Unifiy license format of pom.xml [MINOR] Improve SuiteJ of client-flink module [MINOR] Fix typos [MINOR] Fix typo in TransportClient [INFRA][FOLLOWUP] Fix copyright of mkdocs.yml for graduation","title":"Improvement"},{"location":"community/release_notes/release_note_0.5.0/#stability-and-bug-fix","text":"[CELEBORN-1462] Fix layout of DeviceCelebornTotalBytes, DeviceCelebornFreeBytes, RunningApplicationCount and DecommissionWorkerCount in celeborn-dashboard.json [CELEBORN-1456] Fix LICENSE dependencies in LICENSE-binary [CELEBORN-1456][FOLLOWUP] Fix license issue [CELEBORN-1450] MRAppMasterWithCeleborn should get FileSystem via mapreduce.job.dir for HDFS federation [CELEBORN-1449] Fix JavaUtils#deleteRecursivelyUsingJavaIO to skip non-existing file input [CELEBORN-1424] Fix getChunk NPE when enable local read [CELEBORN-1393][HELM] Resource labels and selector labels are duplicated [CELEBORN-1317][FOLLOWUP] Fix threadDump UT stuck issue [CELEBORN-1317][FOLLOWUP] Improve parameters, description and document of REST API [CELEBORN-1317][FOLLOWUP] Retry to setup mini cluster if the cause isBindException [CELEBORN-1310][FLINK] Support Flink 1.19 [CELEBORN-1280] Change default value of celeborn.worker.graceful.shutdown.recoverDbBackend to ROCKSDB [CELEBORN-1270] Introduce PbPackedPartitionLocations to (de-)serialize PartitionLocations more efficiently [CELEBORN-1222] Fix Celeborn worker won't record HDFS writer [CELEBORN-1016] Fix IPv6 host address resolve issue [MINOR] Fix typos and wrong package name [MINOR] Fix typos in profile name when checking dependencies","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.5.0/#build","text":"[CELEBORN-1438] Exclude celeborn-service_xx-test jar [CELEBORN-1331] Remove third-party dependencies in shaded clients' pom [CELEBORN-1263] Fix Master HA mode without internal port error","title":"Build"},{"location":"community/release_notes/release_note_0.5.0/#documentation","text":"[CELEBORN-1369][FOLLOWUP] Improve docs for shuffle fallback policy [CELEBORN-1353] Document Celeborn security - authentication and SSL support [CELEBORN-1341][FOLLOWUP] Improve Celeborn document [CELEBORN-1317][FOLLOWUP] Remove Incubating from REST API Documentation [CELEBORN-1311] Developers Doc introduce Slots allocation [CELEBORN-1286] Introduce configuration.md to document dynamic config and config service [CELEBORN-1284][FOLLOWUP] Fix license style of quota_management.md [CELEBORN-1284][DOC] Add document about QuotaManager based on ConfigService [CELEBORN-1134][FOLLOWUP] Add execution.batch-shuffle-mode: ALL_EXCHANGES_BLOCKING to Flink Configuration of Deploy Flink client [MINOR] Fix typo in developer docs - overview [MINOR] Fix style and Gluten link in Developers Doc","title":"Documentation"},{"location":"community/release_notes/release_note_0.5.0/#dependencies","text":"[CELEBORN-1400] Bump Ratis version from 2.5.1 to 3.0.1 [CELEBORN-1396] Bump Netty from 4.1.107.Final to 4.1.109.Final [CELEBORN-1395] Bump RoaringBitmap version from 1.0.5 to 1.0.6 [CELEBORN-1394] Bump Spark from 3.4.2 to 3.4.3 [CELEBORN-1389] Bump Dropwizard version from 3.2.6 to 4.2.25 [CELEBORN-1382] Bump RoaringBitmap version from 0.9.32 to 1.0.5 [CELEBORN-1281] Bump Spark from 3.5.0 to 3.5.1 [CELEBORN-1262] Bump Spark from 3.3.3 to 3.3.4 [CELEBORN-1243] Bump Flink from 1.18.0 to 1.18.1 [CELEBORN-1221] Bump Flink from 1.17.0 to 1.17.2 [BUILD] Bump netty version to latest 4.1.107.Final","title":"Dependencies"},{"location":"community/release_notes/release_note_0.5.0/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.0 version: Contributors albin3 AngersZhuuuu Aravind Patnam binjie yang cfmcgrady ChenYi015 CodingCat Curtis Howard cxzl25 ErikFang FMX ForVic huangxiaopingRD jiaoqingbo kerwin-zk labbomb leixm miyuesc Mridul Muralidharan mridulm onebox-li otterc pan3793 radeity RexXiong SteNicholas tiny-dust turboFei waitinfuture xianminglei xinyuwang1 zwangsheng","title":"Credits"},{"location":"community/release_notes/release_note_0.5.1/","text":"Apache Celeborn\u2122 0.5.1 Release Notes Highlight Fix an issue that may cause data loss Improve shuffle read performance Improvements [CELEBORN-1516] DynamicConfigServiceFactory should support singleton [CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1495] CelebornColumnDictionary supports dictionary of float and double column type [CELEBORN-1491][FOLLOWUP] Add flusher working queue size metric into grafana dashboard [CELEBORN-1489] Update Flink support with authentication support [CELEBORN-1485] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1479] Report register shuffle failed reason in exception [CELEBORN-1476] Enhance the RESTful response error msg [CELEBORN-1472] Reduce CongestionController#userBufferStatuses call times [CELEBORN-1459][FOLLOWUP] Introduce CleanTaskQueueSize and CleanExpiredShuffleKeysTime to record situation of cleaning up expired shuffle keys [CELEBORN-1446] Enable chunk prefetch when initialize CelebornInputStream [CELEBORN-914][FOLLOWUP] optimize write and sort logic for memory storage Stability and Bug Fix [CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1506][BUG] Revert \"[CELEBORN-1036][FOLLOWUP] totalInflightReqs should decrement when batchIdSet contains the batchId to avoid duplicate caller of removeBatch\" [CELEBORN-1494] Support IPv6 addresses in PbSerDeUtils.fromPackedPartitionLocations [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1471] CelebornScalaObjectMapper supports configuring FAIL_ON_UNKNOWN_PROPERTIES to false [CELEBORN-1439] Fix revive logic bug which will casue data correctness issue and job failiure [CELEBORN-1317][FOLLOWUP] Fix media type annotations for form urlencoded APIs [CELEBORN-914][FOLLOWUP] Restore select flush worker index logic Documentation [CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1466] Add local command in celeborn_ratis_shell.md Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.1 version: Contributors FMX jiang13021 leixm Mridul Muraildharan pan3793 RexXiong SteNicholas turboFei waitinfuture zhaostu4","title":"Apache Celeborn\u2122 0.5.1 Release Notes"},{"location":"community/release_notes/release_note_0.5.1/#apache-celeborntm-051-release-notes","text":"","title":"Apache Celeborn\u2122 0.5.1 Release Notes"},{"location":"community/release_notes/release_note_0.5.1/#highlight","text":"Fix an issue that may cause data loss Improve shuffle read performance","title":"Highlight"},{"location":"community/release_notes/release_note_0.5.1/#improvements","text":"[CELEBORN-1516] DynamicConfigServiceFactory should support singleton [CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1495] CelebornColumnDictionary supports dictionary of float and double column type [CELEBORN-1491][FOLLOWUP] Add flusher working queue size metric into grafana dashboard [CELEBORN-1489] Update Flink support with authentication support [CELEBORN-1485] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1479] Report register shuffle failed reason in exception [CELEBORN-1476] Enhance the RESTful response error msg [CELEBORN-1472] Reduce CongestionController#userBufferStatuses call times [CELEBORN-1459][FOLLOWUP] Introduce CleanTaskQueueSize and CleanExpiredShuffleKeysTime to record situation of cleaning up expired shuffle keys [CELEBORN-1446] Enable chunk prefetch when initialize CelebornInputStream [CELEBORN-914][FOLLOWUP] optimize write and sort logic for memory storage","title":"Improvements"},{"location":"community/release_notes/release_note_0.5.1/#stability-and-bug-fix","text":"[CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1506][BUG] Revert \"[CELEBORN-1036][FOLLOWUP] totalInflightReqs should decrement when batchIdSet contains the batchId to avoid duplicate caller of removeBatch\" [CELEBORN-1494] Support IPv6 addresses in PbSerDeUtils.fromPackedPartitionLocations [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1471] CelebornScalaObjectMapper supports configuring FAIL_ON_UNKNOWN_PROPERTIES to false [CELEBORN-1439] Fix revive logic bug which will casue data correctness issue and job failiure [CELEBORN-1317][FOLLOWUP] Fix media type annotations for form urlencoded APIs [CELEBORN-914][FOLLOWUP] Restore select flush worker index logic","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.5.1/#documentation","text":"[CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1466] Add local command in celeborn_ratis_shell.md","title":"Documentation"},{"location":"community/release_notes/release_note_0.5.1/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.1 version: Contributors FMX jiang13021 leixm Mridul Muraildharan pan3793 RexXiong SteNicholas turboFei waitinfuture zhaostu4","title":"Credits"},{"location":"community/release_notes/release_note_0.5.2/","text":"Apache Celeborn\u2122 0.5.2 Release Notes Highlight Support Apache Spark barrier stages Support differentiate map results with only different stageAttemptId Fix InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight Improvement [CELEBORN-1071] Support stage rerun for shuffle data lost [CELEBORN-1511] Add support for custom master endpoint resolver [CELEBORN-1516][FOLLOWUP] Support reset method for DynamicConfigServiceFactory [CELEBORN-1518] Add support for Apache Spark barrier stages [CELEBORN-1524] Support IPv6 hostnames for Apache Ratis [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1535] Support to disable master workerUnavailableInfo expiration [CELEBORN-1541] Enhance the readable address for internal port [CELEBORN-1550] Add support of providing custom dynamic store backend implementation [CELEBORN-1552] Automatically support prometheus to scrape metrics for helm chart [CELEBORN-1563] Log networkLocation in WorkerInfo [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1568] Support worker retries in MiniCluster [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1587] Change to debug logging on client side for SortBasedPusher trigger push [CELEBORN-1594] Refine dynamicConfig template and prevent NPE [CELEBORN-1602] Do hard split for push merged data RPC with disk full [CELEBORN-1615] Start the http server after all handlers added [CELEBORN-1625] Add parameter skipCompress for pushOrMergeData [CELEBORN-1638] Improve the slots allocator performance [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1646] Catch exception of Files#getFileStore for DeviceMonitor and StorageManager for input/ouput error [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1661] Make sure that the sortedFilesDb is initialized successfully when worker enable graceful shutdown [CELEBORN-1663] Only register appShuffleDeterminate if stage using celeborn for shuffle [CELEBORN-1671] CelebornShuffleReader will try replica if create client failed [CELEBORN-1673] Support retry create client Stability and Bug Fix [CELEBORN-1297][FOLLOWUP] Fix DB config service SQL file [CELEBORN-1473] TransportClientFactory should register netty memory metric with source for shared pooled ByteBuf allocator [CELEBORN-1496] Differentiate map results with only different stageAttemptId [CELEBORN-1506][FOLLOWUP] InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight [CELEBORN-1520] Minor logging fix for AppDiskUsageMetric and Fixed UTs [CELEBORN-1522] Fix applicationId extraction from shuffle key [CELEBORN-1526] Fix MR plugin can not run on Hadoop 3.1.0 [CELEBORN-1544] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1557] Fix totalSpace of DiskInfo for Master in HA mode [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1564] Fix actualUsableSpace of offerSlotsLoadAware condition on diskInfo [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1579] Fix the memory leak of result partition [CELEBORN-1580] ReadBufferDispacther should notify exception to listener [CELEBORN-1581] Fix incorrect metrics of DeviceCelebornFreeBytes and DeviceCelebornTotalBytes [CELEBORN-1583] MasterClient#sendMessageInner should throw Throwable for celeborn.masterClient.maxRetries is 0 [CELEBORN-1655] Fix read buffer dispatcher thread terminate unexpectedly [CELEBORN-1662] Handle PUSH_DATA_FAIL_PARTITION_NOT_FOUND in getPushDataFailCause [CELEBORN-1664] Fix secret fetch failures after LEADER master failover [CELEBORN-1665] CommitHandler should process CommitFilesResponse with COMMIT_FILE_EXCEPTION status [CELEBORN-1667] Fix NPE & LEAK occurring prior to worker registration [CELEBORN-1668] Fix NPE when handle closed file writers [CELEBORN-1669] Fix NullPointerException for PartitionFilesSorter#updateSortedShuffleFiles after cleaning up expired shuffle key [CELEBORN-1674] Fix reader thread name of MapPartitionData [CELEBORN-1682] Add java tools.jar into classpath for JVM quake [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1691] Fix the issue that upstream tasks don't rerun and the current task still retry when failed to decompress in flink [CELEBORN-1692] Set mount point in fromPbFileInfoMap [CELEBORN-1693] Fix storageFetcherPool concurrent problem [CELEBORN-1696] StorageManager#cleanFile should remove file info [CELEBORN-1705] Fix disk buffer size is negative issue [CELEBORN-1717] Fix ReusedExchangedSuit UT bug [CELEBORN-1718] Fix memory storage file won't hard split when memory file is full and worker has no disks [CELEBORN-1726] Update WorkerInfo when transition worker state [CELEBORN-1727] Correct the calculation of worker diskInfo actualUsableSpace [CELEBORN-1728] Fix NPE when failing to connect to celeborn worker Build [CELEBORN-1677] Update SCM information for SBT build configuration Documentation [CELEBORN-914][FOLLOWUP] Add emptyFilePrimaryIds and emptyFileReplicaIds of worker service log in startup document [CELEBORN-914][FOLLOWUP] Adding metrics for memory file storage in monitoring.md [CELEBORN-1058][FOLLOWUP] Update name of master service from MasterSys to Master in startup document [CELEBORN-1551] Fix wrong link in quota_management.md Dependencies [CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7 Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.2 version: Contributors ErikFang Ethan Feng Fei Wang Fu Chen Jiashu Xiong Kerwin Zhang Keyong Zhou Kun Wan Lianne Li Mridul Muralidharan Nicholas Jiang Sanskar Modi Shaoyun Chen Weijie Guo Wenliang Bo Xianming Lei Xu Huang Yanze Jiang Yihe Li Yuting Wang Zhao zhao Zhentao Shuai","title":"Apache Celeborn\u2122 0.5.2 Release Notes"},{"location":"community/release_notes/release_note_0.5.2/#apache-celeborntm-052-release-notes","text":"","title":"Apache Celeborn\u2122 0.5.2 Release Notes"},{"location":"community/release_notes/release_note_0.5.2/#highlight","text":"Support Apache Spark barrier stages Support differentiate map results with only different stageAttemptId Fix InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight","title":"Highlight"},{"location":"community/release_notes/release_note_0.5.2/#improvement","text":"[CELEBORN-1071] Support stage rerun for shuffle data lost [CELEBORN-1511] Add support for custom master endpoint resolver [CELEBORN-1516][FOLLOWUP] Support reset method for DynamicConfigServiceFactory [CELEBORN-1518] Add support for Apache Spark barrier stages [CELEBORN-1524] Support IPv6 hostnames for Apache Ratis [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1535] Support to disable master workerUnavailableInfo expiration [CELEBORN-1541] Enhance the readable address for internal port [CELEBORN-1550] Add support of providing custom dynamic store backend implementation [CELEBORN-1552] Automatically support prometheus to scrape metrics for helm chart [CELEBORN-1563] Log networkLocation in WorkerInfo [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1568] Support worker retries in MiniCluster [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1587] Change to debug logging on client side for SortBasedPusher trigger push [CELEBORN-1594] Refine dynamicConfig template and prevent NPE [CELEBORN-1602] Do hard split for push merged data RPC with disk full [CELEBORN-1615] Start the http server after all handlers added [CELEBORN-1625] Add parameter skipCompress for pushOrMergeData [CELEBORN-1638] Improve the slots allocator performance [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1646] Catch exception of Files#getFileStore for DeviceMonitor and StorageManager for input/ouput error [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1661] Make sure that the sortedFilesDb is initialized successfully when worker enable graceful shutdown [CELEBORN-1663] Only register appShuffleDeterminate if stage using celeborn for shuffle [CELEBORN-1671] CelebornShuffleReader will try replica if create client failed [CELEBORN-1673] Support retry create client","title":"Improvement"},{"location":"community/release_notes/release_note_0.5.2/#stability-and-bug-fix","text":"[CELEBORN-1297][FOLLOWUP] Fix DB config service SQL file [CELEBORN-1473] TransportClientFactory should register netty memory metric with source for shared pooled ByteBuf allocator [CELEBORN-1496] Differentiate map results with only different stageAttemptId [CELEBORN-1506][FOLLOWUP] InFlightRequestTracker should not reset totalInflightReqs for cleaning up to avoid negative totalInflightReqs for limitZeroInFlight [CELEBORN-1520] Minor logging fix for AppDiskUsageMetric and Fixed UTs [CELEBORN-1522] Fix applicationId extraction from shuffle key [CELEBORN-1526] Fix MR plugin can not run on Hadoop 3.1.0 [CELEBORN-1544] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1557] Fix totalSpace of DiskInfo for Master in HA mode [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1564] Fix actualUsableSpace of offerSlotsLoadAware condition on diskInfo [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1579] Fix the memory leak of result partition [CELEBORN-1580] ReadBufferDispacther should notify exception to listener [CELEBORN-1581] Fix incorrect metrics of DeviceCelebornFreeBytes and DeviceCelebornTotalBytes [CELEBORN-1583] MasterClient#sendMessageInner should throw Throwable for celeborn.masterClient.maxRetries is 0 [CELEBORN-1655] Fix read buffer dispatcher thread terminate unexpectedly [CELEBORN-1662] Handle PUSH_DATA_FAIL_PARTITION_NOT_FOUND in getPushDataFailCause [CELEBORN-1664] Fix secret fetch failures after LEADER master failover [CELEBORN-1665] CommitHandler should process CommitFilesResponse with COMMIT_FILE_EXCEPTION status [CELEBORN-1667] Fix NPE & LEAK occurring prior to worker registration [CELEBORN-1668] Fix NPE when handle closed file writers [CELEBORN-1669] Fix NullPointerException for PartitionFilesSorter#updateSortedShuffleFiles after cleaning up expired shuffle key [CELEBORN-1674] Fix reader thread name of MapPartitionData [CELEBORN-1682] Add java tools.jar into classpath for JVM quake [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1691] Fix the issue that upstream tasks don't rerun and the current task still retry when failed to decompress in flink [CELEBORN-1692] Set mount point in fromPbFileInfoMap [CELEBORN-1693] Fix storageFetcherPool concurrent problem [CELEBORN-1696] StorageManager#cleanFile should remove file info [CELEBORN-1705] Fix disk buffer size is negative issue [CELEBORN-1717] Fix ReusedExchangedSuit UT bug [CELEBORN-1718] Fix memory storage file won't hard split when memory file is full and worker has no disks [CELEBORN-1726] Update WorkerInfo when transition worker state [CELEBORN-1727] Correct the calculation of worker diskInfo actualUsableSpace [CELEBORN-1728] Fix NPE when failing to connect to celeborn worker","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.5.2/#build","text":"[CELEBORN-1677] Update SCM information for SBT build configuration","title":"Build"},{"location":"community/release_notes/release_note_0.5.2/#documentation","text":"[CELEBORN-914][FOLLOWUP] Add emptyFilePrimaryIds and emptyFileReplicaIds of worker service log in startup document [CELEBORN-914][FOLLOWUP] Adding metrics for memory file storage in monitoring.md [CELEBORN-1058][FOLLOWUP] Update name of master service from MasterSys to Master in startup document [CELEBORN-1551] Fix wrong link in quota_management.md","title":"Documentation"},{"location":"community/release_notes/release_note_0.5.2/#dependencies","text":"[CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7","title":"Dependencies"},{"location":"community/release_notes/release_note_0.5.2/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.2 version: Contributors ErikFang Ethan Feng Fei Wang Fu Chen Jiashu Xiong Kerwin Zhang Keyong Zhou Kun Wan Lianne Li Mridul Muralidharan Nicholas Jiang Sanskar Modi Shaoyun Chen Weijie Guo Wenliang Bo Xianming Lei Xu Huang Yanze Jiang Yihe Li Yuting Wang Zhao zhao Zhentao Shuai","title":"Credits"},{"location":"community/release_notes/release_note_0.5.3/","text":"Apache Celeborn\u2122 0.5.3 Release Notes Highlight Optimize LifecycleManager Rpc performance Worker can release disk buffer when OOM happened Fix packed partition location cause GetReducerFileGroupResponse lose location Improvement [CELEBORN-1240][FOLLOWUP] Introduce web profile for web module [CELEBORN-1500] Filter out empty InputStreams [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1725][FOLLOWUP] Optimize isAllMapTasksEnd performance [CELEBORN-1782] Worker in congestion control should be in blacklist to avoid impact new shuffle Stability and Bug Fix Revert \"[CELEBORN-1376] Push data failed should always release request body\" [CELEBORN-1510] Partial task unable to switch to the replica [CELEBORN-1701][FOLLOWUP] Support stage rerun for shuffle data lost [CELEBORN-1759] Fix reserve slots might lost partition location between 0.4 client and 0.5 server [CELEBORN-1760] OOM causes disk buffer unable to be released [CELEBORN-1763] Fix DataPusher be blocked for a long time [CELEBORN-1765] Fix NPE when removeFileInfo in StorageManager [CELEBORN-1769] Fix packed partition location cause GetReducerFileGroupResponse lose location [CELEBORN-1770] FlushNotifier should setException for all Throwables in Flusher [CELEBORN-1743] Resolve the metrics data interruption and the job failure caused by locked resources [CELEBORN-1783] Fix Pending task in commitThreadPool wont be canceled [CELEBORN-1783][FOLLOWUP] Compatible with UT Build [CELEBORN-1816] Bump scala-maven-plugin to avoid compilation loop Documentation [CELEBORN-1752] Migration guide for unexpected shuffle RESTful api change since 0.5.0 Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.2 version: Contributors cfmcgrady FMX leixm onebox-li RexXiong SteNicholas turboFei waitinfuture zaynt4606 zhaostu4","title":"Apache Celeborn\u2122 0.5.3 Release Notes"},{"location":"community/release_notes/release_note_0.5.3/#apache-celeborntm-053-release-notes","text":"","title":"Apache Celeborn\u2122 0.5.3 Release Notes"},{"location":"community/release_notes/release_note_0.5.3/#highlight","text":"Optimize LifecycleManager Rpc performance Worker can release disk buffer when OOM happened Fix packed partition location cause GetReducerFileGroupResponse lose location","title":"Highlight"},{"location":"community/release_notes/release_note_0.5.3/#improvement","text":"[CELEBORN-1240][FOLLOWUP] Introduce web profile for web module [CELEBORN-1500] Filter out empty InputStreams [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1725][FOLLOWUP] Optimize isAllMapTasksEnd performance [CELEBORN-1782] Worker in congestion control should be in blacklist to avoid impact new shuffle","title":"Improvement"},{"location":"community/release_notes/release_note_0.5.3/#stability-and-bug-fix","text":"Revert \"[CELEBORN-1376] Push data failed should always release request body\" [CELEBORN-1510] Partial task unable to switch to the replica [CELEBORN-1701][FOLLOWUP] Support stage rerun for shuffle data lost [CELEBORN-1759] Fix reserve slots might lost partition location between 0.4 client and 0.5 server [CELEBORN-1760] OOM causes disk buffer unable to be released [CELEBORN-1763] Fix DataPusher be blocked for a long time [CELEBORN-1765] Fix NPE when removeFileInfo in StorageManager [CELEBORN-1769] Fix packed partition location cause GetReducerFileGroupResponse lose location [CELEBORN-1770] FlushNotifier should setException for all Throwables in Flusher [CELEBORN-1743] Resolve the metrics data interruption and the job failure caused by locked resources [CELEBORN-1783] Fix Pending task in commitThreadPool wont be canceled [CELEBORN-1783][FOLLOWUP] Compatible with UT","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.5.3/#build","text":"[CELEBORN-1816] Bump scala-maven-plugin to avoid compilation loop","title":"Build"},{"location":"community/release_notes/release_note_0.5.3/#documentation","text":"[CELEBORN-1752] Migration guide for unexpected shuffle RESTful api change since 0.5.0","title":"Documentation"},{"location":"community/release_notes/release_note_0.5.3/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.2 version: Contributors cfmcgrady FMX leixm onebox-li RexXiong SteNicholas turboFei waitinfuture zaynt4606 zhaostu4","title":"Credits"},{"location":"community/release_notes/release_note_0.5.4/","text":"Apache Celeborn\u2122 0.5.4 Release Notes Highlight Support retry when sending RPC to LifecycleManager Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread Interrupt spark task should not report fetch failure Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit response Improvement [CELEBORN-1757] Add retry when sending RPC to LifecycleManager [CELEBORN-1841] Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread [CELEBORN-1859] DfsPartitionReader and LocalPartitionReader should reuse pbStreamHandlers get from BatchOpenStream request [CELEBORN-1882] Support configuring the SSL handshake timeout for SSLHandler [CELEBORN-1897] Avoid calling toString for too long messages Stability and Bug Fix [CELEBORN-1818] Fix incorrect timeout exception when waiting on no pending writes [CELEBORN-1838] Interrupt spark task should not report fetch failure [CELEBORN-1846] Fix the StreamHandler usage in fetching chunk when task attempt is odd [CELEBORN-1850] Setup worker endpoint after initalizing controller [CELEBORN-1865] Update master endpointRef when master leader is abnormal [CELEBORN-1867] Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit response [CELEBORN-1883] Replace HashSet with ConcurrentHashMap.newKeySet for ShuffleFileGroups [CELEBORN-1885] Fix nullptr exceptions in FetchChunk after worker restart Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.4 version: Contributors Aidar Bariev Ethan Feng Minchu Yang Nan Zhu Sanskar Modi Xinyu Wang Xu Hang Yihe Li Zaynt Shuai Ziyi Wu","title":"Apache Celeborn\u2122 0.5.4 Release Notes"},{"location":"community/release_notes/release_note_0.5.4/#apache-celeborntm-054-release-notes","text":"","title":"Apache Celeborn\u2122 0.5.4 Release Notes"},{"location":"community/release_notes/release_note_0.5.4/#highlight","text":"Support retry when sending RPC to LifecycleManager Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread Interrupt spark task should not report fetch failure Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit response","title":"Highlight"},{"location":"community/release_notes/release_note_0.5.4/#improvement","text":"[CELEBORN-1757] Add retry when sending RPC to LifecycleManager [CELEBORN-1841] Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread [CELEBORN-1859] DfsPartitionReader and LocalPartitionReader should reuse pbStreamHandlers get from BatchOpenStream request [CELEBORN-1882] Support configuring the SSL handshake timeout for SSLHandler [CELEBORN-1897] Avoid calling toString for too long messages","title":"Improvement"},{"location":"community/release_notes/release_note_0.5.4/#stability-and-bug-fix","text":"[CELEBORN-1818] Fix incorrect timeout exception when waiting on no pending writes [CELEBORN-1838] Interrupt spark task should not report fetch failure [CELEBORN-1846] Fix the StreamHandler usage in fetching chunk when task attempt is odd [CELEBORN-1850] Setup worker endpoint after initalizing controller [CELEBORN-1865] Update master endpointRef when master leader is abnormal [CELEBORN-1867] Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit response [CELEBORN-1883] Replace HashSet with ConcurrentHashMap.newKeySet for ShuffleFileGroups [CELEBORN-1885] Fix nullptr exceptions in FetchChunk after worker restart","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.5.4/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.5.4 version: Contributors Aidar Bariev Ethan Feng Minchu Yang Nan Zhu Sanskar Modi Xinyu Wang Xu Hang Yihe Li Zaynt Shuai Ziyi Wu","title":"Credits"},{"location":"community/release_notes/release_note_0.6.0/","text":"Apache Celeborn\u2122 0.6.0 Release Notes Highlight Support Flink hybrid shuffle integration with Apache Celeborn Support Spark 4.0.0 Support Flink 2.0 Support HARD_SPLIT in PushMergedData Optimize skew partition logic for Reduce Mode to avoid sorting shuffle files Refine the celeborn RESTful APIs and introduce Celeborn CLI for automation Supporting worker Tags CongestionController supports control traffic by user/worker traffic speed Support read shuffle from S3 Support CppClient in Celeborn HELM Chart Optimization Improvement [CELEBORN-2045] Add logger sinks to allow persist metrics data and avoid possible worker OOM [CELEBORN-2046] Specify extractionDir of AsyncProfilerLoader with celeborn.worker.jvmProfiler.localDir [CELEBORN-2027] Allow CelebornShuffleReader to decompress data on demand [CELEBORN-2003] Add retry mechanism when completing S3 multipart upload [CELEBORN-2018] Support min number of workers selected for shuffle [CELEBORN-2006] LifecycleManager should avoid parsing shufflePartitionType every time [CELEBORN-2007] Reduce PartitionLocation memory usage [CELEBORN-2008] SlotsAllocator should select disks randomly in RoundRobin mode [CELEBORN-1896] delete data from failed to fetch shuffles [CELEBORN-2004] Filter empty partition before createIntputStream [CELEBORN-2002][MASTER] Audit shuffle lifecycle in separate log file [CELEBORN-1993] CelebornConf introduces celeborn. .io.threads to specify number of threads used in the client thread pool [CELEBORN-1995] Optimize memory usage for push failed batches [CELEBORN-1994] Introduce disruptor dependency to support asynchronous logging of log4j2 [CELEBORN-1965] Rely on all default hadoop providers for S3 auth [CELEBORN-1982] Slot Selection Perf Improvements [CELEBORN-1961] Convert Resource.proto from Protocol Buffers version 2 to version 3 [CELEBORN-1931] use gather API for local flusher to optimize write io pattern [CELEBORN-1916] Support Aliyun OSS Based on MPU Extension Interface [CELEBORN-1925] Support Flink 2.0 [CELEBORN-1844][CIP-8] introduce tier writer proxy and simplify partition data writer [CELEBORN-1921] Broadcast large GetReducerFileGroupResponse to prevent Spark driver network exhausted [CELEBORN-1928][CIP-12] Support HARD_SPLIT in PushMergedData should support handle older worker success response [CELEBORN-1930][CIP-12] Support HARD_SPLIT in PushMergedData should handle congestion control NPE issue [CELEBORN-1577][PHASE2] QuotaManager should support interrupt shuffle [CELEBORN-1856] Support stage-rerun when read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1894] Allow skipping already read chunks during unreplicated shuffle read retried [CELEBORN-1909] Support pre-run static code blocks of TransportMessages to improve performance of protobuf serialization [CELEBORN-1911] Move multipart-uploader to multipart-uploader/multipart-uploader-s3 for extensibility [CELEBORN-1910] Remove redundant synchronized of isTerminated in ThreadUtils#sameThreadExecutorService [CELEBORN-1898] SparkOutOfMemoryError compatible with Spark 4.0 and 4.1 [CELEBORN-1897] Avoid calling toString for too long messages [CELEBORN-1882] Support configuring the SSL handshake timeout for SSLHandler [CELEBORN-1883] Replace HashSet with ConcurrentHashMap.newKeySet for ShuffleFileGroups [CELEBORN-1858] Support DfsPartitionReader read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1879] Ignore invalid chunk range generated by splitSkewedPartitionLocations [CELEBORN-1857] Support LocalPartitionReader read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1876] Log remote address on RPC exception for TransportRequestHandler [CELEBORN-1865] Update master endpointRef when master leader is abnormal [CELEBORN-1319] Optimize skew partition logic for Reduce Mode to avoid sorting shuffle files [CELEBORN-1861] Support celeborn.worker.storage.baseDir.diskType option to specify disk type of base directory for worker [CELEBORN-1757] Add retry when sending RPC to LifecycleManager [CELEBORN-1859] DfsPartitionReader and LocalPartitionReader should reuse pbStreamHandlers get from BatchOpenStream request [CELEBORN-1843] Optimize roundrobin for more balanced disk slot allocation [CELEBORN-1854] Change receive revive request log level to debug [CELEBORN-1841] Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread [CELEBORN-1847][CIP-8] Introduce local and DFS tier writer [CELEBORN-1850] Setup worker endpoint after initalizing controller [CELEBORN-1838] Interrupt spark task should not report fetch failure [CELEBORN-1835][CIP-8] Add tier writer base and memory tier writer [CELEBORN-1829] Replace waitThreadPoll's thread pool with ScheduledExecutorService in Controller [CELEBORN-1720] Prevent stage re-run if another task attempt is running or successful [CELEBORN-1482][CIP-8] Add partition meta handler [CELEBORN-1812] Distinguish sorting-file from sort-tasks waiting to be submitted [CELEBORN-1737] Support build tez client package [CELEBORN-1802] Fail the celeborn master/worker start if CELEBORN_CONF_DIR is not directory [CELEBORN-1701][FOLLOWUP] Support stage rerun for shuffle data lost [CELEBORN-1413] Support Spark 4.0 [CELEBORN-1753] Optimize the code for exists and find method [CELEBORN-1777] Add java.security.jgss/sun.security.krb5 to DEFAULT_MODULE_OPTIONS [CELEBORN-1731] Support merged kv input for Tez [CELEBORN-1732] Support unordered kv input for Tez [CELEBORN-1733] Support ordered grouped kv input for Tez [CELEBORN-1721][CIP-12] Support HARD_SPLIT in PushMergedData [CELEBORN-1758] Remove the empty user resource consumption from worker heartbeat [CELEBORN-1729] Support ordered KV output for Tez [CELEBORN-1730] Support unordered KV output for Tez [CELEBORN-1612] Add a basic reader writer class to Tez [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1700] Flink supports fallback to vanilla Flink built-in shuffle implementation [CELEBORN-1621][CIP-11] Predefined worker tags expr via dynamic configs [CELEBORN-1545] Add Tez plugin skeleton and dag app master [CELEBORN-1530] support MPU for S3 [CELEBORN-1618][CIP-11] Supporting tags via DB Config Service [CELEBORN-1726] Update WorkerInfo when transition worker state [CELEBORN-1715] RemoteShuffleMaster should check celeborn.client.push.replicate.enabled in constructor [CELEBORN-1714] Optimize handleApplicationLost [CELEBORN-1660] Cache available workers and only count the available workers device free capacity [CELEBORN-1619][CIP-11] Integrate tags manager with config service [CELEBORN-1071] Support stage rerun for shuffle data lost [CELEBORN-1697] Improve ThreadStackTrace for thread dump [CELEBORN-1671] CelebornShuffleReader will try replica if create client failed [CELEBORN-1682] Add java tools.jar into classpath for JVM quake [CELEBORN-1660] Using map for workers to find worker fast [CELEBORN-1673] Support retry create client [CELEBORN-1577][PHASE1] Storage quota should support interrupt shuffle [CELEBORN-1642][CIP-11] Support multiple worker tags [CELEBORN-1636] Client supports dynamic update of Worker resources on the server [CELEBORN-1651] Support ratio threshold of unhealthy disks for excluding worker [CELEBORN-1601] Support revise lost shuffles [CELEBORN-1487][PHASE2] CongestionController support dynamic config [CELEBORN-1648] Refine AppUniqueId with UUID suffix [CELEBORN-1490][CIP-6] Introduce tier consumer for hybrid shuffle [CELEBORN-1645] Introduce ShuffleFallbackPolicy to support custom implementation of shuffle fallback policy for CelebornShuffleFallbackPolicyRunner [CELEBORN-1620][CIP-11] Support passing worker tags via RequestSlots message [CELEBORN-1487][PHASE1] CongestionController support control traffic by user/worker traffic speed [CELEBORN-1637] Enhance config to bypass memory check for partition file sorter [CELEBORN-1638] Improve the slots allocator performance [CELEBORN-1617][CIP-11] Support workers tags in FS Config Service [CELEBORN-1615] Start the http server after all handlers added [CELEBORN-1574] Speed up unregister shuffle by batch processing [CELEBORN-1625] Add parameter skipCompress for pushOrMergeData [CELEBORN-1597][CIP-11] Implement TagsManager [CELEBORN-1490][CIP-6] Impl worker write process for Flink Hybrid Shuffle [CELEBORN-1602] do hard split for push merged data RPC with disk full [CELEBORN-1594] Refine dynamicConfig template and prevent NPE [CELEBORN-1513] Support wildcard bind in dual stack environments [CELEBORN-1587] Change to debug logging on client side for SortBasedPusher trigger push [CELEBORN-1496] Differentiate map results with only different stageAttemptId [CELEBORN-1583] MasterClient#sendMessageInner should throw Throwable for celeborn.masterClient.maxRetries is 0 [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1580] ReadBufferDispacther should notify exception to listener [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1560] Remove usages of deprecated Files.createTempDir of Guava [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1568] Support worker retries in MiniCluster [CELEBORN-1563] Log networkLocation in WorkerInfo [CELEBORN-1531] Refactor self checks in master [CELEBORN-1550] Add support of providing custom dynamic store backend implementation [CELEBORN-1529] Read shuffle data from S3 [CELEBORN-1518] Add support for Apache Spark barrier stages [CELEBORN-1542] Master supports to check the worker host pattern on worker registration [CELEBORN-1535] Support to disable master workerUnavailableInfo expiration [CELEBORN-1511] Add support for custom master endpoint resolver [CELEBORN-1541] Enhance the readable address for internal port [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1524] Support IPv6 hostnames for Apache Ratis [CELEBORN-1519] Do not update estimated partition size if it is unchanged [CELEBORN-1521] Introduce celeborn-spi module for authentication extensions [CELEBORN-1469] Support writing shuffle data to OSS(S3 only) [CELEBORN-1446] Enable chunk prefetch when initialize CelebornInputStream [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1543] Support Flink 1.20 [CELEBORN-1504] Support for Apache Flink 1.16 [CELEBORN-1500] Filter out empty InputStreams [CELEBORN-1495] CelebornColumnDictionary supports dictionary of float and double column type [CELEBORN-1494] Support IPv6 addresses in PbSerDeUtils.fromPackedPartitionLocations [CELEBORN-1483] Add storage policy [CELEBORN-1479] Report register shuffle failed reason in exception [CELEBORN-1489] Update Flink support with authentication support [CELEBORN-1485] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1472] Reduce CongestionController#userBufferStatuses call times [CELEBORN-1471] CelebornScalaObjectMapper supports configuring FAIL_ON_UNKNOWN_PROPERTIES to false Flink hybrid shuffle [CELEBORN-1867][FLINK] Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit and notifyRequiredSegment response [CELEBORN-1866][FLINK] Fix CelebornChannelBufferReader request more buffers than needed [CELEBORN-1490][CIP-6] Support process large buffer in flink hybrid shuffle [CELEBORN-1490][CIP-6] Add Flink hybrid shuffle doc [CELEBORN-1490][CIP-6] Impl worker read process in Flink Hybrid Shuffle [CELEBORN-1490][CIP-6] Introduce tier producer in celeborn flink client [CELEBORN-1490][CIP-6] Introduce tier factory and master agent in flink hybrid shuffle [CELEBORN-1490][CIP-6] Enrich register shuffle method [CELEBORN-1490][CIP-6] Extends FileMeta to support hybrid shuffle [CELEBORN-1490][CIP-6] Extends message to support hybrid shuffle RESTful API and CLI [CELEBORN-1056][FOLLOWUP] Support upsert and delete of dynamic configuration management [CELEBORN-2020] Support http authentication for Celeborn CLI [CELEBORN-1875] Support to get workers topology information with RESTful api [CELEBORN-1797] Support to adjust the logger level with RESTful API during runtime [CELEBORN-1750] Return struct worker resource consumption information with RESTful api [CELEBORN-1707] Audit all RESTful api calls and use separate restAuditFile [CELEBORN-1632] Support to apply ratis local raft_meta_conf command with RESTful api [CELEBORN-1599] Container Info REST API [CELEBORN-1630] Support to apply ratis peer operation with RESTful api [CELEBORN-1631] Support to apply ratis snapshot operation with RESTful api [CELEBORN-1633] Return more raft group information [CELEBORN-1629] Support to apply ratis election operation with RESTful api [CELEBORN-1609] Support SSL for celeborn RESTful service [CELEBORN-1608] Reduce redundant response for RESTful api [CELEBORN-1607] Enable useEnumCaseInsensitive for openapi-generator [CELEBORN-1589] Ensure master is leader for some POST request APIs [CELEBORN-1572] Celeborn CLI initial REST API support [CELEBORN-1553] Using the request base url as swagger server [CELEBORN-1537] Support to remove workers unavailable info with RESTful api [CELEBORN-1546] Support authorization on swagger UI [CELEBORN-1477] Using openapi-generator apache-httpclient library instead of jersey2 [CELEBORN-1493] Check admin privileges for http mutative requests [CELEBORN-1477][CIP-9] Refine the celeborn RESTful APIs [CELEBORN-1476] Enhance the RESTful response error msg [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1318] Support celeborn http authentication Monitoring [CELEBORN-2024] Publish commit files fail count metrics [CELEBORN-1892] Adding register with master fail count metric for worker [CELEBORN-2005] Introduce numBytesIn, numBytesOut, numBytesInPerSecond, numBytesOutPerSecond metrics for RemoteShuffleServiceFactory [CELEBORN-1800] Introduce ApplicationTotalCount and ApplicationFallbackCount metric to record the total and fallback count of application [CELEBORN-1974] ApplicationId as metrics label should be behind a config flag [CELEBORN-1968] Publish metric for unreleased partition location count when worker was gracefully shutdown [CELEBORN-1977] Add help/type on prometheus exposed metrics [CELEBORN-1831] Add ratis commitIndex metrics [CELEBORN-1817] add committed file size metrics [CELEBORN-1791] All NettyMemoryMetrics should register to source [CELEBORN-1804] Shuffle environment metrics of RemoteShuffleEnvironment should use Shuffle.Remote metric group [CELEBORN-1634][FOLLOWUP] Add rpc metrics into grafana dashboard [CELEBORN-1766] Add detail metrics about fetch chunk [CELEBORN-1756] Only gauge hdfs metrics if HDFS storage enabled to reduce metrics [CELEBORN-1634] Support queue time/processing time metrics for rpc framework [CELEBORN-1706] Use bytes(IEC) unit instead of bytes(SI) for size related metrics in prometheus dashboard [CELEBORN-1685] ShuffleFallbackPolicy supports ShuffleFallbackCount metric [CELEBORN-1680] Introduce ShuffleFallbackCount metrics [CELEBORN-1444][FOLLOWUP] Add IsDecommissioningWorker to celeborn dashboard [CELEBORN-1640] NettyMemoryMetrics supports numHeapArenas, numDirectArenas, tinyCacheSize, smallCacheSize, normalCacheSize, numThreadLocalCaches and chunkSize [CELEBORN-1656] Remove duplicate UserProduceSpeed metrics [CELEBORN-1627] Introduce instance variable for celeborn dashboard to filter metrics [CELEBORN-1582] Publish metric for unreleased shuffle count when worker was decommissioned [CELEBORN-1501] Introduce application dimension resource consumption metrics of Worker [CELEBORN-1586] Add available workers Metrics [CELEBORN-1581] Fix incorrect metrics of DeviceCelebornFreeBytes and DeviceCelebornTotalBytes [CELEBORN-1491] introduce flusher working queue size metric CPP Client [CELEBORN-1978][CIP-14] Add code style checking for cppClient [CELEBORN-1958][CIP-14] Add testsuite to test writing with javaClient and reading with cppClient [CELEBORN-1874][CIP-14] Add CICD procedure in github action for cppClient [CELEBORN-1932][CIP-14] Adapt java's serialization to support cpp serialization for GetReducerFileGroup/Response [CELEBORN-1915][CIP-14] Add reader's ShuffleClient to cppClient [CELEBORN-1906][CIP-14] Add CelebornInputStream to cppClient [CELEBORN-1881][CIP-14] Add WorkerPartitionReader to cppClient [CELEBORN-1871][CIP-14] Add NettyRpcEndpointRef to cppClient [CELEBORN-1863][CIP-14] Add TransportClient to cppClient [CELEBORN-1845][CIP-14] Add MessageDispatcher to cppClient [CELEBORN-1836][CIP-14] Add Message to cppClient [CELEBORN-1827][CIP-14] Add messageDecoder to cppClient [CELEBORN-1821][CIP-14] Add controlMessages to cppClient [CELEBORN-1819][CIP-14] Refactor cppClient with nested namespace [CELEBORN-1814][CIP-14] Add transportMessage to cppClient [CELEBORN-1809][CIP-14] Add partitionLocation to cppClient [CELEBORN-1799][CIP-14] Add celebornConf to cppClient [CELEBORN-1785][CIP-14] Add baseConf to cppClient [CELEBORN-1772][CIP-14] Add memory module to cppClient [CELEBORN-1761][CIP-14] Add cppProto to cppClient [CELEBORN-1754][CIP-14] Add exceptions and checking utils to cppClient [CELEBORN-1751][CIP-14] Add celebornException utils to cppClient [CELEBORN-1740][CIP-14] Add stackTrace utils to cppClient [CELEBORN-1741][CIP-14] Add processBase utils to cppClient [CELEBORN-1724][CIP-14] Add environment setup tools for CppClient development HELM Chart Optimization [CELEBORN-2017][HELM] Add namespace to the metadata [CELEBORN-1528][HELM] Use volume claim template to support various storage backend [CELEBORN-1996][HELM] Rename volumes.{master,worker} to {master,worker}.volumes and {master.worker}.volumeMounts [CELEBORN-1989][HELM] Split securityContext into master.podSecurityContext and worker.podSecurityContext [CELEBORN-1988][HELM] Split hostNetwork into master.hostNetwork and worker.hostNetwork [CELEBORN-1987][HELM] Split dnsPolicy into master.dnsPolicy and worker.dnsPolicy [CELEBORN-1981][HELM] Rename masterReplicas and workerReplicas to master.replicas and worker.replicas [CELEBORN-1985][HELM] Add new values master.envFrom and worker.envFrom [CELEBORN-1986][HELM] Rename priorityClass.{master,worker} to {master,worker}.priorityClass [CELEBORN-1980][HELM] Split environments into master.env and worker.env [CELEBORN-1972][HELM] Rename affinity.{master,worker} to {master,worker}.affinity [CELEBORN-1951][HELM] Rename resources.{master,worker} to {master,worker}.resoruces [CELEBORN-1962][HELM] Split tolerations into master.tolerations and worker.tolerations [CELEBORN-1955][HELM] Split nodeSelector into master.nodeSelector and worker.nodeSelector [CELEBORN-1953][HELM] Split podAnnotations into master.annotations and worker.annotations [CELEBORN-1954][HELM] Add a new value image.registry [CELEBORN-1952][HELM] Define template helpers for master/worker respectively [CELEBORN-1532][HELM] Read log4j2 and metrics configurations from file [CELEBORN-1830] Chart statefulset resources key duplicate [CELEBORN-1788] Add role and roleBinding helm charts [CELEBORN-1786] add serviceAccount helm chart [CELEBORN-1780] Add support for NodePort Service per Master replica [CELEBORN-1552] automatically support prometheus to scrape metrics for helm chart Stability and Bug Fix [CELEBORN-1721][FOLLOWUP] Return softsplit if there is no hardsplit for pushMergeData [CELEBORN-2043] Fix IndexOutOfBoundsException exception in getEvictedFileWriter [CELEBORN-2040] Avoid throw FetchFailedException when GetReducerFileGroupResponse failed via broadcast [CELEBORN-2042] Fix FetchFailure handling when TaskSetManager is not found [CELEBORN-2033] updateProduceBytes should be called even if updateProduceBytes throws exception [CELEBORN-2025] RpcFailure Scala 2.13 serialization is incompatible [CELEBORN-2022] Spark4 Client should package commons-io [CELEBORN-2023] Spark4 Client incompatible with isLocalMaster method [CELEBORN-2009] Commit files request failure should exclude worker in LifecycleManager [CELEBORN-2015] Retry IOException failures for RPC requests [CELEBORN-1902] Read client throws PartitionConnectionException [CELEBORN-2000] Ignore the getReducerFileGroup timeout before shuffle stage end [CELEBORN-1960] Fix PauseSpentTime only append the interval check time [CELEBORN-1998] RemoteShuffleEnvironment should not register InputChannelMetrics repeatedly [CELEBORN-1999] OpenStreamTime should use requestId to record cost time [CELEBORN-1855] LifecycleManager return appshuffleId for non barrier stage when fetch fail has been reported [CELEBORN-1948] Fix the issue where replica may lose data when HARD_SPLIT occurs during handlePushMergeData [CELEBORN-1912] Client should send heartbeat to worker for processing heartbeat to avoid reading idleness of worker which enables heartbeat [CELEBORN-1992] Ensure hadoop FS are not closed by hadoop ShutdownHookManager [CELEBORN-1919] Hardsplit batch tracking should be disabled when pushing only a single replica [CELEBORN-1979] Change partition manager should respect the celeborn.storage.availableTypes [CELEBORN-1983] Fix fetch fail not throw due to reach spark maxTaskFailures [CELEBORN-1976] CommitHandler should use celeborn.client.rpc.commitFiles.askTimeout for timeout of doParallelCommitFiles [CELEBORN-1966] Added fix to get userinfo in celeborn [CELEBORN-1969] Remove celeborn.client.shuffle.mapPartition.split.enabled to enable shuffle partition split at default for MapPartition [CELEBORN-1970] Use StatusCode.fromValue instead of Utils.toStatusCode [CELEBORN-1646][FOLLOWUP] DeviceMonitor should notifyObserversOnError with CRITICAL_ERROR disk status for input/ouput error [CELEBORN-1929] Avoid unnecessary buffer loss to get better buffer reusability [CELEBORN-1918] Add batchOpenStream time to fetch wait time [CELEBORN-1947] Reduce log for CelebornShuffleReader sleeping before inputStream ready [CELEBORN-1923] Correct Celeborn available slots calculation logic [CELEBORN-1914] incWriteTime when ShuffleWriter invoke pushGiantRecord [CELEBORN-1822] Respond to RegisterShuffle with max epoch PartitionLocation to avoid revive [CELEBORN-1899] Fix configuration bug in shuffle s3 [CELEBORN-1885] Fix nullptr exceptions in FetchChunk after worker restart [CELEBORN-1889] Fix scala 2.13 complie error [CELEBORN-1846] Fix the StreamHandler usage in fetching chunk when task attempt is odd [CELEBORN-1792] MemoryManager resume should use pinnedDirectMemory instead of usedDirectMemory [CELEBORN-1832] MapPartitionData should create fixed thread pool with registration of ThreadPoolSource [CELEBORN-1820] Failing to write and flush StreamChunk data should be counted as FETCH_CHUNK_FAIL [CELEBORN-1818] Fix incorrect timeout exception when waiting on no pending writes [CELEBORN-1763] Fix DataPusher be blocked for a long time [CELEBORN-1783] Fix Pending task in commitThreadPool wont be canceled [CELEBORN-1782] Worker in congestion control should be in blacklist to avoid impact new shuffle [CELEBORN-1510] Partial task unable to switch to the replica [CELEBORN-1778] Fix commitInfo NPE and add assert in LifecycleManagerCommitFilesSuite [CELEBORN-1670] Avoid swallowing InterruptedException in ShuffleClientImpl Revert \"- [CELEBORN-1376] Push data failed should always release request body\" [CELEBORN-1770] FlushNotifier should setException for all Throwables in Flusher [CELEBORN-1769] Fix packed partition location cause GetReducerFileGroupResponse lose location [CELEBORN-1767] Fix occasional errors in UT when creating workers [CELEBORN-1765] Fix NPE when removeFileInfo in StorageManager [CELEBORN-1760] OOM causes disk buffer unable to be released [CELEBORN-1743] Resolve the metrics data interruption and the job failure caused by locked resources [CELEBORN-1759] Fix reserve slots might lost partition location between 0.4 client and 0.5 server [CELEBORN-1749] Fix incorrect application diskBytesWritten metrics [CELEBORN-1713] RpcTimeoutException should include RPC address in message [CELEBORN-1728] Fix NPE when failing to connect to celeborn worker [CELEBORN-1727] Correct the calculation of worker diskInfo actualUsableSpace [CELEBORN-1718] Fix memory storage file won't hard split when memory file is full and worker has no disks [CELEBORN-1705] Fix disk buffer size is negative issue [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1696] StorageManager#cleanFile should remove file info [CELEBORN-1691] Fix the issue that upstream tasks don't rerun and the current task still retry when failed to decompress in flink [CELEBORN-1693] Fix storageFetcherPool concurrent problem [CELEBORN-1674] Fix reader thread name of MapPartitionData [CELEBORN-1668] Fix NPE when handle closed file writers [CELEBORN-1669] Fix NullPointerException for PartitionFilesSorter#updateSortedShuffleFiles after cleaning up expired shuffle key [CELEBORN-1667] Fix NPE & LEAK occurring prior to worker registration [CELEBORN-1664] Fix secret fetch failures after LEADER master failover [CELEBORN-1665] CommitHandler should process CommitFilesResponse with COMMIT_FILE_EXCEPTION status [CELEBORN-1663] Only register appShuffleDeterminate if stage using celeborn for shuffle [CELEBORN-1661] Make sure that the sortedFilesDb is initialized successfully when worker enable graceful shutdown [CELEBORN-1662] Handle PUSH_DATA_FAIL_PARTITION_NOT_FOUND in getPushDataFailCause [CELEBORN-1655] Fix read buffer dispatcher thread terminate unexpectedly [CELEBORN-1646] Catch exception of Files#getFileStore for DeviceMonitor and StorageManager for input/ouput error [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1579] Fix the memory leak of result partition [CELEBORN-1564] Fix actualUsableSpace of offerSlotsLoadAware condition on diskInfo [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1557] Fix totalSpace of DiskInfo for Master in HA mode [CELEBORN-1549] Fix networkLocation persistence into Ratis [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1547] Worker#listTopDiskUseApps should return celeborn.metrics.app.topDiskUsage.count applications [CELEBORN-1544] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1473] TransportClientFactory should register netty memory metric with source for shared pooled ByteBuf allocator [CELEBORN-1522] Fix applicationId extraction from shuffle key [CELEBORN-1516] DynamicConfigServiceFactory should support singleton [CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1439] Fix revive logic bug which will casue data correctness issue and job failiure [CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition Build [CELEBORN-2012] Add license for http5 [CELEBORN-1801] Remove out-of-dated flink 1.14 and 1.15 [CELEBORN-1746] Reduce the size of aws dependencies [CELEBORN-1677][BUILD] Update SCM information for SBT build configuration [CELEBORN-1649] Bumping up maven to 3.9.9 [CELEBORN-1658] Add Git Commit Info and Build JDK Spec to sbt Manifest [CELEBORN-1659] Fix sbt make-distribution for cli [CELEBORN-1616] Shade com.google.thirdparty to prevent dependency conflicts [CELEBORN-1606] Generate dependencies-client-flink-1.16 [CELEBORN-1600] Enable check server dependencies [CELEBORN-1556] Update Github actions to v4 [CELEBORN-1559] Fix make distribution script failed to recognize specific profile [CELEBORN-1526] Fix MR plugin can not run on Hadoop 3.1.0 [CELEBORN-1527] Error prone plugin should exclude target/generated-sources/java of module [CELEBORN-1505] Algin the celeborn server jackson dependency versions Documentation [CELEBORN-1870] Fix typos in in 'Developer' documents [CELEBORN-1860] Remove unused celeborn. .io.enableVerboseMetrics option [CELEBORN-1823] Remove unused remote-shuffle.job.min.memory-per-partition and remote-shuffle.job.min.memory-per-gate [CELEBORN-1811] Update default value for celeborn.master.slot.assign.extraSlots [CELEBORN-1789][DOC] Document on Java Columnar Shuffle [CELEBORN-1774] Update default value of celeborn. .io.mode to whether epoll mode is available [CELEBORN-1622][CIP-11] Adding documentation for Worker Tags feature [CELEBORN-1755] Update doc to include S3 as one of storage layers [CELEBORN-1752] Migration guide for unexpected shuffle RESTful api change since 0.5.0 [CELEBORN-1745] Remove application top disk usage code [CELEBORN-1719] Introduce celeborn.client.spark.stageRerun.enabled with alternative celeborn.client.spark.fetch.throwsFetchFailure to enable spark stage rerun [CELEBORN-1687] Highlight flink session cluster issue in doc [CELEBORN-1684] Fix ambiguous client jar expression of document [CELEBORN-1678] Add Celeborn CLI User guide in README [CELEBORN-1635] Introduce Blaze support document [CLEBORN-1555] Replace deprecated config celeborn.storage.activeTypes in docs and tests [CELEBORN-1566] Update docs about using HDFS [CELEBORN-1551] Fix wrong link in quota_management.md [CELEBORN-1437][DOC] Merge METRICS.md into monitoring.md [CELEBORN-1436][DOC] Move Rest API out from monitoring.md to webapi.md [CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1466] Add local command in celeborn_ratis_shell.md Dependencies [CELEBORN-2030] Bump Spark from 3.5.5 to 3.5.6 [CELEBORN-2013] Upgrade scala binary version of spark-3.3, spark-3.4, spark-3.5 profile to 2.13.8 [CELEBORN-1895] Bump log4j2 version to 2.24.3 [CELEBORN-1890] Bump Spark from 3.5.4 to 3.5.5 [CELEBORN-1884] Bump rocksdbjni version from 9.5.2 to 9.10.0 [CELEBORN-1877] Bump zstd-jni version from 1.5.2-1 to 1.5.7-1 [CELEBORN-1872] Bump Flink from 1.19.1, 1.20.0 to 1.19.2, 1.20.1 [CELEBORN-1864] Bump Netty version from 4.1.115.Final to 4.1.118.Final [CELEBORN-1862] Bump Ratis version from 3.1.2 to 3.1.3 [CELEBORN-1842] Bump ap-loader version from 3.0-8 to 3.0-9 [CELEBORN-1806] Bump Spark from 3.5.3 to 3.5.4 [CELEBORN-1712] Bump Netty version from 4.1.109.Final to 4.1.115.Final [CELEBORN-1748] Deprecate identity provider configs tied with quota [CELEBORN-1702] Bump Ratis version from 3.1.1 to 3.1.2 [CELEBORN-1708] Bump protobuf version from 3.21.7 to 3.25.5 [CELEBORN-1709] Bump jetty version from 9.4.52.v20230823 to 9.4.56.v20240826 [CELEBORN-1710] Bump commons-io version from 2.13.0 to 2.17.0 [CELEBORN-1672] Bump Spark from 3.4.3 to 3.4.4 [CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7 [CELEBORN-1525] Bump Ratis version from 3.1.0 to 3.1.1 [CELEBORN-1613] Bump Spark from 3.5.2 to 3.5.3 [CELEBORN-1605] Bump commons-lang3 version from 3.13.0 to 3.17.0 [CELEBORN-1604] Bump rocksdbjni version from 8.11.3 to 9.5.2 [CELEBORN-1562] Bump Spark from 3.5.1 to 3.5.2 [CELEBORN-1512] Bump Flink from 1.19.0 to 1.19.1 [CELEBORN-1499] Bump Ratis version from 3.0.1 to 3.1.0 Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.6.0 version: Contributors Aidar Bariev Amandeep Singh Aravind Patnam Arsen Gumin A Vishnusankar Biao Geng Binjie Yang Bj\u00f6rn Boschman Bowen Liang Cheng Pan Chongchen Chen Erik Fang Fei Wang Fu Chen Guangwei Hong Haotian Cao He Zhao Jiaming Xie Jianfu Li Jiashu Xiong Jinqian Fan Kerwin Zhang Keyong Zhou Kun Wan Leo Li Lianne Li Madhukar Minchu Yang Mingxiao Feng Mridul Muralidharan Nan Zhu Nicholas Jiang Nicolas Fraison Pengqi Li Sanskar Modi Saurabh Dubey Shaoyun Chen Shengjie Wang Shlomi Uubul Veli Yang Weijie Guo Xianming Lei Xinyu Wang Xu Huang Yajun Gao Yanze Jiang Yi Chen Yi Zhu Yuting Wang Yuxin Tan Zhao Zhao Zhaohui Xu Zhengqi Zhang Zhentao Shuai Ziyi Wu","title":"Apache Celeborn\u2122 0.6.0 Release Notes"},{"location":"community/release_notes/release_note_0.6.0/#apache-celeborntm-060-release-notes","text":"","title":"Apache Celeborn\u2122 0.6.0 Release Notes"},{"location":"community/release_notes/release_note_0.6.0/#highlight","text":"Support Flink hybrid shuffle integration with Apache Celeborn Support Spark 4.0.0 Support Flink 2.0 Support HARD_SPLIT in PushMergedData Optimize skew partition logic for Reduce Mode to avoid sorting shuffle files Refine the celeborn RESTful APIs and introduce Celeborn CLI for automation Supporting worker Tags CongestionController supports control traffic by user/worker traffic speed Support read shuffle from S3 Support CppClient in Celeborn HELM Chart Optimization","title":"Highlight"},{"location":"community/release_notes/release_note_0.6.0/#improvement","text":"[CELEBORN-2045] Add logger sinks to allow persist metrics data and avoid possible worker OOM [CELEBORN-2046] Specify extractionDir of AsyncProfilerLoader with celeborn.worker.jvmProfiler.localDir [CELEBORN-2027] Allow CelebornShuffleReader to decompress data on demand [CELEBORN-2003] Add retry mechanism when completing S3 multipart upload [CELEBORN-2018] Support min number of workers selected for shuffle [CELEBORN-2006] LifecycleManager should avoid parsing shufflePartitionType every time [CELEBORN-2007] Reduce PartitionLocation memory usage [CELEBORN-2008] SlotsAllocator should select disks randomly in RoundRobin mode [CELEBORN-1896] delete data from failed to fetch shuffles [CELEBORN-2004] Filter empty partition before createIntputStream [CELEBORN-2002][MASTER] Audit shuffle lifecycle in separate log file [CELEBORN-1993] CelebornConf introduces celeborn. .io.threads to specify number of threads used in the client thread pool [CELEBORN-1995] Optimize memory usage for push failed batches [CELEBORN-1994] Introduce disruptor dependency to support asynchronous logging of log4j2 [CELEBORN-1965] Rely on all default hadoop providers for S3 auth [CELEBORN-1982] Slot Selection Perf Improvements [CELEBORN-1961] Convert Resource.proto from Protocol Buffers version 2 to version 3 [CELEBORN-1931] use gather API for local flusher to optimize write io pattern [CELEBORN-1916] Support Aliyun OSS Based on MPU Extension Interface [CELEBORN-1925] Support Flink 2.0 [CELEBORN-1844][CIP-8] introduce tier writer proxy and simplify partition data writer [CELEBORN-1921] Broadcast large GetReducerFileGroupResponse to prevent Spark driver network exhausted [CELEBORN-1928][CIP-12] Support HARD_SPLIT in PushMergedData should support handle older worker success response [CELEBORN-1930][CIP-12] Support HARD_SPLIT in PushMergedData should handle congestion control NPE issue [CELEBORN-1577][PHASE2] QuotaManager should support interrupt shuffle [CELEBORN-1856] Support stage-rerun when read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1894] Allow skipping already read chunks during unreplicated shuffle read retried [CELEBORN-1909] Support pre-run static code blocks of TransportMessages to improve performance of protobuf serialization [CELEBORN-1911] Move multipart-uploader to multipart-uploader/multipart-uploader-s3 for extensibility [CELEBORN-1910] Remove redundant synchronized of isTerminated in ThreadUtils#sameThreadExecutorService [CELEBORN-1898] SparkOutOfMemoryError compatible with Spark 4.0 and 4.1 [CELEBORN-1897] Avoid calling toString for too long messages [CELEBORN-1882] Support configuring the SSL handshake timeout for SSLHandler [CELEBORN-1883] Replace HashSet with ConcurrentHashMap.newKeySet for ShuffleFileGroups [CELEBORN-1858] Support DfsPartitionReader read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1879] Ignore invalid chunk range generated by splitSkewedPartitionLocations [CELEBORN-1857] Support LocalPartitionReader read partition by chunkOffsets when enable optimize skew partition read [CELEBORN-1876] Log remote address on RPC exception for TransportRequestHandler [CELEBORN-1865] Update master endpointRef when master leader is abnormal [CELEBORN-1319] Optimize skew partition logic for Reduce Mode to avoid sorting shuffle files [CELEBORN-1861] Support celeborn.worker.storage.baseDir.diskType option to specify disk type of base directory for worker [CELEBORN-1757] Add retry when sending RPC to LifecycleManager [CELEBORN-1859] DfsPartitionReader and LocalPartitionReader should reuse pbStreamHandlers get from BatchOpenStream request [CELEBORN-1843] Optimize roundrobin for more balanced disk slot allocation [CELEBORN-1854] Change receive revive request log level to debug [CELEBORN-1841] Support custom implementation of EventExecutorChooser to avoid deadlock when calling await in EventLoop thread [CELEBORN-1847][CIP-8] Introduce local and DFS tier writer [CELEBORN-1850] Setup worker endpoint after initalizing controller [CELEBORN-1838] Interrupt spark task should not report fetch failure [CELEBORN-1835][CIP-8] Add tier writer base and memory tier writer [CELEBORN-1829] Replace waitThreadPoll's thread pool with ScheduledExecutorService in Controller [CELEBORN-1720] Prevent stage re-run if another task attempt is running or successful [CELEBORN-1482][CIP-8] Add partition meta handler [CELEBORN-1812] Distinguish sorting-file from sort-tasks waiting to be submitted [CELEBORN-1737] Support build tez client package [CELEBORN-1802] Fail the celeborn master/worker start if CELEBORN_CONF_DIR is not directory [CELEBORN-1701][FOLLOWUP] Support stage rerun for shuffle data lost [CELEBORN-1413] Support Spark 4.0 [CELEBORN-1753] Optimize the code for exists and find method [CELEBORN-1777] Add java.security.jgss/sun.security.krb5 to DEFAULT_MODULE_OPTIONS [CELEBORN-1731] Support merged kv input for Tez [CELEBORN-1732] Support unordered kv input for Tez [CELEBORN-1733] Support ordered grouped kv input for Tez [CELEBORN-1721][CIP-12] Support HARD_SPLIT in PushMergedData [CELEBORN-1758] Remove the empty user resource consumption from worker heartbeat [CELEBORN-1729] Support ordered KV output for Tez [CELEBORN-1730] Support unordered KV output for Tez [CELEBORN-1612] Add a basic reader writer class to Tez [CELEBORN-1725] Optimize performance of handling MapperEnd RPC in LifecycleManager [CELEBORN-1700] Flink supports fallback to vanilla Flink built-in shuffle implementation [CELEBORN-1621][CIP-11] Predefined worker tags expr via dynamic configs [CELEBORN-1545] Add Tez plugin skeleton and dag app master [CELEBORN-1530] support MPU for S3 [CELEBORN-1618][CIP-11] Supporting tags via DB Config Service [CELEBORN-1726] Update WorkerInfo when transition worker state [CELEBORN-1715] RemoteShuffleMaster should check celeborn.client.push.replicate.enabled in constructor [CELEBORN-1714] Optimize handleApplicationLost [CELEBORN-1660] Cache available workers and only count the available workers device free capacity [CELEBORN-1619][CIP-11] Integrate tags manager with config service [CELEBORN-1071] Support stage rerun for shuffle data lost [CELEBORN-1697] Improve ThreadStackTrace for thread dump [CELEBORN-1671] CelebornShuffleReader will try replica if create client failed [CELEBORN-1682] Add java tools.jar into classpath for JVM quake [CELEBORN-1660] Using map for workers to find worker fast [CELEBORN-1673] Support retry create client [CELEBORN-1577][PHASE1] Storage quota should support interrupt shuffle [CELEBORN-1642][CIP-11] Support multiple worker tags [CELEBORN-1636] Client supports dynamic update of Worker resources on the server [CELEBORN-1651] Support ratio threshold of unhealthy disks for excluding worker [CELEBORN-1601] Support revise lost shuffles [CELEBORN-1487][PHASE2] CongestionController support dynamic config [CELEBORN-1648] Refine AppUniqueId with UUID suffix [CELEBORN-1490][CIP-6] Introduce tier consumer for hybrid shuffle [CELEBORN-1645] Introduce ShuffleFallbackPolicy to support custom implementation of shuffle fallback policy for CelebornShuffleFallbackPolicyRunner [CELEBORN-1620][CIP-11] Support passing worker tags via RequestSlots message [CELEBORN-1487][PHASE1] CongestionController support control traffic by user/worker traffic speed [CELEBORN-1637] Enhance config to bypass memory check for partition file sorter [CELEBORN-1638] Improve the slots allocator performance [CELEBORN-1617][CIP-11] Support workers tags in FS Config Service [CELEBORN-1615] Start the http server after all handlers added [CELEBORN-1574] Speed up unregister shuffle by batch processing [CELEBORN-1625] Add parameter skipCompress for pushOrMergeData [CELEBORN-1597][CIP-11] Implement TagsManager [CELEBORN-1490][CIP-6] Impl worker write process for Flink Hybrid Shuffle [CELEBORN-1602] do hard split for push merged data RPC with disk full [CELEBORN-1594] Refine dynamicConfig template and prevent NPE [CELEBORN-1513] Support wildcard bind in dual stack environments [CELEBORN-1587] Change to debug logging on client side for SortBasedPusher trigger push [CELEBORN-1496] Differentiate map results with only different stageAttemptId [CELEBORN-1583] MasterClient#sendMessageInner should throw Throwable for celeborn.masterClient.maxRetries is 0 [CELEBORN-1578] Make Worker#timer have thread name and daemon [CELEBORN-1580] ReadBufferDispacther should notify exception to listener [CELEBORN-1575] TimeSlidingHub should remove expire node when reading [CELEBORN-1560] Remove usages of deprecated Files.createTempDir of Guava [CELEBORN-1567] Support throw FetchFailedException when Data corruption detected [CELEBORN-1568] Support worker retries in MiniCluster [CELEBORN-1563] Log networkLocation in WorkerInfo [CELEBORN-1531] Refactor self checks in master [CELEBORN-1550] Add support of providing custom dynamic store backend implementation [CELEBORN-1529] Read shuffle data from S3 [CELEBORN-1518] Add support for Apache Spark barrier stages [CELEBORN-1542] Master supports to check the worker host pattern on worker registration [CELEBORN-1535] Support to disable master workerUnavailableInfo expiration [CELEBORN-1511] Add support for custom master endpoint resolver [CELEBORN-1541] Enhance the readable address for internal port [CELEBORN-1533] Log location when CelebornInputStream#fillBuffer fails [CELEBORN-1524] Support IPv6 hostnames for Apache Ratis [CELEBORN-1519] Do not update estimated partition size if it is unchanged [CELEBORN-1521] Introduce celeborn-spi module for authentication extensions [CELEBORN-1469] Support writing shuffle data to OSS(S3 only) [CELEBORN-1446] Enable chunk prefetch when initialize CelebornInputStream [CELEBORN-1509] Reply response without holding a lock [CELEBORN-1543] Support Flink 1.20 [CELEBORN-1504] Support for Apache Flink 1.16 [CELEBORN-1500] Filter out empty InputStreams [CELEBORN-1495] CelebornColumnDictionary supports dictionary of float and double column type [CELEBORN-1494] Support IPv6 addresses in PbSerDeUtils.fromPackedPartitionLocations [CELEBORN-1483] Add storage policy [CELEBORN-1479] Report register shuffle failed reason in exception [CELEBORN-1489] Update Flink support with authentication support [CELEBORN-1485] Refactor addCounter, addGauge and addTimer of AbstractSource to reduce CPU utilization [CELEBORN-1472] Reduce CongestionController#userBufferStatuses call times [CELEBORN-1471] CelebornScalaObjectMapper supports configuring FAIL_ON_UNKNOWN_PROPERTIES to false","title":"Improvement"},{"location":"community/release_notes/release_note_0.6.0/#flink-hybrid-shuffle","text":"[CELEBORN-1867][FLINK] Fix flink client memory leak of TransportResponseHandler#outstandingRpcs for handling addCredit and notifyRequiredSegment response [CELEBORN-1866][FLINK] Fix CelebornChannelBufferReader request more buffers than needed [CELEBORN-1490][CIP-6] Support process large buffer in flink hybrid shuffle [CELEBORN-1490][CIP-6] Add Flink hybrid shuffle doc [CELEBORN-1490][CIP-6] Impl worker read process in Flink Hybrid Shuffle [CELEBORN-1490][CIP-6] Introduce tier producer in celeborn flink client [CELEBORN-1490][CIP-6] Introduce tier factory and master agent in flink hybrid shuffle [CELEBORN-1490][CIP-6] Enrich register shuffle method [CELEBORN-1490][CIP-6] Extends FileMeta to support hybrid shuffle [CELEBORN-1490][CIP-6] Extends message to support hybrid shuffle","title":"Flink hybrid shuffle"},{"location":"community/release_notes/release_note_0.6.0/#restful-api-and-cli","text":"[CELEBORN-1056][FOLLOWUP] Support upsert and delete of dynamic configuration management [CELEBORN-2020] Support http authentication for Celeborn CLI [CELEBORN-1875] Support to get workers topology information with RESTful api [CELEBORN-1797] Support to adjust the logger level with RESTful API during runtime [CELEBORN-1750] Return struct worker resource consumption information with RESTful api [CELEBORN-1707] Audit all RESTful api calls and use separate restAuditFile [CELEBORN-1632] Support to apply ratis local raft_meta_conf command with RESTful api [CELEBORN-1599] Container Info REST API [CELEBORN-1630] Support to apply ratis peer operation with RESTful api [CELEBORN-1631] Support to apply ratis snapshot operation with RESTful api [CELEBORN-1633] Return more raft group information [CELEBORN-1629] Support to apply ratis election operation with RESTful api [CELEBORN-1609] Support SSL for celeborn RESTful service [CELEBORN-1608] Reduce redundant response for RESTful api [CELEBORN-1607] Enable useEnumCaseInsensitive for openapi-generator [CELEBORN-1589] Ensure master is leader for some POST request APIs [CELEBORN-1572] Celeborn CLI initial REST API support [CELEBORN-1553] Using the request base url as swagger server [CELEBORN-1537] Support to remove workers unavailable info with RESTful api [CELEBORN-1546] Support authorization on swagger UI [CELEBORN-1477] Using openapi-generator apache-httpclient library instead of jersey2 [CELEBORN-1493] Check admin privileges for http mutative requests [CELEBORN-1477][CIP-9] Refine the celeborn RESTful APIs [CELEBORN-1476] Enhance the RESTful response error msg [CELEBORN-1475] Fix unknownExcludedWorkers filter for /exclude request [CELEBORN-1318] Support celeborn http authentication","title":"RESTful API and CLI"},{"location":"community/release_notes/release_note_0.6.0/#monitoring","text":"[CELEBORN-2024] Publish commit files fail count metrics [CELEBORN-1892] Adding register with master fail count metric for worker [CELEBORN-2005] Introduce numBytesIn, numBytesOut, numBytesInPerSecond, numBytesOutPerSecond metrics for RemoteShuffleServiceFactory [CELEBORN-1800] Introduce ApplicationTotalCount and ApplicationFallbackCount metric to record the total and fallback count of application [CELEBORN-1974] ApplicationId as metrics label should be behind a config flag [CELEBORN-1968] Publish metric for unreleased partition location count when worker was gracefully shutdown [CELEBORN-1977] Add help/type on prometheus exposed metrics [CELEBORN-1831] Add ratis commitIndex metrics [CELEBORN-1817] add committed file size metrics [CELEBORN-1791] All NettyMemoryMetrics should register to source [CELEBORN-1804] Shuffle environment metrics of RemoteShuffleEnvironment should use Shuffle.Remote metric group [CELEBORN-1634][FOLLOWUP] Add rpc metrics into grafana dashboard [CELEBORN-1766] Add detail metrics about fetch chunk [CELEBORN-1756] Only gauge hdfs metrics if HDFS storage enabled to reduce metrics [CELEBORN-1634] Support queue time/processing time metrics for rpc framework [CELEBORN-1706] Use bytes(IEC) unit instead of bytes(SI) for size related metrics in prometheus dashboard [CELEBORN-1685] ShuffleFallbackPolicy supports ShuffleFallbackCount metric [CELEBORN-1680] Introduce ShuffleFallbackCount metrics [CELEBORN-1444][FOLLOWUP] Add IsDecommissioningWorker to celeborn dashboard [CELEBORN-1640] NettyMemoryMetrics supports numHeapArenas, numDirectArenas, tinyCacheSize, smallCacheSize, normalCacheSize, numThreadLocalCaches and chunkSize [CELEBORN-1656] Remove duplicate UserProduceSpeed metrics [CELEBORN-1627] Introduce instance variable for celeborn dashboard to filter metrics [CELEBORN-1582] Publish metric for unreleased shuffle count when worker was decommissioned [CELEBORN-1501] Introduce application dimension resource consumption metrics of Worker [CELEBORN-1586] Add available workers Metrics [CELEBORN-1581] Fix incorrect metrics of DeviceCelebornFreeBytes and DeviceCelebornTotalBytes [CELEBORN-1491] introduce flusher working queue size metric","title":"Monitoring"},{"location":"community/release_notes/release_note_0.6.0/#cpp-client","text":"[CELEBORN-1978][CIP-14] Add code style checking for cppClient [CELEBORN-1958][CIP-14] Add testsuite to test writing with javaClient and reading with cppClient [CELEBORN-1874][CIP-14] Add CICD procedure in github action for cppClient [CELEBORN-1932][CIP-14] Adapt java's serialization to support cpp serialization for GetReducerFileGroup/Response [CELEBORN-1915][CIP-14] Add reader's ShuffleClient to cppClient [CELEBORN-1906][CIP-14] Add CelebornInputStream to cppClient [CELEBORN-1881][CIP-14] Add WorkerPartitionReader to cppClient [CELEBORN-1871][CIP-14] Add NettyRpcEndpointRef to cppClient [CELEBORN-1863][CIP-14] Add TransportClient to cppClient [CELEBORN-1845][CIP-14] Add MessageDispatcher to cppClient [CELEBORN-1836][CIP-14] Add Message to cppClient [CELEBORN-1827][CIP-14] Add messageDecoder to cppClient [CELEBORN-1821][CIP-14] Add controlMessages to cppClient [CELEBORN-1819][CIP-14] Refactor cppClient with nested namespace [CELEBORN-1814][CIP-14] Add transportMessage to cppClient [CELEBORN-1809][CIP-14] Add partitionLocation to cppClient [CELEBORN-1799][CIP-14] Add celebornConf to cppClient [CELEBORN-1785][CIP-14] Add baseConf to cppClient [CELEBORN-1772][CIP-14] Add memory module to cppClient [CELEBORN-1761][CIP-14] Add cppProto to cppClient [CELEBORN-1754][CIP-14] Add exceptions and checking utils to cppClient [CELEBORN-1751][CIP-14] Add celebornException utils to cppClient [CELEBORN-1740][CIP-14] Add stackTrace utils to cppClient [CELEBORN-1741][CIP-14] Add processBase utils to cppClient [CELEBORN-1724][CIP-14] Add environment setup tools for CppClient development","title":"CPP Client"},{"location":"community/release_notes/release_note_0.6.0/#helm-chart-optimization","text":"[CELEBORN-2017][HELM] Add namespace to the metadata [CELEBORN-1528][HELM] Use volume claim template to support various storage backend [CELEBORN-1996][HELM] Rename volumes.{master,worker} to {master,worker}.volumes and {master.worker}.volumeMounts [CELEBORN-1989][HELM] Split securityContext into master.podSecurityContext and worker.podSecurityContext [CELEBORN-1988][HELM] Split hostNetwork into master.hostNetwork and worker.hostNetwork [CELEBORN-1987][HELM] Split dnsPolicy into master.dnsPolicy and worker.dnsPolicy [CELEBORN-1981][HELM] Rename masterReplicas and workerReplicas to master.replicas and worker.replicas [CELEBORN-1985][HELM] Add new values master.envFrom and worker.envFrom [CELEBORN-1986][HELM] Rename priorityClass.{master,worker} to {master,worker}.priorityClass [CELEBORN-1980][HELM] Split environments into master.env and worker.env [CELEBORN-1972][HELM] Rename affinity.{master,worker} to {master,worker}.affinity [CELEBORN-1951][HELM] Rename resources.{master,worker} to {master,worker}.resoruces [CELEBORN-1962][HELM] Split tolerations into master.tolerations and worker.tolerations [CELEBORN-1955][HELM] Split nodeSelector into master.nodeSelector and worker.nodeSelector [CELEBORN-1953][HELM] Split podAnnotations into master.annotations and worker.annotations [CELEBORN-1954][HELM] Add a new value image.registry [CELEBORN-1952][HELM] Define template helpers for master/worker respectively [CELEBORN-1532][HELM] Read log4j2 and metrics configurations from file [CELEBORN-1830] Chart statefulset resources key duplicate [CELEBORN-1788] Add role and roleBinding helm charts [CELEBORN-1786] add serviceAccount helm chart [CELEBORN-1780] Add support for NodePort Service per Master replica [CELEBORN-1552] automatically support prometheus to scrape metrics for helm chart","title":"HELM Chart Optimization"},{"location":"community/release_notes/release_note_0.6.0/#stability-and-bug-fix","text":"[CELEBORN-1721][FOLLOWUP] Return softsplit if there is no hardsplit for pushMergeData [CELEBORN-2043] Fix IndexOutOfBoundsException exception in getEvictedFileWriter [CELEBORN-2040] Avoid throw FetchFailedException when GetReducerFileGroupResponse failed via broadcast [CELEBORN-2042] Fix FetchFailure handling when TaskSetManager is not found [CELEBORN-2033] updateProduceBytes should be called even if updateProduceBytes throws exception [CELEBORN-2025] RpcFailure Scala 2.13 serialization is incompatible [CELEBORN-2022] Spark4 Client should package commons-io [CELEBORN-2023] Spark4 Client incompatible with isLocalMaster method [CELEBORN-2009] Commit files request failure should exclude worker in LifecycleManager [CELEBORN-2015] Retry IOException failures for RPC requests [CELEBORN-1902] Read client throws PartitionConnectionException [CELEBORN-2000] Ignore the getReducerFileGroup timeout before shuffle stage end [CELEBORN-1960] Fix PauseSpentTime only append the interval check time [CELEBORN-1998] RemoteShuffleEnvironment should not register InputChannelMetrics repeatedly [CELEBORN-1999] OpenStreamTime should use requestId to record cost time [CELEBORN-1855] LifecycleManager return appshuffleId for non barrier stage when fetch fail has been reported [CELEBORN-1948] Fix the issue where replica may lose data when HARD_SPLIT occurs during handlePushMergeData [CELEBORN-1912] Client should send heartbeat to worker for processing heartbeat to avoid reading idleness of worker which enables heartbeat [CELEBORN-1992] Ensure hadoop FS are not closed by hadoop ShutdownHookManager [CELEBORN-1919] Hardsplit batch tracking should be disabled when pushing only a single replica [CELEBORN-1979] Change partition manager should respect the celeborn.storage.availableTypes [CELEBORN-1983] Fix fetch fail not throw due to reach spark maxTaskFailures [CELEBORN-1976] CommitHandler should use celeborn.client.rpc.commitFiles.askTimeout for timeout of doParallelCommitFiles [CELEBORN-1966] Added fix to get userinfo in celeborn [CELEBORN-1969] Remove celeborn.client.shuffle.mapPartition.split.enabled to enable shuffle partition split at default for MapPartition [CELEBORN-1970] Use StatusCode.fromValue instead of Utils.toStatusCode [CELEBORN-1646][FOLLOWUP] DeviceMonitor should notifyObserversOnError with CRITICAL_ERROR disk status for input/ouput error [CELEBORN-1929] Avoid unnecessary buffer loss to get better buffer reusability [CELEBORN-1918] Add batchOpenStream time to fetch wait time [CELEBORN-1947] Reduce log for CelebornShuffleReader sleeping before inputStream ready [CELEBORN-1923] Correct Celeborn available slots calculation logic [CELEBORN-1914] incWriteTime when ShuffleWriter invoke pushGiantRecord [CELEBORN-1822] Respond to RegisterShuffle with max epoch PartitionLocation to avoid revive [CELEBORN-1899] Fix configuration bug in shuffle s3 [CELEBORN-1885] Fix nullptr exceptions in FetchChunk after worker restart [CELEBORN-1889] Fix scala 2.13 complie error [CELEBORN-1846] Fix the StreamHandler usage in fetching chunk when task attempt is odd [CELEBORN-1792] MemoryManager resume should use pinnedDirectMemory instead of usedDirectMemory [CELEBORN-1832] MapPartitionData should create fixed thread pool with registration of ThreadPoolSource [CELEBORN-1820] Failing to write and flush StreamChunk data should be counted as FETCH_CHUNK_FAIL [CELEBORN-1818] Fix incorrect timeout exception when waiting on no pending writes [CELEBORN-1763] Fix DataPusher be blocked for a long time [CELEBORN-1783] Fix Pending task in commitThreadPool wont be canceled [CELEBORN-1782] Worker in congestion control should be in blacklist to avoid impact new shuffle [CELEBORN-1510] Partial task unable to switch to the replica [CELEBORN-1778] Fix commitInfo NPE and add assert in LifecycleManagerCommitFilesSuite [CELEBORN-1670] Avoid swallowing InterruptedException in ShuffleClientImpl Revert \"- [CELEBORN-1376] Push data failed should always release request body\" [CELEBORN-1770] FlushNotifier should setException for all Throwables in Flusher [CELEBORN-1769] Fix packed partition location cause GetReducerFileGroupResponse lose location [CELEBORN-1767] Fix occasional errors in UT when creating workers [CELEBORN-1765] Fix NPE when removeFileInfo in StorageManager [CELEBORN-1760] OOM causes disk buffer unable to be released [CELEBORN-1743] Resolve the metrics data interruption and the job failure caused by locked resources [CELEBORN-1759] Fix reserve slots might lost partition location between 0.4 client and 0.5 server [CELEBORN-1749] Fix incorrect application diskBytesWritten metrics [CELEBORN-1713] RpcTimeoutException should include RPC address in message [CELEBORN-1728] Fix NPE when failing to connect to celeborn worker [CELEBORN-1727] Correct the calculation of worker diskInfo actualUsableSpace [CELEBORN-1718] Fix memory storage file won't hard split when memory file is full and worker has no disks [CELEBORN-1705] Fix disk buffer size is negative issue [CELEBORN-1686] Avoid return the same pushTaskQueue [CELEBORN-1696] StorageManager#cleanFile should remove file info [CELEBORN-1691] Fix the issue that upstream tasks don't rerun and the current task still retry when failed to decompress in flink [CELEBORN-1693] Fix storageFetcherPool concurrent problem [CELEBORN-1674] Fix reader thread name of MapPartitionData [CELEBORN-1668] Fix NPE when handle closed file writers [CELEBORN-1669] Fix NullPointerException for PartitionFilesSorter#updateSortedShuffleFiles after cleaning up expired shuffle key [CELEBORN-1667] Fix NPE & LEAK occurring prior to worker registration [CELEBORN-1664] Fix secret fetch failures after LEADER master failover [CELEBORN-1665] CommitHandler should process CommitFilesResponse with COMMIT_FILE_EXCEPTION status [CELEBORN-1663] Only register appShuffleDeterminate if stage using celeborn for shuffle [CELEBORN-1661] Make sure that the sortedFilesDb is initialized successfully when worker enable graceful shutdown [CELEBORN-1662] Handle PUSH_DATA_FAIL_PARTITION_NOT_FOUND in getPushDataFailCause [CELEBORN-1655] Fix read buffer dispatcher thread terminate unexpectedly [CELEBORN-1646] Catch exception of Files#getFileStore for DeviceMonitor and StorageManager for input/ouput error [CELEBORN-1652] Throw TransportableError for failure of sending PbReadAddCredit to avoid flink task get stuck [CELEBORN-1643] DataPusher handle InterruptedException [CELEBORN-1579] Fix the memory leak of result partition [CELEBORN-1564] Fix actualUsableSpace of offerSlotsLoadAware condition on diskInfo [CELEBORN-1573] Change to debug logging on client side for reserve slots [CELEBORN-1557] Fix totalSpace of DiskInfo for Master in HA mode [CELEBORN-1549] Fix networkLocation persistence into Ratis [CELEBORN-1558] Fix the incorrect decrement of pendingWrites in handlePushMergeData [CELEBORN-1547] Worker#listTopDiskUseApps should return celeborn.metrics.app.topDiskUsage.count applications [CELEBORN-1544] ShuffleWriter needs to call close finally to avoid memory leaks [CELEBORN-1473] TransportClientFactory should register netty memory metric with source for shared pooled ByteBuf allocator [CELEBORN-1522] Fix applicationId extraction from shuffle key [CELEBORN-1516] DynamicConfigServiceFactory should support singleton [CELEBORN-1515] SparkShuffleManager should set lifecycleManager to null after stopping lifecycleManager in Spark 2 [CELEBORN-1439] Fix revive logic bug which will casue data correctness issue and job failiure [CELEBORN-1507] Prevent invalid Filegroups from being used [CELEBORN-1478] Fix wrong use partitionId as shuffleId when readPartition","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.6.0/#build","text":"[CELEBORN-2012] Add license for http5 [CELEBORN-1801] Remove out-of-dated flink 1.14 and 1.15 [CELEBORN-1746] Reduce the size of aws dependencies [CELEBORN-1677][BUILD] Update SCM information for SBT build configuration [CELEBORN-1649] Bumping up maven to 3.9.9 [CELEBORN-1658] Add Git Commit Info and Build JDK Spec to sbt Manifest [CELEBORN-1659] Fix sbt make-distribution for cli [CELEBORN-1616] Shade com.google.thirdparty to prevent dependency conflicts [CELEBORN-1606] Generate dependencies-client-flink-1.16 [CELEBORN-1600] Enable check server dependencies [CELEBORN-1556] Update Github actions to v4 [CELEBORN-1559] Fix make distribution script failed to recognize specific profile [CELEBORN-1526] Fix MR plugin can not run on Hadoop 3.1.0 [CELEBORN-1527] Error prone plugin should exclude target/generated-sources/java of module [CELEBORN-1505] Algin the celeborn server jackson dependency versions","title":"Build"},{"location":"community/release_notes/release_note_0.6.0/#documentation","text":"[CELEBORN-1870] Fix typos in in 'Developer' documents [CELEBORN-1860] Remove unused celeborn. .io.enableVerboseMetrics option [CELEBORN-1823] Remove unused remote-shuffle.job.min.memory-per-partition and remote-shuffle.job.min.memory-per-gate [CELEBORN-1811] Update default value for celeborn.master.slot.assign.extraSlots [CELEBORN-1789][DOC] Document on Java Columnar Shuffle [CELEBORN-1774] Update default value of celeborn. .io.mode to whether epoll mode is available [CELEBORN-1622][CIP-11] Adding documentation for Worker Tags feature [CELEBORN-1755] Update doc to include S3 as one of storage layers [CELEBORN-1752] Migration guide for unexpected shuffle RESTful api change since 0.5.0 [CELEBORN-1745] Remove application top disk usage code [CELEBORN-1719] Introduce celeborn.client.spark.stageRerun.enabled with alternative celeborn.client.spark.fetch.throwsFetchFailure to enable spark stage rerun [CELEBORN-1687] Highlight flink session cluster issue in doc [CELEBORN-1684] Fix ambiguous client jar expression of document [CELEBORN-1678] Add Celeborn CLI User guide in README [CELEBORN-1635] Introduce Blaze support document [CLEBORN-1555] Replace deprecated config celeborn.storage.activeTypes in docs and tests [CELEBORN-1566] Update docs about using HDFS [CELEBORN-1551] Fix wrong link in quota_management.md [CELEBORN-1437][DOC] Merge METRICS.md into monitoring.md [CELEBORN-1436][DOC] Move Rest API out from monitoring.md to webapi.md [CELEBORN-1486] Introduce ClickHouse Backend in Gluten Support document [CELEBORN-1466] Add local command in celeborn_ratis_shell.md","title":"Documentation"},{"location":"community/release_notes/release_note_0.6.0/#dependencies","text":"[CELEBORN-2030] Bump Spark from 3.5.5 to 3.5.6 [CELEBORN-2013] Upgrade scala binary version of spark-3.3, spark-3.4, spark-3.5 profile to 2.13.8 [CELEBORN-1895] Bump log4j2 version to 2.24.3 [CELEBORN-1890] Bump Spark from 3.5.4 to 3.5.5 [CELEBORN-1884] Bump rocksdbjni version from 9.5.2 to 9.10.0 [CELEBORN-1877] Bump zstd-jni version from 1.5.2-1 to 1.5.7-1 [CELEBORN-1872] Bump Flink from 1.19.1, 1.20.0 to 1.19.2, 1.20.1 [CELEBORN-1864] Bump Netty version from 4.1.115.Final to 4.1.118.Final [CELEBORN-1862] Bump Ratis version from 3.1.2 to 3.1.3 [CELEBORN-1842] Bump ap-loader version from 3.0-8 to 3.0-9 [CELEBORN-1806] Bump Spark from 3.5.3 to 3.5.4 [CELEBORN-1712] Bump Netty version from 4.1.109.Final to 4.1.115.Final [CELEBORN-1748] Deprecate identity provider configs tied with quota [CELEBORN-1702] Bump Ratis version from 3.1.1 to 3.1.2 [CELEBORN-1708] Bump protobuf version from 3.21.7 to 3.25.5 [CELEBORN-1709] Bump jetty version from 9.4.52.v20230823 to 9.4.56.v20240826 [CELEBORN-1710] Bump commons-io version from 2.13.0 to 2.17.0 [CELEBORN-1672] Bump Spark from 3.4.3 to 3.4.4 [CELEBORN-1666] Bump scala-protoc from 1.0.6 to 1.0.7 [CELEBORN-1525] Bump Ratis version from 3.1.0 to 3.1.1 [CELEBORN-1613] Bump Spark from 3.5.2 to 3.5.3 [CELEBORN-1605] Bump commons-lang3 version from 3.13.0 to 3.17.0 [CELEBORN-1604] Bump rocksdbjni version from 8.11.3 to 9.5.2 [CELEBORN-1562] Bump Spark from 3.5.1 to 3.5.2 [CELEBORN-1512] Bump Flink from 1.19.0 to 1.19.1 [CELEBORN-1499] Bump Ratis version from 3.0.1 to 3.1.0","title":"Dependencies"},{"location":"community/release_notes/release_note_0.6.0/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.6.0 version: Contributors Aidar Bariev Amandeep Singh Aravind Patnam Arsen Gumin A Vishnusankar Biao Geng Binjie Yang Bj\u00f6rn Boschman Bowen Liang Cheng Pan Chongchen Chen Erik Fang Fei Wang Fu Chen Guangwei Hong Haotian Cao He Zhao Jiaming Xie Jianfu Li Jiashu Xiong Jinqian Fan Kerwin Zhang Keyong Zhou Kun Wan Leo Li Lianne Li Madhukar Minchu Yang Mingxiao Feng Mridul Muralidharan Nan Zhu Nicholas Jiang Nicolas Fraison Pengqi Li Sanskar Modi Saurabh Dubey Shaoyun Chen Shengjie Wang Shlomi Uubul Veli Yang Weijie Guo Xianming Lei Xinyu Wang Xu Huang Yajun Gao Yanze Jiang Yi Chen Yi Zhu Yuting Wang Yuxin Tan Zhao Zhao Zhaohui Xu Zhengqi Zhang Zhentao Shuai Ziyi Wu","title":"Credits"},{"location":"community/release_notes/release_note_0.6.1/","text":"Apache Celeborn\u2122 0.6.1 Release Notes Highlight Support to register application info with user identifier and extra info Support celeborn.client.push.maxBytesSizeInFlight Fix the issue where reading replica partition that returns zero chunk causes tasks to hang Improvement [CELEBORN-1258] Support to register application info with user identifier and extra info [CELEBORN-1793] Add netty pinned memory metrics [CELEBORN-1844][FOLLOWUP] alway try to use memory storage if available [CELEBORN-1917] Support celeborn.client.push.maxBytesSizeInFlight [CELEBORN-2044] Proactively cleanup stream state from ChunkStreamManager when the stream ends [CELEBORN-2056] Make the wait time for the client to read non shuffle partitions configurable [CELEBORN-2061] Introduce metrics to count the amount of data flushed into different storage types [CELEBORN-2070][CIP-14] Support MapperEnd/Response in CppClient [CELEBORN-2072] Add missing instance filter to grafana dashboard [CELEBORN-2077] Improve toString by JEP-280 instead of ToStringBuilder [CELEBORN-2081] PushDataHandler onFailure log shuffle key [CELEBORN-2082] Add the log of excluded workers with high workloads [CELEBORN-2083] For WorkerStatusTracker , log error for recordWorkerFailure [CELEBORN-2085] Use a fixed buffer for flush copying to reduce GC [CELEBORN-2090] Support Lz4 Decompression in CppClient [CELEBORN-2092] Inc COMMIT_FILES_FAIL_COUNT when TimerWriter::close timeout [CELEBORN-2102] Introduce SorterCacheHitRate metric to monitor the hit reate of index cache for sorter [CELEBORN-2104] Clean up sources of NettyRpcEnv, Master and Worker to avoid thread leaks [CELEBORN-2106] CommitFile/Reserved location shows detail primary location UniqueId [CELEBORN-2108] Remove redundant PartitionType [CELEBORN-2112] Introduce PausePushDataStatus and PausePushDataAndReplicateStatus metric to record status of pause push data [CELEBORN-2117] Use git submodules for Chart Actions [CELEBORN-2118] Introduce IsHighWorkload metric to monitor worker overload status [CELEBORN-2122] Avoiding multiple accesses to HDFS when retrieving indexes in DfsPartitionReader [CELEBORN-2123] Add log for commit file size [CELEBORN-2125] Improve PartitionFilesSorter sort timeout log [CELEBORN-2128] Close hadoopFs FileSystem when worker is closed [CELEBORN-2129] CelebornBufferStream should invoke openStreamInternal in moveToNextPartitionIfPossible to avoid client creation timeout [CELEBORN-2133] LifecycleManager should log stack trace of Throwable for invoking appShuffleTrackerCallback Stability and Bug Fix [CELEBORN-1792][FOLLOWUP] Add missing break in resumeByPinnedMemory [CELEBORN-1844][FOLLOWUP] Fix the condition of StoragePolicy that worker uses memory storage [CELEBORN-2052] Fix unexpected warning logs in Flink caused by duplicate BufferStreamEnd messages [CELEBORN-2064] Fix the issue where reading replica partition that returns zero chunk causes tasks to hang [CELEBORN-2068] TransportClientFactory should close channel explicitly to avoid resource leak for timeout or failure [CELEBORN-2071] Fix the issue where some gauge metrics were not registered to the metricRegistry [CELEBORN-2073] Fix PartitionFileSizeBytes metrics [CELEBORN-2075] Fix OpenStreamTime metrics for PbOpenStreamList request [CELEBORN-2078] Fix wrong grafana metrics units [CELEBORN-2086] S3FlushTask and OssFlushTask should close ByteArrayInputStream to avoid resource leak [CELEBORN-2088] Fix NPE if celeborn.client.spark.fetch.cleanFailedShuffle enabled [CELEBORN-2100] Fix performance issue on readToReadOnlyBuffer [CELEBORN-2119] DfsTierWriter should close s3MultipartUploadHandler and ossMultipartUploadHandler for close resource [CELEBORN-2139] Fix the condition for using OSS storage Documentation [CELEBORN-2135] Rename Blaze to Auron [CELEBORN-2087] Refine the docs configuration table view Dependencies [CELEBORN-2080] Bump Flink from 1.19.2, 1.20.1 to 1.19.3, 1.20.2 Credits Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.6.1 version: Contributors Ethan Feng Hao Duan Jiaming Xie Mridul Muralidharan Nicholas Jiang Rui Zhuo Shaoyun Chen Wang Fei Xian Zhuang Xinyu Wang Xu Huang Yang Liu Zhaohui Xu Zhengqi Zhang","title":"Apache Celeborn\u2122 0.6.1 Release Notes"},{"location":"community/release_notes/release_note_0.6.1/#apache-celeborntm-061-release-notes","text":"","title":"Apache Celeborn\u2122 0.6.1 Release Notes"},{"location":"community/release_notes/release_note_0.6.1/#highlight","text":"Support to register application info with user identifier and extra info Support celeborn.client.push.maxBytesSizeInFlight Fix the issue where reading replica partition that returns zero chunk causes tasks to hang","title":"Highlight"},{"location":"community/release_notes/release_note_0.6.1/#improvement","text":"[CELEBORN-1258] Support to register application info with user identifier and extra info [CELEBORN-1793] Add netty pinned memory metrics [CELEBORN-1844][FOLLOWUP] alway try to use memory storage if available [CELEBORN-1917] Support celeborn.client.push.maxBytesSizeInFlight [CELEBORN-2044] Proactively cleanup stream state from ChunkStreamManager when the stream ends [CELEBORN-2056] Make the wait time for the client to read non shuffle partitions configurable [CELEBORN-2061] Introduce metrics to count the amount of data flushed into different storage types [CELEBORN-2070][CIP-14] Support MapperEnd/Response in CppClient [CELEBORN-2072] Add missing instance filter to grafana dashboard [CELEBORN-2077] Improve toString by JEP-280 instead of ToStringBuilder [CELEBORN-2081] PushDataHandler onFailure log shuffle key [CELEBORN-2082] Add the log of excluded workers with high workloads [CELEBORN-2083] For WorkerStatusTracker , log error for recordWorkerFailure [CELEBORN-2085] Use a fixed buffer for flush copying to reduce GC [CELEBORN-2090] Support Lz4 Decompression in CppClient [CELEBORN-2092] Inc COMMIT_FILES_FAIL_COUNT when TimerWriter::close timeout [CELEBORN-2102] Introduce SorterCacheHitRate metric to monitor the hit reate of index cache for sorter [CELEBORN-2104] Clean up sources of NettyRpcEnv, Master and Worker to avoid thread leaks [CELEBORN-2106] CommitFile/Reserved location shows detail primary location UniqueId [CELEBORN-2108] Remove redundant PartitionType [CELEBORN-2112] Introduce PausePushDataStatus and PausePushDataAndReplicateStatus metric to record status of pause push data [CELEBORN-2117] Use git submodules for Chart Actions [CELEBORN-2118] Introduce IsHighWorkload metric to monitor worker overload status [CELEBORN-2122] Avoiding multiple accesses to HDFS when retrieving indexes in DfsPartitionReader [CELEBORN-2123] Add log for commit file size [CELEBORN-2125] Improve PartitionFilesSorter sort timeout log [CELEBORN-2128] Close hadoopFs FileSystem when worker is closed [CELEBORN-2129] CelebornBufferStream should invoke openStreamInternal in moveToNextPartitionIfPossible to avoid client creation timeout [CELEBORN-2133] LifecycleManager should log stack trace of Throwable for invoking appShuffleTrackerCallback","title":"Improvement"},{"location":"community/release_notes/release_note_0.6.1/#stability-and-bug-fix","text":"[CELEBORN-1792][FOLLOWUP] Add missing break in resumeByPinnedMemory [CELEBORN-1844][FOLLOWUP] Fix the condition of StoragePolicy that worker uses memory storage [CELEBORN-2052] Fix unexpected warning logs in Flink caused by duplicate BufferStreamEnd messages [CELEBORN-2064] Fix the issue where reading replica partition that returns zero chunk causes tasks to hang [CELEBORN-2068] TransportClientFactory should close channel explicitly to avoid resource leak for timeout or failure [CELEBORN-2071] Fix the issue where some gauge metrics were not registered to the metricRegistry [CELEBORN-2073] Fix PartitionFileSizeBytes metrics [CELEBORN-2075] Fix OpenStreamTime metrics for PbOpenStreamList request [CELEBORN-2078] Fix wrong grafana metrics units [CELEBORN-2086] S3FlushTask and OssFlushTask should close ByteArrayInputStream to avoid resource leak [CELEBORN-2088] Fix NPE if celeborn.client.spark.fetch.cleanFailedShuffle enabled [CELEBORN-2100] Fix performance issue on readToReadOnlyBuffer [CELEBORN-2119] DfsTierWriter should close s3MultipartUploadHandler and ossMultipartUploadHandler for close resource [CELEBORN-2139] Fix the condition for using OSS storage","title":"Stability and Bug Fix"},{"location":"community/release_notes/release_note_0.6.1/#documentation","text":"[CELEBORN-2135] Rename Blaze to Auron [CELEBORN-2087] Refine the docs configuration table view","title":"Documentation"},{"location":"community/release_notes/release_note_0.6.1/#dependencies","text":"[CELEBORN-2080] Bump Flink from 1.19.2, 1.20.1 to 1.19.3, 1.20.2","title":"Dependencies"},{"location":"community/release_notes/release_note_0.6.1/#credits","text":"Thanks to the following contributors who helped to review and commit to Apache Celeborn 0.6.1 version: Contributors Ethan Feng Hao Duan Jiaming Xie Mridul Muralidharan Nicholas Jiang Rui Zhuo Shaoyun Chen Wang Fei Xian Zhuang Xinyu Wang Xu Huang Yang Liu Zhaohui Xu Zhengqi Zhang","title":"Credits"}]}